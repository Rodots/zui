(function(b,Y){typeof exports=="object"&&typeof module<"u"?Y(exports):typeof define=="function"&&define.amd?define(["exports"],Y):(b=typeof globalThis<"u"?globalThis:b||self,Y(b.zui={}))})(this,function(b){var gs,ys,_n,ne,vs,ye,Wt,bn,Cn,Sr,ws,Ge,Ot,ve,_s,bs,lr,Cs,cr,$n,$s,ks,xs,Ss,Ms,hr,Hd,dr,Bd,kn,xn,Sn,Mn,Ts,Es,ur,Tn,Ns,Rs,As,Ps,fr,pr,mr,gr,zd,yr,vr,Fd,wr,Vd,_r,Ds,br,Cr,$r,Od,we,_e;"use strict";var Cl=(b,Y,at)=>{if(!Y.has(b))throw TypeError("Cannot "+at)};var $=(b,Y,at)=>(Cl(b,Y,"read from private field"),at?at.call(b):Y.get(b)),L=(b,Y,at)=>{if(Y.has(b))throw TypeError("Cannot add the same private member more than once");Y instanceof WeakSet?Y.add(b):Y.set(b,at)},H=(b,Y,at,Mr)=>(Cl(b,Y,"write to private field"),Mr?Mr.call(b,at):Y.set(b,at),at);var se=(b,Y,at)=>(Cl(b,Y,"access private method"),at);const Y="",at="",Mr="",Op="",Ht=document,Ws=window,$l=Ht.documentElement,be=Ht.createElement.bind(Ht),kl=be("div"),Tr=be("table"),Ud=be("tbody"),xl=be("tr"),{isArray:Os,prototype:Sl}=Array,{concat:qd,filter:Er,indexOf:Ml,map:Tl,push:Gd,slice:El,some:Nr,splice:Yd}=Sl,Kd=/^#(?:[\w-]|\\.|[^\x00-\xa0])*$/,jd=/^\.(?:[\w-]|\\.|[^\x00-\xa0])*$/,Xd=/<.+>/,Jd=/^\w+$/;function Rr(e,t){const n=Zd(t);return!e||!n&&!Ce(t)&&!X(t)?[]:!n&&jd.test(e)?t.getElementsByClassName(e.slice(1).replace(/\\/g,"")):!n&&Jd.test(e)?t.getElementsByTagName(e):t.querySelectorAll(e)}class Hs{constructor(t,n){if(!t)return;if(Ar(t))return t;let s=t;if(it(t)){const i=n||Ht;if(s=Kd.test(t)&&Ce(i)?i.getElementById(t.slice(1).replace(/\\/g,"")):Xd.test(t)?Ll(t):Ar(i)?i.find(t):it(i)?m(i).find(t):Rr(t,i),!s)return}else if($e(t))return this.ready(t);(s.nodeType||s===Ws)&&(s=[s]),this.length=s.length;for(let i=0,r=this.length;i<r;i++)this[i]=s[i]}init(t,n){return new Hs(t,n)}}const k=Hs.prototype,m=k.init;m.fn=m.prototype=k,k.length=0,k.splice=Yd,typeof Symbol=="function"&&(k[Symbol.iterator]=Sl[Symbol.iterator]);function Ar(e){return e instanceof Hs}function Ye(e){return!!e&&e===e.window}function Ce(e){return!!e&&e.nodeType===9}function Zd(e){return!!e&&e.nodeType===11}function X(e){return!!e&&e.nodeType===1}function Qd(e){return!!e&&e.nodeType===3}function tu(e){return typeof e=="boolean"}function $e(e){return typeof e=="function"}function it(e){return typeof e=="string"}function lt(e){return e===void 0}function En(e){return e===null}function Nl(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Pr(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}m.isWindow=Ye,m.isFunction=$e,m.isArray=Os,m.isNumeric=Nl,m.isPlainObject=Pr;function Q(e,t,n){if(n){let s=e.length;for(;s--;)if(t.call(e[s],s,e[s])===!1)return e}else if(Pr(e)){const s=Object.keys(e);for(let i=0,r=s.length;i<r;i++){const o=s[i];if(t.call(e[o],o,e[o])===!1)return e}}else for(let s=0,i=e.length;s<i;s++)if(t.call(e[s],s,e[s])===!1)return e;return e}m.each=Q,k.each=function(e){return Q(this,e)},k.empty=function(){return this.each((e,t)=>{for(;t.firstChild;)t.removeChild(t.firstChild)})};function Bs(...e){const t=tu(e[0])?e.shift():!1,n=e.shift(),s=e.length;if(!n)return{};if(!s)return Bs(t,m,n);for(let i=0;i<s;i++){const r=e[i];for(const o in r)t&&(Os(r[o])||Pr(r[o]))?((!n[o]||n[o].constructor!==r[o].constructor)&&(n[o]=new r[o].constructor),Bs(t,n[o],r[o])):n[o]=r[o]}return n}m.extend=Bs,k.extend=function(e){return Bs(k,e)};const eu=/\S+/g;function zs(e){return it(e)?e.match(eu)||[]:[]}k.toggleClass=function(e,t){const n=zs(e),s=!lt(t);return this.each((i,r)=>{X(r)&&Q(n,(o,a)=>{s?t?r.classList.add(a):r.classList.remove(a):r.classList.toggle(a)})})},k.addClass=function(e){return this.toggleClass(e,!0)},k.removeAttr=function(e){const t=zs(e);return this.each((n,s)=>{X(s)&&Q(t,(i,r)=>{s.removeAttribute(r)})})};function nu(e,t){if(e){if(it(e)){if(arguments.length<2){if(!this[0]||!X(this[0]))return;const n=this[0].getAttribute(e);return En(n)?void 0:n}return lt(t)?this:En(t)?this.removeAttr(e):this.each((n,s)=>{X(s)&&s.setAttribute(e,t)})}for(const n in e)this.attr(n,e[n]);return this}}k.attr=nu,k.removeClass=function(e){return arguments.length?this.toggleClass(e,!1):this.attr("class","")},k.hasClass=function(e){return!!e&&Nr.call(this,t=>X(t)&&t.classList.contains(e))},k.get=function(e){return lt(e)?El.call(this):(e=Number(e),this[e<0?e+this.length:e])},k.eq=function(e){return m(this.get(e))},k.first=function(){return this.eq(0)},k.last=function(){return this.eq(-1)};function su(e){return lt(e)?this.get().map(t=>X(t)||Qd(t)?t.textContent:"").join(""):this.each((t,n)=>{X(n)&&(n.textContent=e)})}k.text=su;function Bt(e,t,n){if(!X(e))return;const s=Ws.getComputedStyle(e,null);return n?s.getPropertyValue(t)||void 0:s[t]||e.style[t]}function Et(e,t){return parseInt(Bt(e,t),10)||0}function Rl(e,t){return Et(e,`border${t?"Left":"Top"}Width`)+Et(e,`padding${t?"Left":"Top"}`)+Et(e,`padding${t?"Right":"Bottom"}`)+Et(e,`border${t?"Right":"Bottom"}Width`)}const Dr={};function iu(e){if(Dr[e])return Dr[e];const t=be(e);Ht.body.insertBefore(t,null);const n=Bt(t,"display");return Ht.body.removeChild(t),Dr[e]=n!=="none"?n:"block"}function Al(e){return Bt(e,"display")==="none"}function Pl(e,t){const n=e&&(e.matches||e.webkitMatchesSelector||e.msMatchesSelector);return!!n&&!!t&&n.call(e,t)}function Fs(e){return it(e)?(t,n)=>Pl(n,e):$e(e)?e:Ar(e)?(t,n)=>e.is(n):e?(t,n)=>n===e:()=>!1}k.filter=function(e){const t=Fs(e);return m(Er.call(this,(n,s)=>t.call(n,s,n)))};function ie(e,t){return t?e.filter(t):e}k.detach=function(e){return ie(this,e).each((t,n)=>{n.parentNode&&n.parentNode.removeChild(n)}),this};const ru=/^\s*<(\w+)[^>]*>/,ou=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,Dl={"*":kl,tr:Ud,td:xl,th:xl,thead:Tr,tbody:Tr,tfoot:Tr};function Ll(e){if(!it(e))return[];if(ou.test(e))return[be(RegExp.$1)];const t=ru.test(e)&&RegExp.$1,n=Dl[t]||Dl["*"];return n.innerHTML=e,m(n.childNodes).detach().get()}m.parseHTML=Ll,k.has=function(e){const t=it(e)?(n,s)=>Rr(e,s).length:(n,s)=>s.contains(e);return this.filter(t)},k.not=function(e){const t=Fs(e);return this.filter((n,s)=>(!it(e)||X(s))&&!t.call(s,n,s))};function zt(e,t,n,s){const i=[],r=$e(t),o=s&&Fs(s);for(let a=0,l=e.length;a<l;a++)if(r){const h=t(e[a]);h.length&&Gd.apply(i,h)}else{let h=e[a][t];for(;h!=null&&!(s&&o(-1,h));)i.push(h),h=n?h[t]:null}return i}function Il(e){return e.multiple&&e.options?zt(Er.call(e.options,t=>t.selected&&!t.disabled&&!t.parentNode.disabled),"value"):e.value||""}function au(e){return arguments.length?this.each((t,n)=>{const s=n.multiple&&n.options;if(s||Yl.test(n.type)){const i=Os(e)?Tl.call(e,String):En(e)?[]:[String(e)];s?Q(n.options,(r,o)=>{o.selected=i.indexOf(o.value)>=0},!0):n.checked=i.indexOf(n.value)>=0}else n.value=lt(e)||En(e)?"":e}):this[0]&&Il(this[0])}k.val=au,k.is=function(e){const t=Fs(e);return Nr.call(this,(n,s)=>t.call(n,s,n))},m.guid=1;function Nt(e){return e.length>1?Er.call(e,(t,n,s)=>Ml.call(s,t)===n):e}m.unique=Nt,k.add=function(e,t){return m(Nt(this.get().concat(m(e,t).get())))},k.children=function(e){return ie(m(Nt(zt(this,t=>t.children))),e)},k.parent=function(e){return ie(m(Nt(zt(this,"parentNode"))),e)},k.index=function(e){const t=e?m(e)[0]:this[0],n=e?this:m(t).parent().children();return Ml.call(n,t)},k.closest=function(e){const t=this.filter(e);if(t.length)return t;const n=this.parent();return n.length?n.closest(e):t},k.siblings=function(e){return ie(m(Nt(zt(this,t=>m(t).parent().children().not(t)))),e)},k.find=function(e){return m(Nt(zt(this,t=>Rr(e,t))))};const lu=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,cu=/^$|^module$|\/(java|ecma)script/i,hu=["type","src","nonce","noModule"];function du(e,t){const n=m(e);n.filter("script").add(n.find("script")).each((s,i)=>{if(cu.test(i.type)&&$l.contains(i)){const r=be("script");r.text=i.textContent.replace(lu,""),Q(hu,(o,a)=>{i[a]&&(r[a]=i[a])}),t.head.insertBefore(r,null),t.head.removeChild(r)}})}function uu(e,t,n,s,i){s?e.insertBefore(t,n?e.firstChild:null):e.nodeName==="HTML"?e.parentNode.replaceChild(t,e):e.parentNode.insertBefore(t,n?e:e.nextSibling),i&&du(t,e.ownerDocument)}function re(e,t,n,s,i,r,o,a){return Q(e,(l,h)=>{Q(m(h),(c,d)=>{Q(m(t),(u,p)=>{const g=n?d:p,y=n?p:d,w=n?c:u;uu(g,w?y.cloneNode(!0):y,s,i,!w)},a)},o)},r),t}k.after=function(){return re(arguments,this,!1,!1,!1,!0,!0)},k.append=function(){return re(arguments,this,!1,!1,!0)};function fu(e){if(!arguments.length)return this[0]&&this[0].innerHTML;if(lt(e))return this;const t=/<script[\s>]/.test(e);return this.each((n,s)=>{X(s)&&(t?m(s).empty().append(e):s.innerHTML=e)})}k.html=fu,k.appendTo=function(e){return re(arguments,this,!0,!1,!0)},k.wrapInner=function(e){return this.each((t,n)=>{const s=m(n),i=s.contents();i.length?i.wrapAll(e):s.append(e)})},k.before=function(){return re(arguments,this,!1,!0)},k.wrapAll=function(e){let t=m(e),n=t[0];for(;n.children.length;)n=n.firstElementChild;return this.first().before(t),this.appendTo(n)},k.wrap=function(e){return this.each((t,n)=>{const s=m(e)[0];m(n).wrapAll(t?s.cloneNode(!0):s)})},k.insertAfter=function(e){return re(arguments,this,!0,!1,!1,!1,!1,!0)},k.insertBefore=function(e){return re(arguments,this,!0,!0)},k.prepend=function(){return re(arguments,this,!1,!0,!0,!0,!0)},k.prependTo=function(e){return re(arguments,this,!0,!0,!0,!1,!1,!0)},k.contents=function(){return m(Nt(zt(this,e=>e.tagName==="IFRAME"?[e.contentDocument]:e.tagName==="TEMPLATE"?e.content.childNodes:e.childNodes)))},k.next=function(e,t,n){return ie(m(Nt(zt(this,"nextElementSibling",t,n))),e)},k.nextAll=function(e){return this.next(e,!0)},k.nextUntil=function(e,t){return this.next(t,!0,e)},k.parents=function(e,t){return ie(m(Nt(zt(this,"parentElement",!0,t))),e)},k.parentsUntil=function(e,t){return this.parents(t,e)},k.prev=function(e,t,n){return ie(m(Nt(zt(this,"previousElementSibling",t,n))),e)},k.prevAll=function(e){return this.prev(e,!0)},k.prevUntil=function(e,t){return this.prev(t,!0,e)},k.map=function(e){return m(qd.apply([],Tl.call(this,(t,n)=>e.call(t,n,t))))},k.clone=function(){return this.map((e,t)=>t.cloneNode(!0))},k.offsetParent=function(){return this.map((e,t)=>{let n=t.offsetParent;for(;n&&Bt(n,"position")==="static";)n=n.offsetParent;return n||$l})},k.slice=function(e,t){return m(El.call(this,e,t))};const pu=/-([a-z])/g;function Lr(e){return e.replace(pu,(t,n)=>n.toUpperCase())}k.ready=function(e){const t=()=>setTimeout(e,0,m);return Ht.readyState!=="loading"?t():Ht.addEventListener("DOMContentLoaded",t),this},k.unwrap=function(){return this.parent().each((e,t)=>{if(t.tagName==="BODY")return;const n=m(t);n.replaceWith(n.children())}),this},k.offset=function(){const e=this[0];if(!e)return;const t=e.getBoundingClientRect();return{top:t.top+Ws.pageYOffset,left:t.left+Ws.pageXOffset}},k.position=function(){const e=this[0];if(!e)return;const t=Bt(e,"position")==="fixed",n=t?e.getBoundingClientRect():this.offset();if(!t){const s=e.ownerDocument;let i=e.offsetParent||s.documentElement;for(;(i===s.body||i===s.documentElement)&&Bt(i,"position")==="static";)i=i.parentNode;if(i!==e&&X(i)){const r=m(i).offset();n.top-=r.top+Et(i,"borderTopWidth"),n.left-=r.left+Et(i,"borderLeftWidth")}}return{top:n.top-Et(e,"marginTop"),left:n.left-Et(e,"marginLeft")}};const Wl={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};k.prop=function(e,t){if(e){if(it(e))return e=Wl[e]||e,arguments.length<2?this[0]&&this[0][e]:this.each((n,s)=>{s[e]=t});for(const n in e)this.prop(n,e[n]);return this}},k.removeProp=function(e){return this.each((t,n)=>{delete n[Wl[e]||e]})};const mu=/^--/;function Ir(e){return mu.test(e)}const Wr={},{style:gu}=kl,yu=["webkit","moz","ms"];function vu(e,t=Ir(e)){if(t)return e;if(!Wr[e]){const n=Lr(e),s=`${n[0].toUpperCase()}${n.slice(1)}`,i=`${n} ${yu.join(`${s} `)}${s}`.split(" ");Q(i,(r,o)=>{if(o in gu)return Wr[e]=o,!1})}return Wr[e]}const wu={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Ol(e,t,n=Ir(e)){return!n&&!wu[e]&&Nl(t)?`${t}px`:t}function _u(e,t){if(it(e)){const n=Ir(e);return e=vu(e,n),arguments.length<2?this[0]&&Bt(this[0],e,n):e?(t=Ol(e,t,n),this.each((s,i)=>{X(i)&&(n?i.style.setProperty(e,t):i.style[e]=t)})):this}for(const n in e)this.css(n,e[n]);return this}k.css=_u;function Hl(e,t){try{return e(t)}catch{return t}}const bu=/^\s+|\s+$/;function Bl(e,t){const n=e.dataset[t]||e.dataset[Lr(t)];return bu.test(n)?n:Hl(JSON.parse,n)}function Cu(e,t,n){n=Hl(JSON.stringify,n),e.dataset[Lr(t)]=n}function $u(e,t){if(!e){if(!this[0])return;const n={};for(const s in this[0].dataset)n[s]=Bl(this[0],s);return n}if(it(e))return arguments.length<2?this[0]&&Bl(this[0],e):lt(t)?this:this.each((n,s)=>{Cu(s,e,t)});for(const n in e)this.data(n,e[n]);return this}k.data=$u;function zl(e,t){const n=e.documentElement;return Math.max(e.body[`scroll${t}`],n[`scroll${t}`],e.body[`offset${t}`],n[`offset${t}`],n[`client${t}`])}Q([!0,!1],(e,t)=>{Q(["Width","Height"],(n,s)=>{const i=`${t?"outer":"inner"}${s}`;k[i]=function(r){if(this[0])return Ye(this[0])?t?this[0][`inner${s}`]:this[0].document.documentElement[`client${s}`]:Ce(this[0])?zl(this[0],s):this[0][`${t?"offset":"client"}${s}`]+(r&&t?Et(this[0],`margin${n?"Top":"Left"}`)+Et(this[0],`margin${n?"Bottom":"Right"}`):0)}})}),Q(["Width","Height"],(e,t)=>{const n=t.toLowerCase();k[n]=function(s){if(!this[0])return lt(s)?void 0:this;if(!arguments.length)return Ye(this[0])?this[0].document.documentElement[`client${t}`]:Ce(this[0])?zl(this[0],t):this[0].getBoundingClientRect()[n]-Rl(this[0],!e);const i=parseInt(s,10);return this.each((r,o)=>{if(!X(o))return;const a=Bt(o,"boxSizing");o.style[n]=Ol(n,i+(a==="border-box"?Rl(o,!e):0))})}});const Fl="___cd";k.toggle=function(e){return this.each((t,n)=>{if(!X(n))return;const s=Al(n);(lt(e)?s:e)?(n.style.display=n[Fl]||"",Al(n)&&(n.style.display=iu(n.tagName))):s||(n[Fl]=Bt(n,"display"),n.style.display="none")})},k.hide=function(){return this.toggle(!1)},k.show=function(){return this.toggle(!0)};const Vl="___ce",Or=".",Hr={focus:"focusin",blur:"focusout"},Ul={mouseenter:"mouseover",mouseleave:"mouseout"},ku=/^(mouse|pointer|contextmenu|drag|drop|click|dblclick)/i;function Br(e){return Ul[e]||Hr[e]||e}function zr(e){const t=e.split(Or);return[t[0],t.slice(1).sort()]}k.trigger=function(e,t){if(it(e)){const[s,i]=zr(e),r=Br(s);if(!r)return this;const o=ku.test(r)?"MouseEvents":"HTMLEvents";e=Ht.createEvent(o),e.initEvent(r,!0,!0),e.namespace=i.join(Or),e.___ot=s}e.___td=t;const n=e.___ot in Hr;return this.each((s,i)=>{n&&$e(i[e.___ot])&&(i[`___i${e.type}`]=!0,i[e.___ot](),i[`___i${e.type}`]=!1),i.dispatchEvent(e)})};function ql(e){return e[Vl]=e[Vl]||{}}function xu(e,t,n,s,i){const r=ql(e);r[t]=r[t]||[],r[t].push([n,s,i]),e.addEventListener(t,i)}function Gl(e,t){return!t||!Nr.call(t,n=>e.indexOf(n)<0)}function Vs(e,t,n,s,i){const r=ql(e);if(t)r[t]&&(r[t]=r[t].filter(([o,a,l])=>{if(i&&l.guid!==i.guid||!Gl(o,n)||s&&s!==a)return!0;e.removeEventListener(t,l)}));else for(t in r)Vs(e,t,n,s,i)}k.off=function(e,t,n){if(lt(e))this.each((s,i)=>{!X(i)&&!Ce(i)&&!Ye(i)||Vs(i)});else if(it(e))$e(t)&&(n=t,t=""),Q(zs(e),(s,i)=>{const[r,o]=zr(i),a=Br(r);this.each((l,h)=>{!X(h)&&!Ce(h)&&!Ye(h)||Vs(h,a,o,t,n)})});else for(const s in e)this.off(s,e[s]);return this},k.remove=function(e){return ie(this,e).detach().off(),this},k.replaceWith=function(e){return this.before(e).remove()},k.replaceAll=function(e){return m(e).replaceWith(this),this};function Su(e,t,n,s,i){if(!it(e)){for(const r in e)this.on(r,t,n,e[r],i);return this}return it(t)||(lt(t)||En(t)?t="":lt(n)?(n=t,t=""):(s=n,n=t,t="")),$e(s)||(s=n,n=void 0),s?(Q(zs(e),(r,o)=>{const[a,l]=zr(o),h=Br(a),c=a in Ul,d=a in Hr;h&&this.each((u,p)=>{if(!X(p)&&!Ce(p)&&!Ye(p))return;const g=function(y){if(y.target[`___i${y.type}`])return y.stopImmediatePropagation();if(y.namespace&&!Gl(l,y.namespace.split(Or))||!t&&(d&&(y.target!==p||y.___ot===h)||c&&y.relatedTarget&&p.contains(y.relatedTarget)))return;let w=p;if(t){let _=y.target;for(;!Pl(_,t);)if(_===p||(_=_.parentNode,!_))return;w=_}Object.defineProperty(y,"currentTarget",{configurable:!0,get(){return w}}),Object.defineProperty(y,"delegateTarget",{configurable:!0,get(){return p}}),Object.defineProperty(y,"data",{configurable:!0,get(){return n}});const v=s.call(w,y,y.___td);i&&Vs(p,h,l,t,g),v===!1&&(y.preventDefault(),y.stopPropagation())};g.guid=s.guid=s.guid||m.guid++,xu(p,h,l,t,g)})}),this):this}k.on=Su;function Mu(e,t,n,s){return this.on(e,t,n,s,!0)}k.one=Mu;const Tu=/\r?\n/g;function Eu(e,t){return`&${encodeURIComponent(e)}=${encodeURIComponent(t.replace(Tu,`\r
`))}`}const Nu=/file|reset|submit|button|image/i,Yl=/radio|checkbox/i;k.serialize=function(){let e="";return this.each((t,n)=>{Q(n.elements||[n],(s,i)=>{if(i.disabled||!i.name||i.tagName==="FIELDSET"||Nu.test(i.type)||Yl.test(i.type)&&!i.checked)return;const r=Il(i);if(!lt(r)){const o=Os(r)?r:[r];Q(o,(a,l)=>{e+=Eu(i.name,l)})}})}),e.slice(1)},window.$=m;function Kl(e,t){if(e==null)return[e,void 0];typeof t=="string"&&(t=t.split("."));const n=t.join(".");let s=e;const i=[s];for(;typeof s=="object"&&s!==null&&t.length;){let r=t.shift(),o;const a=r.indexOf("[");if(a>0&&a<r.length-1&&r.endsWith("]")&&(o=r.substring(a+1,r.length-1),r=r.substring(0,a)),s=s[r],i.push(s),o!==void 0)if(typeof s=="object"&&s!==null)s instanceof Map?s=s.get(o):s=s[o],i.push(s);else throw new Error(`Cannot access property "${r}[${o}]", the full path is "${n}".`)}if(t.length)throw new Error(`Cannot access property with rest path "${t.join(".")}", the full path is "${n}".`);return i}function jl(e,t,n){try{const s=Kl(e,t),i=s[s.length-1];return i===void 0?n:i}catch{return n}}function nt(e,...t){if(t.length===0)return e;if(t.length===1&&typeof t[0]=="object"&&t[0]){const n=t[0];return Object.keys(n).forEach(s=>{const i=n[s]??"";e=e.replace(new RegExp(`\\{${s}\\}`,"g"),`${i}`)}),e}for(let n=0;n<t.length;n++){const s=t[n]??"";e=e.replace(new RegExp(`\\{${n}\\}`,"g"),`${s}`)}return e}var Fr=(e=>(e[e.B=1]="B",e[e.KB=1024]="KB",e[e.MB=1048576]="MB",e[e.GB=1073741824]="GB",e[e.TB=1099511627776]="TB",e))(Fr||{});function Xl(e,t=2,n){return Number.isNaN(e)?"?KB":(n||(e<1024?n="B":e<1048576?n="KB":e<1073741824?n="MB":e<1099511627776?n="GB":n="TB"),(e/Fr[n]).toFixed(t)+n)}const Jl=e=>{const t=/^[0-9]*(B|KB|MB|GB|TB)$/;e=e.toUpperCase();const n=e.match(t);if(!n)return 0;const s=n[1];return e=e.replace(s,""),Number.parseInt(e,10)*Fr[s]};let Vr=(document.documentElement.getAttribute("lang")||"zh_cn").toLowerCase().replace("-","_"),oe;function Ru(){return Vr}function Au(e){Vr=e.toLowerCase()}function Zl(e,t){oe||(oe={}),typeof e=="string"&&(e={[e]:t??{}}),m.extend(!0,oe,e)}function tt(e,t,n,s,i,r){Array.isArray(e)?oe&&e.unshift(oe):e=oe?[oe,e]:[e],typeof n=="string"&&(r=i,i=s,s=n,n=void 0);const o=i||Vr;let a;for(const l of e){if(!l)continue;const h=l[o];if(!h)continue;const c=r&&l===oe?`${r}.${t}`:t;if(a=jl(h,c),a!==void 0)break}return a===void 0?s:n?nt(a,...Array.isArray(n)?n:[n]):a}function Pu(e,t,n,s){return tt(void 0,e,t,n,s)}tt.addLang=Zl,tt.getLang=Pu,tt.getCode=Ru,tt.setCode=Au,Zl({zh_cn:{confirm:"确定",cancel:"取消",delete:"删除",add:"添加"},zh_tw:{confirm:"確定",cancel:"取消",delete:"刪除",add:"添加"},en:{confirm:"Confirm",cancel:"Cancel",delete:"Delete",add:"Add"}});function Ur(...e){const t=[],n=new Map,s=(i,r)=>{if(Array.isArray(i)&&(r=i[1],i=i[0]),!i.length)return;const o=n.get(i);typeof o=="number"?t[o][1]=!!r:(n.set(i,t.length),t.push([i,!!r]))};return e.forEach(i=>{typeof i=="function"&&(i=i()),Array.isArray(i)?Ur(...i).forEach(s):i&&typeof i=="object"?Object.entries(i).forEach(s):typeof i=="string"&&i.split(" ").forEach(r=>s(r,!0))}),t.sort((i,r)=>(n.get(i[0])||0)-(n.get(r[0])||0))}const S=(...e)=>Ur(...e).reduce((t,[n,s])=>(s&&t.push(n),t),[]).join(" ");m.classes=S,m.fn.setClass=function(e,...t){return this.each((n,s)=>{const i=m(s);e===!0?i.attr("class",S(i.attr("class"),...t)):i.addClass(S(e,...t))})};const Nn=new WeakMap;function qr(e,t,n){const s=Nn.has(e),i=s?Nn.get(e):{};typeof t=="string"?i[t]=n:t===null?Object.keys(i).forEach(r=>{delete i[r]}):Object.assign(i,t),Object.keys(i).forEach(r=>{i[r]===void 0&&delete i[r]}),Object.keys(i).length?(!s&&e instanceof Element&&Object.assign(i,m(e).dataset(),i),Nn.set(e,i)):Nn.delete(e)}function Ql(e,t){let n=Nn.get(e)||{};return e instanceof Element&&(n=Object.assign({},m(e).dataset(),n)),t===void 0?n:n[t]}m.fn.dataset=m.fn.data,m.fn.data=function(...e){if(!this.length)return;const[t,n]=e;return!e.length||e.length===1&&typeof t=="string"?Ql(this[0],t):this.each((s,i)=>qr(i,t,n))},m.fn.removeData=function(e=null){return this.each((t,n)=>qr(n,e))},m.fn._attr=m.fn.attr,m.fn.extend({attr(...e){const[t,n]=e;return!e.length||e.length===1&&typeof t=="string"?this._attr.apply(this,e):typeof t=="object"?(t&&Object.keys(t).forEach(s=>{const i=t[s];i===null?this.removeAttr(s):this._attr(s,i)}),this):n===null?this.removeAttr(t):this._attr(t,n)}}),m.Event=(e,t)=>{const[n,...s]=e.split("."),i=new Event(n,{bubbles:!0,cancelable:!0});return i.namespace=s.join("."),i.___ot=n,i.___td=t,i};const Rn=(e,t)=>new Promise(n=>{const s=window.setTimeout(n,e);t&&t(s)}),Us=new Map;function tc(e,t,n){const{zui:s}=window;Us.size||Object.keys(s).forEach(r=>{r[0]===r[0].toUpperCase()&&Us.set(r.toLowerCase(),s[r])});const i=Us.get(e.toLowerCase());return i?new i(t,n):null}m(()=>{m("[data-zui]").each(function(){const t=m(this).dataset(),n=t.zui;delete t.zui,tc(n,this,t)})});function Gr(e,t){const n=m(e)[0];if(!n)return!1;let{viewport:s}=t||{};const{left:i,top:r,width:o,height:a}=n.getBoundingClientRect();if(!s){const{innerHeight:g,innerWidth:y}=window,{clientHeight:w,clientWidth:v}=document.documentElement;s={left:0,top:0,width:y||v,height:g||w}}const{left:l,top:h,width:c,height:d}=s;if(t!=null&&t.fullyCheck)return i>=l&&r>=h&&i+o<=c&&r+a<=d;const u=i<=c&&i+o>=l;return r<=d&&r+a>=h&&u}m.fn.isVisible=function(e){return this.each((t,n)=>{Gr(n,e)})};function Yr(e,t,n=!1){const s=m(e);if(t!==void 0){if(t.length){const i=`zui-runjs-${m.guid++}`;s.append(`<script id="${i}">${t}<\/script>`),n&&s.find(`#${i}`).remove()}return}s.find("script").each((i,r)=>{Yr(s,r.innerHTML),r.remove()})}m.runJS=(e,...t)=>(e=e.trim(),e.startsWith("return ")||(e=`return ${e}`),new Function(...t.map(([s])=>s),e)(...t.map(([,s])=>s))),m.fn.runJS=function(e){return this.each((t,n)=>{Yr(n,e)})};function ec(e,t){const n=m(e),{ifNeeded:s=!0,...i}=t||{};return n.each((r,o)=>{s&&Gr(o,{viewport:o.getBoundingClientRect()})||o.scrollIntoView(i)}),n}m.fn.scrollIntoView=function(e){return this.each((t,n)=>{ec(n,e)})};const Du=Object.freeze(Object.defineProperty({__proto__:null,isVisible:Gr,runJS:Yr,scrollIntoView:ec},Symbol.toStringTag,{value:"Module"}));var qs,V,nc;b.isValidElement=void 0;var ke,sc,ic,Kr,Gs={},rc=[],Lu=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,jr=Array.isArray;function ae(e,t){for(var n in t)e[n]=t[n];return e}function oc(e){var t=e.parentNode;t&&t.removeChild(e)}function K(e,t,n){var s,i,r,o={};for(r in t)r=="key"?s=t[r]:r=="ref"?i=t[r]:o[r]=t[r];if(arguments.length>2&&(o.children=arguments.length>3?qs.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)o[r]===void 0&&(o[r]=e.defaultProps[r]);return Ys(e,o,s,i,null)}function Ys(e,t,n,s,i){var r={type:e,props:t,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++nc};return i==null&&V.vnode!=null&&V.vnode(r),r}function j(){return{current:null}}function Ke(e){return e.children}function F(e,t){this.props=e,this.context=t}function An(e,t){if(t==null)return e.__?An(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?An(e):null}function ac(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return ac(e)}}function lc(e){(!e.__d&&(e.__d=!0)&&ke.push(e)&&!Ks.__r++||sc!==V.debounceRendering)&&((sc=V.debounceRendering)||ic)(Ks)}function Ks(){var e,t,n,s,i,r,o,a;for(ke.sort(Kr);e=ke.shift();)e.__d&&(t=ke.length,s=void 0,i=void 0,o=(r=(n=e).__v).__e,(a=n.__P)&&(s=[],(i=ae({},r)).__v=r.__v+1,Xr(a,r,i,n.__n,a.ownerSVGElement!==void 0,r.__h!=null?[o]:null,s,o??An(r),r.__h),gc(s,r),r.__e!=o&&ac(r)),ke.length>t&&ke.sort(Kr));Ks.__r=0}function cc(e,t,n,s,i,r,o,a,l,h){var c,d,u,p,g,y,w,v=s&&s.__k||rc,_=v.length;for(n.__k=[],c=0;c<t.length;c++)if((p=n.__k[c]=(p=t[c])==null||typeof p=="boolean"||typeof p=="function"?null:typeof p=="string"||typeof p=="number"||typeof p=="bigint"?Ys(null,p,null,null,p):jr(p)?Ys(Ke,{children:p},null,null,null):p.__b>0?Ys(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):p)!=null){if(p.__=n,p.__b=n.__b+1,(u=v[c])===null||u&&p.key==u.key&&p.type===u.type)v[c]=void 0;else for(d=0;d<_;d++){if((u=v[d])&&p.key==u.key&&p.type===u.type){v[d]=void 0;break}u=null}Xr(e,p,u=u||Gs,i,r,o,a,l,h),g=p.__e,(d=p.ref)&&u.ref!=d&&(w||(w=[]),u.ref&&w.push(u.ref,null,p),w.push(d,p.__c||g,p)),g!=null?(y==null&&(y=g),typeof p.type=="function"&&p.__k===u.__k?p.__d=l=hc(p,l,e):l=dc(e,p,u,v,g,l),typeof n.type=="function"&&(n.__d=l)):l&&u.__e==l&&l.parentNode!=e&&(l=An(u))}for(n.__e=y,c=_;c--;)v[c]!=null&&(typeof n.type=="function"&&v[c].__e!=null&&v[c].__e==n.__d&&(n.__d=uc(s).nextSibling),vc(v[c],v[c]));if(w)for(c=0;c<w.length;c++)yc(w[c],w[++c],w[++c])}function hc(e,t,n){for(var s,i=e.__k,r=0;i&&r<i.length;r++)(s=i[r])&&(s.__=e,t=typeof s.type=="function"?hc(s,t,n):dc(n,s,s,i,s.__e,t));return t}function dc(e,t,n,s,i,r){var o,a,l;if(t.__d!==void 0)o=t.__d,t.__d=void 0;else if(n==null||i!=r||i.parentNode==null)t:if(r==null||r.parentNode!==e)e.appendChild(i),o=null;else{for(a=r,l=0;(a=a.nextSibling)&&l<s.length;l+=1)if(a==i)break t;e.insertBefore(i,r),o=r}return o!==void 0?o:i.nextSibling}function uc(e){var t,n,s;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(s=uc(n)))return s}return null}function Iu(e,t,n,s,i){var r;for(r in n)r==="children"||r==="key"||r in t||js(e,r,null,n[r],s);for(r in t)i&&typeof t[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||n[r]===t[r]||js(e,r,t[r],n[r],s)}function fc(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Lu.test(t)?n:n+"px"}function js(e,t,n,s,i){var r;t:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(t in s)n&&t in n||fc(e.style,t,"");if(n)for(t in n)s&&n[t]===s[t]||fc(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?s||e.addEventListener(t,r?mc:pc,r):e.removeEventListener(t,r?mc:pc,r);else if(t!=="dangerouslySetInnerHTML"){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function pc(e){return this.l[e.type+!1](V.event?V.event(e):e)}function mc(e){return this.l[e.type+!0](V.event?V.event(e):e)}function Xr(e,t,n,s,i,r,o,a,l){var h,c,d,u,p,g,y,w,v,_,C,N,x,E,A,D=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(l=n.__h,a=t.__e=n.__e,t.__h=null,r=[a]),(h=V.__b)&&h(t);try{t:if(typeof D=="function"){if(w=t.props,v=(h=D.contextType)&&s[h.__c],_=h?v?v.props.value:h.__:s,n.__c?y=(c=t.__c=n.__c).__=c.__E:("prototype"in D&&D.prototype.render?t.__c=c=new D(w,_):(t.__c=c=new F(w,_),c.constructor=D,c.render=Ou),v&&v.sub(c),c.props=w,c.state||(c.state={}),c.context=_,c.__n=s,d=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),D.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=ae({},c.__s)),ae(c.__s,D.getDerivedStateFromProps(w,c.__s))),u=c.props,p=c.state,c.__v=t,d)D.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(D.getDerivedStateFromProps==null&&w!==u&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(w,_),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(w,c.__s,_)===!1||t.__v===n.__v){for(t.__v!==n.__v&&(c.props=w,c.state=c.__s,c.__d=!1),c.__e=!1,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(B){B&&(B.__=t)}),C=0;C<c._sb.length;C++)c.__h.push(c._sb[C]);c._sb=[],c.__h.length&&o.push(c);break t}c.componentWillUpdate!=null&&c.componentWillUpdate(w,c.__s,_),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(u,p,g)})}if(c.context=_,c.props=w,c.__P=e,N=V.__r,x=0,"prototype"in D&&D.prototype.render){for(c.state=c.__s,c.__d=!1,N&&N(t),h=c.render(c.props,c.state,c.context),E=0;E<c._sb.length;E++)c.__h.push(c._sb[E]);c._sb=[]}else do c.__d=!1,N&&N(t),h=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++x<25);c.state=c.__s,c.getChildContext!=null&&(s=ae(ae({},s),c.getChildContext())),d||c.getSnapshotBeforeUpdate==null||(g=c.getSnapshotBeforeUpdate(u,p)),cc(e,jr(A=h!=null&&h.type===Ke&&h.key==null?h.props.children:h)?A:[A],t,n,s,i,r,o,a,l),c.base=t.__e,t.__h=null,c.__h.length&&o.push(c),y&&(c.__E=c.__=null),c.__e=!1}else r==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Wu(n.__e,t,n,s,i,r,o,l);(h=V.diffed)&&h(t)}catch(B){t.__v=null,(l||r!=null)&&(t.__e=a,t.__h=!!l,r[r.indexOf(a)]=null),V.__e(B,t,n)}}function gc(e,t){V.__c&&V.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(s){s.call(n)})}catch(s){V.__e(s,n.__v)}})}function Wu(e,t,n,s,i,r,o,a){var l,h,c,d=n.props,u=t.props,p=t.type,g=0;if(p==="svg"&&(i=!0),r!=null){for(;g<r.length;g++)if((l=r[g])&&"setAttribute"in l==!!p&&(p?l.localName===p:l.nodeType===3)){e=l,r[g]=null;break}}if(e==null){if(p===null)return document.createTextNode(u);e=i?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,u.is&&u),r=null,a=!1}if(p===null)d===u||a&&e.data===u||(e.data=u);else{if(r=r&&qs.call(e.childNodes),h=(d=n.props||Gs).dangerouslySetInnerHTML,c=u.dangerouslySetInnerHTML,!a){if(r!=null)for(d={},g=0;g<e.attributes.length;g++)d[e.attributes[g].name]=e.attributes[g].value;(c||h)&&(c&&(h&&c.__html==h.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(Iu(e,u,d,i,a),c)t.__k=[];else if(cc(e,jr(g=t.props.children)?g:[g],t,n,s,i&&p!=="foreignObject",r,o,r?r[0]:n.__k&&An(n,0),a),r!=null)for(g=r.length;g--;)r[g]!=null&&oc(r[g]);a||("value"in u&&(g=u.value)!==void 0&&(g!==e.value||p==="progress"&&!g||p==="option"&&g!==d.value)&&js(e,"value",g,d.value,!1),"checked"in u&&(g=u.checked)!==void 0&&g!==e.checked&&js(e,"checked",g,d.checked,!1))}return e}function yc(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(s){V.__e(s,n)}}function vc(e,t,n){var s,i;if(V.unmount&&V.unmount(e),(s=e.ref)&&(s.current&&s.current!==e.__e||yc(s,null,t)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(r){V.__e(r,t)}s.base=s.__P=null,e.__c=void 0}if(s=e.__k)for(i=0;i<s.length;i++)s[i]&&vc(s[i],t,n||typeof e.type!="function");n||e.__e==null||oc(e.__e),e.__=e.__e=e.__d=void 0}function Ou(e,t,n){return this.constructor(e,n)}function je(e,t,n){var s,i,r;V.__&&V.__(e,t),i=(s=typeof n=="function")?null:n&&n.__k||t.__k,r=[],Xr(t,e=(!s&&n||t).__k=K(Ke,null,[e]),i||Gs,Gs,t.ownerSVGElement!==void 0,!s&&n?[n]:i?null:t.firstChild?qs.call(t.childNodes):null,r,!s&&n?n:i?i.__e:t.firstChild,s),gc(r,e)}qs=rc.slice,V={__e:function(e,t,n,s){for(var i,r,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,s||{}),o=i.__d),o)return i.__E=i}catch(a){e=a}throw e}},nc=0,b.isValidElement=function(e){return e!=null&&e.constructor===void 0},F.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ae({},this.state),typeof e=="function"&&(e=e(ae({},n),this.props)),e&&ae(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),lc(this))},F.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),lc(this))},F.prototype.render=Ke,ke=[],ic=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Kr=function(e,t){return e.__v.__b-t.__v.__b},Ks.__r=0;var wc=function(e,t,n,s){var i;t[0]=0;for(var r=1;r<t.length;r++){var o=t[r++],a=t[r]?(t[0]|=o?1:2,n[t[r++]]):t[++r];o===3?s[0]=a:o===4?s[1]=Object.assign(s[1]||{},a):o===5?(s[1]=s[1]||{})[t[++r]]=a:o===6?s[1][t[++r]]+=a+"":o?(i=e.apply(a,wc(e,a,n,["",null])),s.push(i),a[0]?t[0]|=2:(t[r-2]=0,t[r]=i)):s.push(a)}return s},_c=new Map;function bc(e){var t=_c.get(this);return t||(t=new Map,_c.set(this,t)),(t=wc(this,t.get(e)||(t.set(e,t=function(n){for(var s,i,r=1,o="",a="",l=[0],h=function(u){r===1&&(u||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?l.push(0,u,o):r===3&&(u||o)?(l.push(3,u,o),r=2):r===2&&o==="..."&&u?l.push(4,u,0):r===2&&o&&!u?l.push(5,0,!0,o):r>=5&&((o||!u&&r===5)&&(l.push(r,0,o,i),r=6),u&&(l.push(r,u,0,i),r=6)),o=""},c=0;c<n.length;c++){c&&(r===1&&h(),h(c));for(var d=0;d<n[c].length;d++)s=n[c][d],r===1?s==="<"?(h(),l=[l],r=3):o+=s:r===4?o==="--"&&s===">"?(r=1,o=""):o=s+o[0]:a?s===a?a="":o+=s:s==='"'||s==="'"?a=s:s===">"?(h(),r=1):r&&(s==="="?(r=5,i=o,o=""):s==="/"&&(r<5||n[c][d+1]===">")?(h(),r===3&&(l=l[0]),r=l,(l=l[0]).push(2,0,r),r=0):s===" "||s==="	"||s===`
`||s==="\r"?(h(),r=2):o+=s),r===3&&o==="!--"&&(r=4,l=l[0])}return h(),l}(e)),t),arguments,[])).length>1?t:t[0]}const Hu=bc.bind(K);function Jr(e){const{tagName:t="div",className:n,style:s,children:i,attrs:r,forwardRef:o,...a}=e;return K(t,{ref:o,class:S(n),style:s,...a,...r},i)}var Bu=0;function f(e,t,n,s,i,r){var o,a,l={};for(a in t)a=="ref"?o=t[a]:l[a]=t[a];var h={type:e,props:l,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Bu,__source:i,__self:r};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return V.vnode&&V.vnode(h),h}class Xs extends F{constructor(){super(...arguments);L(this,gs,j())}componentDidMount(){this.props.executeScript&&m($(this,gs).current).runJS()}render(n){const{executeScript:s,html:i,...r}=n;return f(Jr,{forwardRef:$(this,gs),dangerouslySetInnerHTML:{__html:i},...r})}}gs=new WeakMap;function Cc(e){const{tag:t,className:n,style:s,renders:i,generateArgs:r=[],generatorThis:o,generators:a,onGenerate:l,onRenderItem:h,...c}=e,d=[n],u={...s},p=[],g=[];return i.forEach(y=>{const w=[];if(typeof y=="string"&&a&&a[y]&&(y=a[y]),typeof y=="function")if(l)w.push(...l.call(o,y,p,...r));else{const v=y.call(o,p,...r);v&&(Array.isArray(v)?w.push(...v):w.push(v))}else w.push(y);w.forEach(v=>{v!=null&&(typeof v=="object"&&!b.isValidElement(v)&&("html"in v||"__html"in v||"className"in v||"style"in v||"attrs"in v||"children"in v)?v.html?p.push(f("div",{className:S(v.className),style:v.style,dangerouslySetInnerHTML:{__html:v.html},...v.attrs??{}})):v.__html?g.push(v.__html):(v.style&&Object.assign(u,v.style),v.className&&d.push(v.className),v.children&&p.push(v.children),v.attrs&&Object.assign(c,v.attrs)):p.push(v))})}),g.length&&Object.assign(c,{dangerouslySetInnerHTML:{__html:g}}),[{className:S(d),style:u,...c},p]}function Js({tag:e="div",...t}){const[n,s]=Cc(t);return K(e,n,...s)}function Zr(e,t,n){return typeof e=="function"?e.call(t,...n):Array.isArray(e)?e.map(s=>Zr(s,t,n)):b.isValidElement(e)||e===null?e:typeof e=="object"?e.html?f(Xs,{...e}):f(Jr,{...e}):e}function Xe(e){const{content:t,generatorThis:n,generatorArgs:s}=e,i=Zr(t,n,s);return i==null||typeof i=="boolean"?null:b.isValidElement(i)?i:f(Ke,{children:i})}function st(e){const{icon:t,className:n,...s}=e;if(!t)return null;if(b.isValidElement(t))return t;const i=["icon",n];if(typeof t=="string")i.push(t.startsWith("icon-")?t:`icon-${t}`);else if(typeof t=="object"){const{className:r,...o}=t;i.push(r),Object.assign(s,o)}return f("i",{className:S(i),...s})}function zu(e){return this.getChildContext=()=>e.context,e.children}function Fu(e){const t=this,n=e._container;t.componentWillUnmount=function(){je(null,t._temp),t._temp=null,t._container=null},t._container&&t._container!==n&&t.componentWillUnmount(),e._vnode?(t._temp||(t._container=n,t._temp={nodeType:1,parentNode:n,childNodes:[],appendChild(s){this.childNodes.push(s),t._container.appendChild(s)},insertBefore(s,i){this.childNodes.push(s),t._container.appendChild(s)},removeChild(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),t._container.removeChild(s)}}),je(K(zu,{context:t.context},e._vnode),t._temp)):t._temp&&t.componentWillUnmount()}function $c(e,t){const n=K(Fu,{_vnode:e,_container:t});return n.containerInfo=t,n}var kc=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Je=(e,t,n)=>(kc(e,t,"read from private field"),n?n.call(e):t.get(e)),Zs=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ze=(e,t,n,s)=>(kc(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),xe,Pn,Qs,ti;const xc=class{constructor(e,t){Zs(this,xe,void 0),Zs(this,Pn,void 0),Zs(this,Qs,void 0),Zs(this,ti,!1);const{KEY:n,DATA_KEY:s,DEFAULT:i,MULTI_INSTANCE:r}=this.constructor,o=m(e);if(o.data(n)&&!r)throw new Error("[ZUI] The component has been initialized on element.");const a=m.guid++;if(Ze(this,Qs,a),Ze(this,Pn,o[0]),o.on("DOMNodeRemovedFromDocument",()=>{this.destroy()}),Ze(this,xe,{...i,...o.dataset()}),this.setOptions(t),this._key=this.options.key??`__${a}`,o.data(n,this).attr(s,`${a}`),r){const l=`${n}:ALL`;let h=o.data(l);h||(h=new Map,o.data(l,h)),h.set(this._key,this)}this.init(),requestAnimationFrame(()=>{Ze(this,ti,!0),this.emit("inited",this.options),this.afterInit()})}static get KEY(){return`zui.${this.NAME}`}static get NAMESPACE(){return`.${this.NAME}.zui`}static get DATA_KEY(){return`data-zui-${this.NAME}`}get inited(){return Je(this,ti)}get element(){return Je(this,Pn)}get key(){return this._key}get options(){return Je(this,xe)}get gid(){return Je(this,Qs)}get $element(){return m(this.element)}get $emitter(){return this.$element}init(){}afterInit(){}render(e){this.setOptions(e)}destroy(){const{KEY:e,DATA_KEY:t,MULTI_INSTANCE:n}=this.constructor,{$element:s}=this;if(this.emit("destroyed"),s.off(this.namespace).removeData(e).attr(t,null),n){const i=this.$element.data(`${e}:ALL`);if(i)if(i.delete(this._key),i.size===0)this.$element.removeData(`${e}:ALL`);else{const r=i.values().next().value;s.data(e,r).attr(t,r.gid)}}Ze(this,xe,void 0),Ze(this,Pn,void 0)}setOptions(e){return e&&m.extend(Je(this,xe),e),Je(this,xe)}emit(e,...t){const n=m.Event(e);return n.__src=this,this.$emitter.trigger(n,[this,...t]),n}on(e,t,n){const s=this;this.$element[n!=null&&n.once?"one":"on"](this._wrapEvent(e),function(i,r){(!i.__src||i.__src===s)&&t.call(this,i,r)})}one(e,t){this.on(e,t,{once:!0})}off(e){this.$element.off(this._wrapEvent(e))}i18n(e,t,n){return tt(this.options.i18n,e,t,n,this.options.lang,this.constructor.NAME)??tt(this.options.i18n,e,t,n,this.options.lang)??`{i18n:${e}}`}get namespace(){return`.${this._key}${this.constructor.NAMESPACE}`}_wrapEvent(e){return e.split(" ").map(t=>t.includes(".")?t:`${t}${this.namespace}`).join(" ")}static get(e,t){const n=m(e);if(this.MULTI_INSTANCE&&t!==void 0){const s=n.data(`${this.KEY}:ALL`);return s?s.get(t):void 0}return n.data(this.KEY)}static ensure(e,t){const n=this.get(e,t==null?void 0:t.key);return n?(t&&n.setOptions(t),n):new this(e,t)}static getAll(e){const{MULTI_INSTANCE:t,DATA_KEY:n}=this,s=[];return m(e||document).find(`[${n}]`).each((i,r)=>{if(t){const a=m(r).data(`${this.KEY}:ALL`);if(a){s.push(...a.values());return}}const o=m(r).data(this.KEY);o&&s.push(o)}),s}static query(e,t){return e===void 0?this.getAll().sort((n,s)=>n.gid-s.gid)[0]:this.get(m(e).closest(`[${this.DATA_KEY}]`),t)}static defineFn(e){m.fn.extend({[e||this.NAME.replace(/(^[A-Z]+)/,t=>t.toLowerCase())](t,...n){return this.each((s,i)=>{var o;const r=this.ensure(i,typeof t=="object"?t:void 0);typeof t=="string"&&((o=r[t])==null||o.call(r,...n))})}})}};let ct=xc;xe=new WeakMap,Pn=new WeakMap,Qs=new WeakMap,ti=new WeakMap,ct.DEFAULT={},ct.NAME=xc.name,ct.MULTI_INSTANCE=!1;class G extends ct{constructor(){super(...arguments),this.ref=j()}get $(){return this.ref.current}afterInit(){this.render()}destroy(){var t,n;(n=(t=this.$)==null?void 0:t.componentWillUnmount)==null||n.call(t),this.element&&(this.element.innerHTML=""),super.destroy()}render(t){je(K(this.constructor.Component,{ref:this.ref,...this.setOptions(t)}),this.element)}}const Hp="";function Vu({component:e="div",className:t,children:n,style:s,attrs:i}){return K(e,{className:S(t),style:s,...i},n)}function Sc({type:e,component:t="a",className:n,children:s,content:i,attrs:r,url:o,disabled:a,active:l,icon:h,text:c,target:d,trailingIcon:u,hint:p,checked:g,onClick:y,...w}){const v=[typeof g=="boolean"?f("div",{class:`checkbox-primary${g?" checked":""}`,children:f("label",{})}):null,f(st,{icon:h}),f("span",{className:"text",children:c}),f(Xe,{content:i}),s,f(st,{icon:u})];return K(t,{className:S(n,{disabled:a,active:l}),title:p,[t==="a"?"href":"data-url"]:o,[t==="a"?"target":"data-target"]:d,onClick:y,...w,...r},...v)}function Uu({component:e="div",className:t,text:n,attrs:s,children:i,content:r,style:o,onClick:a}){return K(e,{className:S(t),style:o,onClick:a,...s},n,f(Xe,{content:r}),i)}function qu({component:e="div",className:t,style:n,space:s,flex:i,attrs:r,onClick:o,children:a}){return K(e,{className:S(t),style:{width:s,height:s,flex:i,...n},onClick:o,...r},a)}function Gu({type:e,...t}){return f(Js,{...t})}function Mc({component:e="div",className:t,children:n,content:s,style:i,attrs:r}){return K(e,{className:S(t),style:i,...r},f(Xe,{content:s}),n)}const Qr=class extends F{constructor(){super(...arguments),this.ref=j()}get name(){return this.props.name??this.constructor.NAME}componentDidMount(){this.afterRender(!0)}componentDidUpdate(){this.afterRender(!1)}componentWillUnmount(){var e,t;(t=(e=this.props).beforeDestroy)==null||t.call(e,{menu:this})}afterRender(e){var t,n;(n=(t=this.props).afterRender)==null||n.call(t,{menu:this,firstRender:e})}handleItemClick(e,t,n,s){n&&n.call(s.target,s,e,t);const{onClickItem:i}=this.props;i&&i({menu:this,item:e,index:t,event:s})}beforeRender(){var n;const e={...this.props};typeof e.items=="function"&&(e.items=e.items(this)),e.items||(e.items=[]);const t=(n=e.beforeRender)==null?void 0:n.call(e,{menu:this,options:e});return t&&Object.assign(e,t),e}getItemRenderProps(e,t,n){const{commonItemProps:s,onClickItem:i,itemRenderProps:r}=e;let o={...t};return s&&Object.assign(o,s[t.type||"item"]),(i||t.onClick)&&(o.onClick=this.handleItemClick.bind(this,o,n,t.onClick)),o.className=S(o.className),r&&(o=r(o)),o}renderItem(e,t,n){if(!t)return null;const s=this.getItemRenderProps(e,t,n),{itemRender:i}=e;if(i){if(typeof i=="object"){const g=i[t.type||"item"];if(g)return f(g,{...s})}else if(typeof i=="function"){const g=i.call(this,s,K);if(b.isValidElement(g))return g;typeof g=="object"&&Object.assign(s,g)}}const{type:r="item",component:o,key:a=n,rootAttrs:l,rootClass:h,rootStyle:c,rootChildren:d,...u}=s;if(r==="html")return f("li",{className:S("action-menu-item",`${this.name}-html`,h,u.className),...l,style:c||u.style,dangerouslySetInnerHTML:{__html:u.html}},a);const p=!o||typeof o=="string"?this.constructor.ItemComponents&&this.constructor.ItemComponents[r]||Qr.ItemComponents[r]:o;return Object.assign(u,{type:r,component:typeof o=="string"?o:void 0}),e.checkbox&&r==="item"&&u.checked===void 0&&(u.checked=!!u.active),this.renderTypedItem(p,{className:S(h),children:d,style:c,key:a,...l},{...u,type:r,component:typeof o=="string"?o:void 0})}renderTypedItem(e,t,n){const{children:s,className:i,key:r,...o}=t;return f("li",{className:S(`${this.constructor.NAME}-item`,`${this.name}-${n.type}`,i),...o,children:[f(e,{...n}),typeof s=="function"?s():s]},r)}render(){const e=this.beforeRender(),{name:t,style:n,commonItemProps:s,className:i,items:r,children:o,itemRender:a,onClickItem:l,beforeRender:h,afterRender:c,beforeDestroy:d,...u}=e,p=this.constructor.ROOT_TAG;return f(p,{class:S(this.name,i),style:n,...u,ref:this.ref,children:[r&&r.map(this.renderItem.bind(this,e)),o]})}};let Se=Qr;Se.ItemComponents={divider:Vu,item:Sc,heading:Uu,space:qu,custom:Gu,basic:Mc},Se.ROOT_TAG="menu",Se.NAME="action-menu";class to extends G{}to.NAME="ActionMenu",to.Component=Se;function Yu({items:e,show:t,level:n,...s}){return f(Sc,{...s})}var Tc=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},bt=(e,t,n)=>(Tc(e,t,"read from private field"),n?n.call(e):t.get(e)),eo=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ku=(e,t,n,s)=>(Tc(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),ei,Ft,Dn;let ni=class extends Se{constructor(t){super(t),eo(this,ei,new Set),eo(this,Ft,void 0),eo(this,Dn,(n,s,i)=>{m(i.target).closest(".not-nested-toggle").length||(this.toggle(n,s),i.preventDefault())}),Ku(this,Ft,t.nestedShow===void 0),bt(this,Ft)&&(this.state={nestedShow:t.defaultNestedShow??{}})}get nestedTrigger(){return this.props.nestedTrigger}beforeRender(){const t=super.beforeRender(),{nestedShow:n,nestedTrigger:s,defaultNestedShow:i,controlledMenu:r,indent:o,...a}=t;return typeof a.items=="function"&&(a.items=a.items(this)),a.items||(a.items=[]),a.items.some(l=>l.items)||(a.className=S(a.className,"no-nested-items")),!r&&o&&(a.style=Object.assign({[`--${this.name}-indent`]:`${o}px`},a.style)),a}getNestedMenuProps(t){const{name:n,controlledMenu:s,nestedShow:i,beforeDestroy:r,beforeRender:o,itemRender:a,onClickItem:l,afterRender:h,commonItemProps:c,level:d,itemRenderProps:u}=this.props;return{items:t,name:n,nestedShow:bt(this,Ft)?this.state.nestedShow:i,nestedTrigger:this.nestedTrigger,controlledMenu:s||this,commonItemProps:c,onClickItem:l,afterRender:h,beforeRender:o,beforeDestroy:r,itemRender:a,itemRenderProps:u,level:(d||0)+1}}renderNestedMenu(t){let{items:n}=t;if(!n||(typeof n=="function"&&(n=n(t,this)),!n.length))return;const s=this.constructor,i=this.getNestedMenuProps(n);return f(s,{...i,"data-level":i.level})}isNestedItem(t){return(!t.type||t.type==="item")&&!!t.items}renderToggleIcon(t,n){}getItemRenderProps(t,n,s){const i=super.getItemRenderProps(t,n,s);if(i.level=t.level||0,!this.isNestedItem(i))return i;const r=i.key??i.id??`${t.level||0}:${s}`;bt(this,ei).add(r);const o=this.isExpanded(r);if(o&&(i.rootChildren=[i.rootChildren,this.renderNestedMenu(n)]),this.nestedTrigger==="hover")i.rootAttrs={...i.rootAttrs,onMouseEnter:bt(this,Dn).bind(this,r,!0),onMouseLeave:bt(this,Dn).bind(this,r,!1)};else if(this.nestedTrigger==="click"){const{onClick:l}=i;i.onClick=h=>{bt(this,Dn).call(this,r,void 0,h),l==null||l(h)}}const a=this.renderToggleIcon(o,i);return a&&(i.children=[i.children,a]),i.show=o,i.rootClass=[i.rootClass,"has-nested-menu",o?"show":""],i}isExpanded(t){const n=bt(this,Ft)?this.state.nestedShow:this.props.nestedShow;return n&&typeof n=="object"?n[t]:!!n}toggle(t,n){const{controlledMenu:s}=this.props;if(s)return s.toggle(t,n);if(!bt(this,Ft))return!1;let{nestedShow:i={}}=this.state;if(typeof i=="boolean"&&(i===!0?i=[...bt(this,ei).values()].reduce((r,o)=>(r[o]=!0,r),{}):i={}),n===void 0)n=!i[t];else if(!!i[t]==!!n)return!1;return n?i[t]=n:delete i[t],this.setState({nestedShow:{...i}}),!0}expand(t){return this.toggle(t,!0)}collapse(t){return this.toggle(t,!1)}expandAll(){bt(this,Ft)&&this.setState({nestedShow:!0})}collapseAll(){bt(this,Ft)&&this.setState({nestedShow:!1})}};ei=new WeakMap,Ft=new WeakMap,Dn=new WeakMap,ni.ItemComponents={item:Yu};class no extends G{}no.NAME="ActionMenuNested",no.Component=ni;const Bp="",zp="",Fp="",Vp="",Up="",qp="",Gp="",Yp="",Kp="",jp="",Xp="",Jp="",Zp="";let le=class extends ni{get nestedTrigger(){return this.props.nestedTrigger||"click"}get menuName(){return"menu-nested"}beforeRender(){const t=super.beforeRender();let{hasIcons:n}=t;return n===void 0&&(n=t.items.some(s=>s.icon)),t.className=S(t.className,this.menuName,{"has-icons":n,"has-nested-items":t.items.some(s=>this.isNestedItem(s)),popup:t.popup}),t}renderToggleIcon(t){return f("span",{class:`${this.name}-toggle-icon caret-${t?"down":"right"}`})}};le.NAME="menu";class so extends G{}so.NAME="Menu",so.Component=le;const Qp="";class rt extends F{render(){const{component:t,type:n,btnType:s,size:i,className:r,children:o,url:a,target:l,disabled:h,active:c,loading:d,loadingIcon:u,loadingText:p,icon:g,text:y,trailingIcon:w,caret:v,square:_,rounded:C=!0,hint:N,...x}=this.props,E=t||(a?"a":"button"),A=y==null||typeof y=="string"&&!y.length||d&&!p,D=v&&A&&!g&&!w&&!o&&!d;return K(E,{className:S("btn",n,r,{"btn-caret":D,disabled:h||d,active:c,loading:d,square:_===void 0?!D&&!o&&A:_},i?`size-${i}`:"",typeof C=="string"?C:{rounded:C}),title:N,[E==="a"?"href":"data-url"]:a,[E==="a"?"target":"data-target"]:l,type:E==="button"?s:void 0,...x},d?f(st,{icon:u||"icon-spinner-snake",className:"spin"}):f(st,{icon:g}),A?null:f("span",{className:"text",children:d?p:y}),d?null:o,d?null:f(st,{icon:w}),d?null:v?f("span",{className:typeof v=="string"?`caret-${v}`:"caret"}):null)}}const tm="",em="";function ju({key:e,type:t,btnType:n,...s}){return f(rt,{type:n,...s})}const nm="";function Ln(e){return e.split("-")[1]}function io(e){return e==="y"?"height":"width"}function Me(e){return e.split("-")[0]}function In(e){return["top","bottom"].includes(Me(e))?"x":"y"}function Ec(e,t,n){let{reference:s,floating:i}=e;const r=s.x+s.width/2-i.width/2,o=s.y+s.height/2-i.height/2,a=In(t),l=io(a),h=s[l]/2-i[l]/2,c=a==="x";let d;switch(Me(t)){case"top":d={x:r,y:s.y-i.height};break;case"bottom":d={x:r,y:s.y+s.height};break;case"right":d={x:s.x+s.width,y:o};break;case"left":d={x:s.x-i.width,y:o};break;default:d={x:s.x,y:s.y}}switch(Ln(t)){case"start":d[a]-=h*(n&&c?-1:1);break;case"end":d[a]+=h*(n&&c?-1:1)}return d}const Xu=async(e,t,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:r=[],platform:o}=n,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=Ec(h,s,l),u=s,p={},g=0;for(let y=0;y<a.length;y++){const{name:w,fn:v}=a[y],{x:_,y:C,data:N,reset:x}=await v({x:c,y:d,initialPlacement:s,placement:u,strategy:i,middlewareData:p,rects:h,platform:o,elements:{reference:e,floating:t}});c=_??c,d=C??d,p={...p,[w]:{...p[w],...N}},x&&g<=50&&(g++,typeof x=="object"&&(x.placement&&(u=x.placement),x.rects&&(h=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:c,y:d}=Ec(h,u,l)),y=-1)}return{x:c,y:d,placement:u,strategy:i,middlewareData:p}};function Wn(e,t){return typeof e=="function"?e(t):e}function Nc(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function si(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function Rc(e,t){var n;t===void 0&&(t={});const{x:s,y:i,platform:r,rects:o,elements:a,strategy:l}=e,{boundary:h="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:u=!1,padding:p=0}=Wn(t,e),g=Nc(p),y=a[u?d==="floating"?"reference":"floating":d],w=si(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(y)))==null||n?y:y.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:h,rootBoundary:c,strategy:l})),v=d==="floating"?{...o.floating,x:s,y:i}:o.reference,_=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),C=await(r.isElement==null?void 0:r.isElement(_))&&await(r.getScale==null?void 0:r.getScale(_))||{x:1,y:1},N=si(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:_,strategy:l}):v);return{top:(w.top-N.top+g.top)/C.y,bottom:(N.bottom-w.bottom+g.bottom)/C.y,left:(w.left-N.left+g.left)/C.x,right:(N.right-w.right+g.right)/C.x}}const ro=Math.min,Ju=Math.max;function oo(e,t,n){return Ju(e,ro(t,n))}const ao=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:i,rects:r,platform:o,elements:a}=t,{element:l,padding:h=0}=Wn(e,t)||{};if(l==null)return{};const c=Nc(h),d={x:n,y:s},u=In(i),p=io(u),g=await o.getDimensions(l),y=u==="y",w=y?"top":"left",v=y?"bottom":"right",_=y?"clientHeight":"clientWidth",C=r.reference[p]+r.reference[u]-d[u]-r.floating[p],N=d[u]-r.reference[u],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let E=x?x[_]:0;E&&await(o.isElement==null?void 0:o.isElement(x))||(E=a.floating[_]||r.floating[p]);const A=C/2-N/2,D=E/2-g[p]/2-1,B=ro(c[w],D),M=ro(c[v],D),P=B,I=E-g[p]-M,T=E/2-g[p]/2+A,W=oo(P,T,I),O=Ln(i)!=null&&T!=W&&r.reference[p]/2-(T<P?B:M)-g[p]/2<0?T<P?P-T:I-T:0;return{[u]:d[u]-O,data:{[u]:W,centerOffset:T-W+O}}}});["top","right","bottom","left"].reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const Zu={left:"right",right:"left",bottom:"top",top:"bottom"};function ii(e){return e.replace(/left|right|bottom|top/g,t=>Zu[t])}function Qu(e,t,n){n===void 0&&(n=!1);const s=Ln(e),i=In(e),r=io(i);let o=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=ii(o)),{main:o,cross:ii(o)}}const tf={start:"end",end:"start"};function lo(e){return e.replace(/start|end/g,t=>tf[t])}const ri=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:s,middlewareData:i,rects:r,initialPlacement:o,platform:a,elements:l}=t,{mainAxis:h=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...y}=Wn(e,t),w=Me(s),v=Me(o)===o,_=await(a.isRTL==null?void 0:a.isRTL(l.floating)),C=d||(v||!g?[ii(o)]:function(P){const I=ii(P);return[lo(P),I,lo(I)]}(o));d||p==="none"||C.push(...function(P,I,T,W){const O=Ln(P);let q=function(ft,Ls,kr){const Is=["left","right"],xr=["right","left"],bl=["top","bottom"],Wp=["bottom","top"];switch(ft){case"top":case"bottom":return kr?Ls?xr:Is:Ls?Is:xr;case"left":case"right":return Ls?bl:Wp;default:return[]}}(Me(P),T==="start",W);return O&&(q=q.map(ft=>ft+"-"+O),I&&(q=q.concat(q.map(lo)))),q}(o,g,p,_));const N=[o,...C],x=await Rc(t,y),E=[];let A=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&E.push(x[w]),c){const{main:P,cross:I}=Qu(s,r,_);E.push(x[P],x[I])}if(A=[...A,{placement:s,overflows:E}],!E.every(P=>P<=0)){var D,B;const P=(((D=i.flip)==null?void 0:D.index)||0)+1,I=N[P];if(I)return{data:{index:P,overflows:A},reset:{placement:I}};let T=(B=A.filter(W=>W.overflows[0]<=0).sort((W,O)=>W.overflows[1]-O.overflows[1])[0])==null?void 0:B.placement;if(!T)switch(u){case"bestFit":{var M;const W=(M=A.map(O=>[O.placement,O.overflows.filter(q=>q>0).reduce((q,ft)=>q+ft,0)]).sort((O,q)=>O[1]-q[1])[0])==null?void 0:M[0];W&&(T=W);break}case"initialPlacement":T=o}if(s!==T)return{reset:{placement:T}}}return{}}}},oi=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:s}=t,i=await async function(r,o){const{placement:a,platform:l,elements:h}=r,c=await(l.isRTL==null?void 0:l.isRTL(h.floating)),d=Me(a),u=Ln(a),p=In(a)==="x",g=["left","top"].includes(d)?-1:1,y=c&&p?-1:1,w=Wn(o,r);let{mainAxis:v,crossAxis:_,alignmentAxis:C}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...w};return u&&typeof C=="number"&&(_=u==="end"?-1*C:C),p?{x:_*y,y:v*g}:{x:v*g,y:_*y}}(t,e);return{x:n+i.x,y:s+i.y,data:i}}}};function ef(e){return e==="x"?"y":"x"}const ai=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:i}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y:_}=w;return{x:v,y:_}}},...l}=Wn(e,t),h={x:n,y:s},c=await Rc(t,l),d=In(Me(i)),u=ef(d);let p=h[d],g=h[u];if(r){const w=d==="y"?"bottom":"right";p=oo(p+c[d==="y"?"top":"left"],p,p-c[w])}if(o){const w=u==="y"?"bottom":"right";g=oo(g+c[u==="y"?"top":"left"],g,g-c[w])}const y=a.fn({...t,[d]:p,[u]:g});return{...y,data:{x:y.x-n,y:y.y-s}}}}};function pt(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ct(e){return pt(e).getComputedStyle(e)}function Ac(e){return e instanceof pt(e).Node}function ce(e){return Ac(e)?(e.nodeName||"").toLowerCase():"#document"}function $t(e){return e instanceof pt(e).HTMLElement}function Vt(e){return e instanceof pt(e).Element}function Pc(e){return typeof ShadowRoot<"u"&&(e instanceof pt(e).ShadowRoot||e instanceof ShadowRoot)}function On(e){const{overflow:t,overflowX:n,overflowY:s,display:i}=Ct(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(i)}function nf(e){return["table","td","th"].includes(ce(e))}function co(e){const t=ho(),n=Ct(e);return n.transform!=="none"||n.perspective!=="none"||!!n.containerType&&n.containerType!=="normal"||!t&&!!n.backdropFilter&&n.backdropFilter!=="none"||!t&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function ho(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function li(e){return["html","body","#document"].includes(ce(e))}const uo=Math.min,Qe=Math.max,ci=Math.round,hi=Math.floor,Te=e=>({x:e,y:e});function Dc(e){const t=Ct(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const i=$t(e),r=i?e.offsetWidth:n,o=i?e.offsetHeight:s,a=ci(n)!==r||ci(s)!==o;return a&&(n=r,s=o),{width:n,height:s,$:a}}function fo(e){return Vt(e)?e:e.contextElement}function tn(e){const t=fo(e);if(!$t(t))return Te(1);const n=t.getBoundingClientRect(),{width:s,height:i,$:r}=Dc(t);let o=(r?ci(n.width):n.width)/s,a=(r?ci(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const Lc=Te(0);function Ic(e,t,n){var s,i;if(t===void 0&&(t=!0),!ho())return Lc;const r=e?pt(e):window;return!n||t&&n!==r?Lc:{x:((s=r.visualViewport)==null?void 0:s.offsetLeft)||0,y:((i=r.visualViewport)==null?void 0:i.offsetTop)||0}}function Ee(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=fo(e);let o=Te(1);t&&(s?Vt(s)&&(o=tn(s)):o=tn(e));const a=Ic(r,n,s);let l=(i.left+a.x)/o.x,h=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(r){const u=pt(r),p=s&&Vt(s)?pt(s):s;let g=u.frameElement;for(;g&&s&&p!==u;){const y=tn(g),w=g.getBoundingClientRect(),v=getComputedStyle(g),_=w.left+(g.clientLeft+parseFloat(v.paddingLeft))*y.x,C=w.top+(g.clientTop+parseFloat(v.paddingTop))*y.y;l*=y.x,h*=y.y,c*=y.x,d*=y.y,l+=_,h+=C,g=pt(g).frameElement}}return si({width:c,height:d,x:l,y:h})}function Ut(e){return((Ac(e)?e.ownerDocument:e.document)||window.document).documentElement}function di(e){return Vt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Wc(e){return Ee(Ut(e)).left+di(e).scrollLeft}function en(e){if(ce(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Pc(e)&&e.host||Ut(e);return Pc(t)?t.host:t}function Oc(e){const t=en(e);return li(t)?e.ownerDocument?e.ownerDocument.body:e.body:$t(t)&&On(t)?t:Oc(t)}function ui(e,t){var n;t===void 0&&(t=[]);const s=Oc(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),r=pt(s);return i?t.concat(r,r.visualViewport||[],On(s)?s:[]):t.concat(s,ui(s))}function Hc(e,t,n){let s;if(t==="viewport")s=function(i,r){const o=pt(i),a=Ut(i),l=o.visualViewport;let h=a.clientWidth,c=a.clientHeight,d=0,u=0;if(l){h=l.width,c=l.height;const p=ho();(!p||p&&r==="fixed")&&(d=l.offsetLeft,u=l.offsetTop)}return{width:h,height:c,x:d,y:u}}(e,n);else if(t==="document")s=function(i){const r=Ut(i),o=di(i),a=i.ownerDocument.body,l=Qe(r.scrollWidth,r.clientWidth,a.scrollWidth,a.clientWidth),h=Qe(r.scrollHeight,r.clientHeight,a.scrollHeight,a.clientHeight);let c=-o.scrollLeft+Wc(i);const d=-o.scrollTop;return Ct(a).direction==="rtl"&&(c+=Qe(r.clientWidth,a.clientWidth)-l),{width:l,height:h,x:c,y:d}}(Ut(e));else if(Vt(t))s=function(i,r){const o=Ee(i,!0,r==="fixed"),a=o.top+i.clientTop,l=o.left+i.clientLeft,h=$t(i)?tn(i):Te(1);return{width:i.clientWidth*h.x,height:i.clientHeight*h.y,x:l*h.x,y:a*h.y}}(t,n);else{const i=Ic(e);s={...t,x:t.x-i.x,y:t.y-i.y}}return si(s)}function Bc(e,t){const n=en(e);return!(n===t||!Vt(n)||li(n))&&(Ct(n).position==="fixed"||Bc(n,t))}function zc(e,t){return $t(e)&&Ct(e).position!=="fixed"?t?t(e):e.offsetParent:null}function Fc(e,t){const n=pt(e);if(!$t(e))return n;let s=zc(e,t);for(;s&&nf(s)&&Ct(s).position==="static";)s=zc(s,t);return s&&(ce(s)==="html"||ce(s)==="body"&&Ct(s).position==="static"&&!co(s))?n:s||function(i){let r=en(i);for(;$t(r)&&!li(r);){if(co(r))return r;r=en(r)}return null}(e)||n}function sf(e,t,n){const s=$t(t),i=Ut(t),r=n==="fixed",o=Ee(e,!0,r,t);let a={scrollLeft:0,scrollTop:0};const l=Te(0);if(s||!s&&!r)if((ce(t)!=="body"||On(i))&&(a=di(t)),$t(t)){const h=Ee(t,!0,r,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&(l.x=Wc(i));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}const rf={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:s,strategy:i}=e;const r=n==="clippingAncestors"?function(h,c){const d=c.get(h);if(d)return d;let u=ui(h).filter(w=>Vt(w)&&ce(w)!=="body"),p=null;const g=Ct(h).position==="fixed";let y=g?en(h):h;for(;Vt(y)&&!li(y);){const w=Ct(y),v=co(y);v||w.position!=="fixed"||(p=null),(g?!v&&!p:!v&&w.position==="static"&&p&&["absolute","fixed"].includes(p.position)||On(y)&&!v&&Bc(h,y))?u=u.filter(_=>_!==y):p=w,y=en(y)}return c.set(h,u),u}(t,this._c):[].concat(n),o=[...r,s],a=o[0],l=o.reduce((h,c)=>{const d=Hc(t,c,i);return h.top=Qe(d.top,h.top),h.right=uo(d.right,h.right),h.bottom=uo(d.bottom,h.bottom),h.left=Qe(d.left,h.left),h},Hc(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:s}=e;const i=$t(n),r=Ut(n);if(n===r)return t;let o={scrollLeft:0,scrollTop:0},a=Te(1);const l=Te(0);if((i||!i&&s!=="fixed")&&((ce(n)!=="body"||On(r))&&(o=di(n)),$t(n))){const h=Ee(n);a=tn(n),l.x=h.x+n.clientLeft,l.y=h.y+n.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-o.scrollLeft*a.x+l.x,y:t.y*a.y-o.scrollTop*a.y+l.y}},isElement:Vt,getDimensions:function(e){return Dc(e)},getOffsetParent:Fc,getDocumentElement:Ut,getScale:tn,async getElementRects(e){let{reference:t,floating:n,strategy:s}=e;const i=this.getOffsetParent||Fc,r=this.getDimensions;return{reference:sf(t,await i(n),s),floating:{x:0,y:0,...await r(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Ct(e).direction==="rtl"};function po(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,h=fo(e),c=i||r?[...h?ui(h):[],...ui(t)]:[];c.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),r&&w.addEventListener("resize",n)});const d=h&&a?function(w,v){let _,C=null;const N=Ut(w);function x(){clearTimeout(_),C&&C.disconnect(),C=null}return function E(A,D){A===void 0&&(A=!1),D===void 0&&(D=1),x();const{left:B,top:M,width:P,height:I}=w.getBoundingClientRect();if(A||v(),!P||!I)return;const T={rootMargin:-hi(M)+"px "+-hi(N.clientWidth-(B+P))+"px "+-hi(N.clientHeight-(M+I))+"px "+-hi(B)+"px",threshold:Qe(0,uo(1,D))||1};let W=!0;function O(q){const ft=q[0].intersectionRatio;if(ft!==D){if(!W)return E();ft?E(!1,ft):_=setTimeout(()=>{E(!1,1e-7)},100)}W=!1}try{C=new IntersectionObserver(O,{...T,root:N.ownerDocument})}catch{C=new IntersectionObserver(O,T)}C.observe(w)}(!0),x}(h,n):null;let u,p=-1,g=null;o&&(g=new ResizeObserver(w=>{let[v]=w;v&&v.target===h&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{g&&g.observe(t)})),n()}),h&&!l&&g.observe(h),g.observe(t));let y=l?Ee(e):null;return l&&function w(){const v=Ee(e);!y||v.x===y.x&&v.y===y.y&&v.width===y.width&&v.height===y.height||n(),y=v,u=requestAnimationFrame(w)}(),n(),()=>{c.forEach(w=>{i&&w.removeEventListener("scroll",n),r&&w.removeEventListener("resize",n)}),d&&d(),g&&g.disconnect(),g=null,l&&cancelAnimationFrame(u)}}const fi=(e,t,n)=>{const s=new Map,i={platform:rf,...n},r={...i.platform,_c:s};return Xu(e,t,{...i,platform:r})},im="",rm="",om="";var Vc=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Uc=(e,t,n)=>(Vc(e,t,"read from private field"),n?n.call(e):t.get(e)),of=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},af=(e,t,n,s)=>(Vc(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Hn;let qc=class extends le{constructor(){super(...arguments),of(this,Hn,0)}get nestedTrigger(){return this.props.nestedTrigger||"hover"}get name(){return"menu"}get menuName(){return"menu-context"}layout(){const t=this.ref.current,n=t==null?void 0:t.parentElement;!t||!n||fi(n,t,{placement:"right-start",middleware:[ri(),ai(),oi(1)]}).then(({x:s,y:i})=>{m(t).css({left:s,top:i})})}getNestedMenuProps(t){const n=super.getNestedMenuProps(t);return{...n,className:S("absolute",n.className),popup:!0}}afterRender(t){super.afterRender(t),this.props.controlledMenu&&(this.layout(),af(this,Hn,window.setTimeout(this.layout.bind(this),100)))}renderToggleIcon(){return f("span",{class:"contextmenu-toggle-icon caret-right"})}componentWillUnmount(){super.componentWillUnmount(),Uc(this,Hn)&&clearTimeout(Uc(this,Hn))}};Hn=new WeakMap,qc.defaultProps={...le.defaultProps,popup:!0};var mo=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},qt=(e,t,n)=>(mo(e,t,"read from private field"),n?n.call(e):t.get(e)),nn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},pi=(e,t,n,s)=>(mo(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Gc=(e,t,n)=>(mo(e,t,"access private method"),n),he,Bn,mi,gi,go,Yc,yo,Kc;const vo="show",lf='[data-toggle="contextmenu"]';class ot extends ct{constructor(){super(...arguments),nn(this,go),nn(this,yo),nn(this,he,void 0),nn(this,Bn,void 0),nn(this,mi,void 0),nn(this,gi,void 0)}get isShown(){return qt(this,he)&&m(qt(this,he)).hasClass(vo)}get menu(){return qt(this,he)||this.ensureMenu()}get trigger(){return qt(this,mi)||this.element}get isDynamic(){return this.options.items||this.options.menu}init(){const{$element:t}=this;!t.is("body")&&!t.attr("data-toggle")&&t.attr("data-toggle",this.constructor.NAME.toLowerCase())}afterInit(){super.afterInit(),this.on("hidden",()=>{this.options.destoryOnHide&&this.isDynamic&&this.destroy()})}show(t){return this.isShown||(pi(this,mi,t),this.emit("show",this.trigger).defaultPrevented)||this.isDynamic&&!this.renderMenu()?!1:(m(this.menu).addClass(vo),this.createPopper(),this.emit("shown"),!0)}hide(){var t;return!this.isShown||((t=qt(this,gi))==null||t.call(this),this.emit("hide").defaultPrevented)?!1:(m(qt(this,he)).removeClass(vo),this.emit("hidden"),!0)}toggle(t){return this.isShown?this.hide():this.show(t)}destroy(){var t;super.destroy(),this.hide(),(t=qt(this,he))==null||t.remove()}ensureMenu(){const{$element:t}=this,n=this.constructor.MENU_CLASS;let s;if(this.isDynamic)s=m(`<div class="${n}" />`).appendTo("body");else if(t.length){const i=t.attr("href")||t.dataset("target")||"";if(i[0]==="#"&&(s=m(document).find(i)),!(s!=null&&s.length)){const r=t.next();r.hasClass(n)?s=r:s=t.parent().find(`.${n}`)}s&&s.addClass("popup")}if(!(s!=null&&s.length))throw new Error("[ZUI] ContextMenu: Cannot find menu element.");return s.css({width:"max-content",position:this.options.strategy,top:0,left:0}),pi(this,he,s[0]),s[0]}getPopperOptions(){var i;const{placement:t,strategy:n}=this.options,s={middleware:[],placement:t,strategy:n};return this.options.flip&&((i=s.middleware)==null||i.push(ri())),s}createPopper(){const t=this.getPopperOptions(),n=this.getPopperElement(),s=this.menu;pi(this,gi,po(n,s,()=>{fi(n,s,t).then(({x:i,y:r,middlewareData:o,placement:a})=>{if(m(s).css({left:i,top:r}),o.arrow&&this.arrowEl){const l=a.split("-")[0],h=Gc(this,go,Yc).call(this,l),{x:c,y:d}=o.arrow;m(this.arrowEl).css({left:c!=null?`${c}px`:"",top:d!=null?`${d}px`:"",[h]:`${-this.arrowEl.offsetWidth/2}px`,background:"inherit",border:"inherit",...Gc(this,yo,Kc).call(this,l)})}})}))}getMenuOptions(){const{menu:t,items:n}=this.options;let s=n||(t==null?void 0:t.items);if(s)return typeof s=="function"&&(s=s(this)),{nestedTrigger:"hover",...t,items:s}}renderMenu(){const t=this.getMenuOptions();return!t||this.emit("updateMenu",t,this.trigger).defaultPrevented?!1:(je(K(qc,t),this.menu),!0)}getPopperElement(){return qt(this,Bn)||pi(this,Bn,{getBoundingClientRect:()=>{const{trigger:t}=this;if(t instanceof MouseEvent){const{clientX:n,clientY:s}=t;return{width:0,height:0,top:s,right:n,bottom:s,left:n}}return t instanceof HTMLElement?t.getBoundingClientRect():t},contextElement:this.element}),qt(this,Bn)}static clear(t){var a,l;t instanceof Event&&(t={event:t});const{event:n,exclude:s,ignoreSelector:i=".not-hide-menu"}=t||{};if(n&&i&&((l=(a=n.target).closest)!=null&&l.call(a,i))||n&&n.button===2)return;const r=this.getAll(),o=new Set(s||[]);for(const h of r)o.has(h.element)||h.hide()}static show(t){const{event:n,...s}=t,i=this.ensure(document.body);return i.setOptions(s),i.show(n),n instanceof Event&&n.stopPropagation(),i}static hide(t){const n=this.query(t);return n==null||n.hide(),n}}he=new WeakMap,Bn=new WeakMap,mi=new WeakMap,gi=new WeakMap,go=new WeakSet,Yc=function(e){return{top:"bottom",right:"left",bottom:"top",left:"right"}[e]},yo=new WeakSet,Kc=function(e){const t={bottom:"Right",top:"Left",left:"Bottom",right:"Top"};return{[`border${e[0].toUpperCase()}${e.substring(1)}Style`]:"none",[`border${t[e]}Style`]:"none"}},ot.MENU_CLASS="contextmenu",ot.NAME="ContextMenu",ot.MULTI_INSTANCE=!0,ot.DEFAULT={placement:"bottom-start",strategy:"absolute",flip:!0,preventOverflow:!0,destoryOnHide:!0},m(document).on(`contextmenu${ot.NAMESPACE}`,e=>{const t=m(e.target);if(t.closest(`.${ot.MENU_CLASS}`).length)return;const n=t.closest(lf).not(":disabled,.disabled");if(n.length){const s=`${ot.KEY}:options`,i=n.data(s),r=ot.ensure(n,i);i||n.data(s,r.options),r.show(e),e.preventDefault()}}).on(`click${ot.NAMESPACE}`,ot.clear.bind(ot));const am="";var wo=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},zn=(e,t,n)=>(wo(e,t,"read from private field"),n?n.call(e):t.get(e)),yi=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},_o=(e,t,n,s)=>(wo(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),cf=(e,t,n)=>(wo(e,t,"access private method"),n),Fn,Vn,vi,bo,jc;const Xc='[data-toggle="dropdown"]',Jc=class extends ot{constructor(){super(...arguments),yi(this,bo),yi(this,Fn,!1),yi(this,Vn,0),this.hideLater=()=>{zn(this,vi).call(this),_o(this,Vn,window.setTimeout(this.hide.bind(this),100))},yi(this,vi,()=>{clearTimeout(zn(this,Vn)),_o(this,Vn,0)})}get isHover(){return this.options.trigger==="hover"}get elementShowClass(){return`with-${this.constructor.NAME}-show`}show(e,t){(t==null?void 0:t.clearOthers)!==!1&&Jc.clear({event:t==null?void 0:t.event,exclude:[this.element]});const n=super.show(e);return n&&(!zn(this,Fn)&&this.isHover&&cf(this,bo,jc).call(this),this.$element.addClass(this.elementShowClass)),n}hide(){const e=super.hide();return e&&this.$element.removeClass(this.elementShowClass),e}toggle(e,t){return this.isShown?this.hide():this.show(e,{event:e,...t})}destroy(){zn(this,Fn)&&m(this.menu).off(this.constructor.NAMESPACE),super.destroy()}getArrowSize(){const{arrow:e}=this.options;return e?typeof e=="number"?e:8:0}getPopperOptions(){var n,s;const e=super.getPopperOptions(),t=this.getArrowSize();return t&&this.arrowEl&&((n=e.middleware)==null||n.push(oi(t)),(s=e.middleware)==null||s.push(ao({element:this.arrowEl}))),e}ensureMenu(){const e=super.ensureMenu();if(this.options.arrow){const t=this.getArrowSize(),n=m('<div class="arrow-el" />').css({position:"absolute",width:`${t}px`,height:`${t}px`,transform:"rotate(45deg)"});this.arrowEl=n[0]}return e}getMenuOptions(){const e=super.getMenuOptions();if(e&&this.options.arrow){const{afterRender:t}=e;e.afterRender=(...n)=>{this.arrowEl&&m(this.menu).find(".menu").each((s,i)=>{m(i).find(".arrow-el").length===0&&m(i).parent().hasClass("dropdown-menu")&&m(i).append(this.arrowEl)}),t==null||t(...n)}}return e}};let Rt=Jc;Fn=new WeakMap,Vn=new WeakMap,vi=new WeakMap,bo=new WeakSet,jc=function(){m(this.menu).on(`mouseenter${this.constructor.NAMESPACE}`,zn(this,vi)).on(`mouseleave${this.constructor.NAMESPACE}`,this.hideLater),this.on("mouseleave",this.hideLater),_o(this,Fn,!0)},Rt.MENU_CLASS="dropdown-menu",Rt.NAME="Dropdown",Rt.DEFAULT={...ot.DEFAULT,trigger:"click"};const wi=`${Rt.KEY}:options`;m(document).on("click",function(e){const t=m(e.target).closest(Xc).not(":disabled,.disabled");if(!t.length){Rt.clear({event:e});return}const n=t.data(wi),s=Rt.ensure(t,n);n||t.data(wi,s.options),s.options.trigger==="click"&&s.toggle()}).on("mouseover",function(e){const t=m(e.target).closest(Xc);if(!t.length)return;const n=t.data(wi),s=Rt.ensure(t,n);n||t.data(wi,s.options),s.isHover&&s.show()});let _i=0;window.addEventListener("scroll",e=>{_i&&clearTimeout(_i),_i=window.setTimeout(()=>{Rt.clear({event:e}),_i=0},50)},!0);class hf extends F{constructor(n){var s;super(n);L(this,ys,void 0);L(this,_n,j());this.state={placement:((s=n.dropdown)==null?void 0:s.placement)||"",show:!1}}get ref(){return $(this,_n)}get triggerElement(){return $(this,_n).current}componentDidMount(){const{modifiers:n=[],...s}=this.props.dropdown||{};n.push({name:"dropdown-trigger",enabled:!0,phase:"beforeMain",fn:({state:i})=>{var o;const r=((o=i.placement)==null?void 0:o.split("-").shift())||"";this.setState({placement:r})}}),H(this,ys,Rt.ensure(this.triggerElement,{...s,modifiers:n,onShow:()=>{this.setState({show:!0})},onHide:()=>{this.setState({show:!0})}}))}componentWillUnmount(){var n;(n=$(this,ys))==null||n.destroy()}beforeRender(){const{className:n,children:s,dropdown:i,...r}=this.props;return{className:S("dropdown",n),children:typeof s=="function"?s(this.state):s,...r,"data-toggle":"dropdown","data-dropdown-placement":this.state.placement,ref:$(this,_n)}}render(){const{children:n,...s}=this.beforeRender();return f("div",{...s,children:n})}}ys=new WeakMap,_n=new WeakMap;class df extends hf{get triggerElement(){return this.ref.current.base}render(){var r;const{placement:t,show:n}=this.state,s=this.beforeRender();let{caret:i=!0}=s;if(i!==!1&&(n||i===!0)){const o=(n?t:(r=this.props.dropdown)==null?void 0:r.placement)||"";i=(o.includes("top")?"up":o.includes("bottom")?"down":o)||(typeof i=="string"?i:"")||"down"}return s.caret=i,f(rt,{...s})}}function Zc({key:e,type:t,btnType:n,...s}){return f(df,{type:n,...s})}const lm="";let Qc=class extends F{componentDidMount(){var t;(t=this.props.afterRender)==null||t.call(this,{firstRender:!0})}componentDidUpdate(){var t;(t=this.props.afterRender)==null||t.call(this,{firstRender:!1})}componentWillUnmount(){var t;(t=this.props.beforeDestroy)==null||t.call(this)}handleItemClick(t,n,s,i){s&&s.call(i.target,i);const{onClickItem:r}=this.props;r&&r.call(this,{item:t,index:n,event:i})}beforeRender(){var s;const t={...this.props},n=(s=t.beforeRender)==null?void 0:s.call(this,t);return n&&Object.assign(t,n),typeof t.items=="function"&&(t.items=t.items.call(this)),t}onRenderItem(t,n){const{key:s=n,...i}=t;return f(rt,{...i},s)}renderItem(t,n,s){const{itemRender:i,btnProps:r,onClickItem:o}=t,a={key:s,...n};if(r&&Object.assign(a,r),o&&(a.onClick=this.handleItemClick.bind(this,a,s,n.onClick)),i){const l=i.call(this,a,K);if(b.isValidElement(l))return l;typeof l=="object"&&Object.assign(a,l)}return this.onRenderItem(a,s)}render(){const t=this.beforeRender(),{className:n,items:s,size:i,type:r,btnProps:o,children:a,itemRender:l,onClickItem:h,beforeRender:c,afterRender:d,beforeDestroy:u,...p}=t;return f("div",{className:S("btn-group",i?`size-${i}`:"",n),...p,children:[s&&s.map(this.renderItem.bind(this,t)),a]})}};function uf({key:e,type:t,btnType:n,...s}){return f(Qc,{type:n,...s})}let mt=class extends Se{beforeRender(){const{gap:t,btnProps:n,wrap:s,...i}=super.beforeRender();return i.className=S(i.className,s?"flex-wrap":"",typeof t=="number"?`gap-${t}`:""),typeof t=="string"&&(i.style?i.style.gap=t:i.style={gap:t}),i}isBtnItem(t){return t==="item"||t==="dropdown"}renderTypedItem(t,n,s){const{type:i}=s,r=this.props.btnProps,o=this.isBtnItem(i)?{btnType:"ghost",...r}:{},a={...n,...o,...s,className:S(`${this.name}-${i}`,n.className,o.className,s.className),style:Object.assign({},n.style,o.style,s.style)};return i==="btn-group"&&(a.btnProps=r),f(t,{...a})}};mt.ItemComponents={item:ju,dropdown:Zc,"btn-group":uf},mt.ROOT_TAG="nav",mt.NAME="toolbar",mt.defaultProps={btnProps:{btnType:"ghost"}};function ff({className:e,style:t,actions:n,heading:s,content:i,contentClass:r,children:o,close:a,onClose:l,icon:h,...c}){let d;a===!0?d=f(rt,{className:"alert-close btn ghost square text-inherit",square:!0,onClick:l,children:f("span",{class:"close"})}):b.isValidElement(a)?d=a:typeof a=="object"&&(d=f(rt,{...a,onClick:l}));const u=b.isValidElement(n)?n:n?f(mt,{...n}):null;return f("div",{className:S("alert",e),style:t,...c,children:[f(st,{icon:h,className:"alert-icon"}),b.isValidElement(i)?i:f("div",{className:S("alert-content",r),children:[b.isValidElement(s)?s:s&&f("div",{className:"alert-heading",children:s}),f("div",{className:"alert-text",children:i}),s?u:null]}),s?null:u,d,o]})}function pf(e){if(e==="center")return"fade-from-center";if(e){if(e.includes("top"))return"fade-from-top";if(e.includes("bottom"))return"fade-from-bottom"}return"fade"}function mf({margin:e,type:t,placement:n,animation:s,show:i,className:r,time:o,...a}){return f(ff,{className:S("messager",r,t,s===!0?pf(n):s,i?"in":""),...a})}var gf=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},yf=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Un=(e,t,n)=>(gf(e,t,"access private method"),n),Ne,sn;class Co extends G{constructor(){super(...arguments),yf(this,Ne),this._show=!1,this._showTimer=0,this._afterRender=({firstRender:t})=>{t&&this.show();const{margin:n}=this.options;n&&this.$element.css("margin",`${n}px`)}}get isShown(){return this._show}afterInit(){this.on("click",t=>{m(t.target).closest('.alert-close,[data-dismiss="messager"]').length&&(t.preventDefault(),t.stopPropagation(),this.hide())})}setOptions(t){return t=super.setOptions(t),{...t,show:this._show,afterRender:this._afterRender}}show(){this.render(),this.emit("show"),Un(this,Ne,sn).call(this,()=>{this._show=!0,this.render(),Un(this,Ne,sn).call(this,()=>{this.emit("shown");const{time:t}=this.options;t&&Un(this,Ne,sn).call(this,()=>this.hide(),t)})},100)}hide(){this._show&&Un(this,Ne,sn).call(this,()=>{this.emit("hide"),this._show=!1,this.render(),Un(this,Ne,sn).call(this,()=>{this.emit("hidden")})},50)}}Ne=new WeakSet,sn=function(e,t=200){this._showTimer&&clearTimeout(this._showTimer),this._showTimer=window.setTimeout(()=>{e(),this._showTimer=0},t)},Co.NAME="MessagerItem",Co.Component=mf;var $o=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Re=(e,t,n)=>($o(e,t,"read from private field"),n?n.call(e):t.get(e)),bi=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ci=(e,t,n,s)=>($o(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),th=(e,t,n)=>($o(e,t,"access private method"),n),rn,Gt,ko,eh,xo,nh;const sh=class extends ct{constructor(){super(...arguments),bi(this,ko),bi(this,xo),bi(this,rn,void 0),bi(this,Gt,void 0)}get isShown(){var e;return!!((e=Re(this,Gt))!=null&&e.isShown)}show(e){this.setOptions(e),th(this,ko,eh).call(this).show()}hide(){var e;(e=Re(this,Gt))==null||e.hide()}static show(e){typeof e=="string"&&(e={content:e});const{container:t,...n}=e,s=sh.ensure(t||"body");return s.setOptions(n),s.hide(),s.show(),s}};let So=sh;rn=new WeakMap,Gt=new WeakMap,ko=new WeakSet,eh=function(){if(Re(this,Gt))Re(this,Gt).setOptions(this.options);else{const e=th(this,xo,nh).call(this),t=new Co(e,this.options);t.on("hidden",()=>{t.destroy(),e==null||e.remove(),Ci(this,rn,void 0),Ci(this,Gt,void 0)}),Ci(this,Gt,t)}return Re(this,Gt)},xo=new WeakSet,nh=function(){if(Re(this,rn))return Re(this,rn);const{placement:e="top"}=this.options;let t=this.$element.find(`.messagers-${e}`);t.length||(t=m(`<div class="messagers messagers-${e}"></div>`).appendTo(this.$element));let n=t.find(`#messager-${this.gid}`);return n.length||(n=m(`<div class="messager-holder" id="messager-${this.gid}"></div>`).appendTo(t),Ci(this,rn,n[0])),n[0]},So.NAME="messager",So.DEFAULT={placement:"top",animation:!0,close:!0,margin:6,time:5e3};const cm="",hm="";let ih=class extends F{render(t){const{percent:n=50,size:s=24,circleBg:i,circleColor:r,text:o,className:a,textStyle:l,textX:h,textY:c}=t,d=s/2;let{circleWidth:u=.2}=t;u<1&&(u=s*u);const p=(s-u)/2;return f("svg",{className:a,width:s,height:s,children:[f("circle",{cx:d,cy:d,r:p,"stroke-width":u,stroke:i,fill:"transparent"}),f("circle",{cx:d,cy:d,r:p,"stroke-width":u,stroke:r,fill:"transparent","stroke-linecap":"round","stroke-dasharray":Math.PI*p*2,"stroke-dashoffset":Math.PI*p*2*(100-n)/100,style:{transformOrigin:"center",transform:"rotate(-90deg)"}}),o?f("text",{x:h??d,y:c??d+u/2,"dominant-baseline":"middle","text-anchor":"middle",style:l||{fontSize:`${p}px`},children:o===!0?Math.round(n):o}):null]})}};ih.defaultProps={percent:50,size:24,circleWidth:.1,circleBg:"var(--color-surface)",circleColor:"var(--color-primary-500)",text:!0};class Mo extends G{}Mo.NAME="ProgressCircle",Mo.Component=ih;const dm="";class vf{constructor(t=""){L(this,ne,void 0);typeof t=="object"?H(this,ne,t):H(this,ne,document.appendChild(document.createComment(t)))}on(t,n,s){$(this,ne).addEventListener(t,n,s)}once(t,n,s){$(this,ne).addEventListener(t,n,{once:!0,...s})}off(t,n,s){$(this,ne).removeEventListener(t,n,s)}emit(t){return $(this,ne).dispatchEvent(t),t}}ne=new WeakMap;const To=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);class Eo extends vf{on(t,n,s){super.on(t,n,s)}off(t,n,s){super.off(t,n,s)}once(t,n,s){super.once(t,n,s)}emit(t,n){return typeof t=="string"&&(To.has(t)?(t=new Event(t),Object.assign(t,{detail:n})):t=new CustomEvent(t,{detail:n})),super.emit(Eo.createEvent(t,n))}static createEvent(t,n){return typeof t=="string"&&(To.has(t)?(t=new Event(t),Object.assign(t,{detail:n})):t=new CustomEvent(t,{detail:n})),t}}let rh=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const _l=class{constructor(t,n="local"){L(this,Cn);L(this,vs,void 0);L(this,ye,void 0);L(this,Wt,void 0);L(this,bn,void 0);H(this,vs,n),H(this,ye,`ZUI_STORE:${t??rh()}`),H(this,Wt,n==="local"?localStorage:sessionStorage)}get type(){return $(this,vs)}get session(){return this.type==="session"?this:($(this,bn)||H(this,bn,new _l($(this,ye),"session")),$(this,bn))}get(t,n){const s=$(this,Wt).getItem(se(this,Cn,Sr).call(this,t));return typeof s=="string"?JSON.parse(s):s??n}set(t,n){if(n==null)return this.remove(t);$(this,Wt).setItem(se(this,Cn,Sr).call(this,t),JSON.stringify(n))}remove(t){$(this,Wt).removeItem(se(this,Cn,Sr).call(this,t))}each(t){for(let n=0;n<$(this,Wt).length;n++){const s=$(this,Wt).key(n);if(s!=null&&s.startsWith($(this,ye))){const i=$(this,Wt).getItem(s);typeof i=="string"&&t(s.substring($(this,ye).length+1),JSON.parse(i))}}}getAll(){const t={};return this.each((n,s)=>{t[n]=s}),t}};let $i=_l;vs=new WeakMap,ye=new WeakMap,Wt=new WeakMap,bn=new WeakMap,Cn=new WeakSet,Sr=function(t){return`${$(this,ye)}:${t}`};const oh=new $i("DEFAULT");function wf(e,t="local"){return new $i(e,t)}Object.assign(oh,{create:wf});const um="";function _f(e){if(e.indexOf("#")===0&&(e=e.slice(1)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e.length!==6)throw new Error(`Invalid HEX color "${e}".`);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function bf(e){const[t,n,s]=typeof e=="string"?_f(e):e;return t*.299+n*.587+s*.114>186}function ah(e,t){return bf(e)?(t==null?void 0:t.dark)??"#333333":(t==null?void 0:t.light)??"#ffffff"}function lh(e,t=255){return Math.min(Math.max(e,0),t)}function Cf(e,t,n){e=e%360/360,t=lh(t),n=lh(n);const s=n<=.5?n*(t+1):n+t-n*t,i=n*2-s,r=o=>(o=o<0?o+1:o>1?o-1:o,o*6<1?i+(s-i)*o*6:o*2<1?s:o*3<2?i+(s-i)*(2/3-o)*6:i);return[r(e+1/3)*255,r(e)*255,r(e-1/3)*255]}function $f(e){let t=0;if(typeof e!="string"&&(e=String(e)),e&&e.length)for(let n=0;n<e.length;++n)t+=(n+1)*e.charCodeAt(n);return t}function kf(e,t){return/^[\u4e00-\u9fa5\s]+$/.test(e)?e.length<=t?e:e.substring(e.length-t):/^[A-Za-z\d\s]+$/.test(e)?e[0].toUpperCase():e.length<=t?e:e.substring(0,t)}let ch=class extends F{render(){const{className:t,style:n,size:s="",circle:i,rounded:r,background:o,foreColor:a,text:l,code:h,maxTextLength:c=2,src:d,hueDistance:u=43,saturation:p=.4,lightness:g=.6,children:y,...w}=this.props,v=["avatar",t],_={...n,background:o,color:a};let C=32;s&&(typeof s=="number"?(_.width=`${s}px`,_.height=`${s}px`,_.fontSize=`${Math.max(12,Math.round(s/2))}px`,C=s):(v.push(`size-${s}`),C={xs:20,sm:24,lg:48,xl:80}[s])),i?v.push("circle"):r&&(typeof r=="number"?_.borderRadius=`${r}px`:v.push(`rounded-${r}`));let N;if(d)v.push("has-img"),N=f("img",{className:"avatar-img",src:d,alt:l});else if(l!=null&&l.length){const x=kf(l,c);if(v.push("has-text",`has-text-${x.length}`),o)!a&&o&&(_.color=ah(o));else{const A=h??l,D=(typeof A=="number"?A:$f(A))*u%360;if(_.background=`hsl(${D},${p*100}%,${g*100}%)`,!a){const B=Cf(D,p,g);_.color=ah(B)}}let E;C&&C<14*x.length&&(E={transform:`scale(${C/(14*x.length)})`,whiteSpace:"nowrap"}),N=f("div",{"data-actualSize":C,className:"avatar-text",style:E,children:x})}return f("div",{className:S(v),style:_,...w,children:[N,y]})}};class No extends G{}No.NAME="Avatar",No.Component=ch;const fm="";class Ro extends G{}Ro.NAME="BtnGroup",Ro.Component=Qc;const pm="",hh=Symbol("EVENT_FROM_PICK");class Ao extends F{constructor(n){super(n);L(this,ws,void 0);this._handleClick=this._handleClick.bind(this),H(this,ws,!!m(`#${n.id}`).length)}_handleClick(n){const{togglePop:s,clickType:i,onClick:r}=this.props;let o=i==="open"?!0:void 0;const a=m(n.target),l=r==null?void 0:r(n);if(!n.defaultPrevented){if(typeof l=="boolean")o=l;else{if(a.closest('[data-dismiss="pick"]').length){s(!1);return}if(a.closest("a,input").length)return}requestAnimationFrame(()=>s(o))}}_getClass(n){const{state:s,className:i}=n,{open:r,disabled:o}=s;return S("pick",i,r&&"is-open focus",o&&"disabled")}_getProps(n){const{id:s,style:i,attrs:r}=n;return{id:`pick-${s}`,className:this._getClass(n),style:i,tabIndex:-1,onClick:this._handleClick,...r}}_renderTrigger(n){const{children:s,state:i}=n;return s??i.value}_renderValue(n){const{name:s,state:{value:i=""},id:r}=n;if(s)if($(this,ws))m(`#${r}`).val(i);else return f("input",{id:r,type:"hidden",className:"pick-value",name:s,value:i});return null}componentDidMount(){const{id:n,state:s}=this.props;m(`#${n}`).on(`change.pick.zui.${n}`,(i,r)=>{if(r===hh)return;const o=i.target.value;o!==s.value&&this.props.changeState({value:o})})}componentWillUnmount(){const{id:n}=this.props;m(`#${n}`).off(`change.pick.zui.${n}`)}componentDidUpdate(n){const{id:s,state:i,name:r}=this.props;r&&n.state.value!==i.value&&m(`#${s}`).trigger("change",hh)}render(n){return K(n.tagName||"div",this._getProps(n),this._renderTrigger(n),this._renderValue(n))}}ws=new WeakMap;class dh extends F{constructor(n){super(n);L(this,Ge,void 0);L(this,Ot,void 0);L(this,ve,void 0);H(this,Ge,j()),this._handleDocClick=s=>{const{state:{open:i},id:r,togglePop:o}=this.props,a=m(s.target);i!=="closing"&&!a.closest(`#pick-${r},#pick-pop-${r}`).length&&a.parent().length&&o(!1)},this._handleClick=this._handleClick.bind(this)}get trigger(){return m(`#pick-${this.props.id}`)[0]}get element(){var n;return(n=$(this,Ge))==null?void 0:n.current}get container(){return $(this,ve)}_handleClick(n){const{togglePop:s}=this.props,i=m(n.target),r=i.closest("[data-pick-value]");if(r.length)return n.stopPropagation(),s(!1,{value:`${r.dataset("pickValue")}`});if(i.closest('[data-dismiss="pick"]').length)return s(!1)}_getClass(n){const{className:s,state:i}=n,{open:r}=i;return S("pick-pop",s,r===!0&&"in")}_getProps(n){const{id:s,style:i,maxHeight:r,maxWidth:o,minHeight:a,minWidth:l}=n,h=m.extend({maxHeight:r,maxWidth:o,minHeight:a,minWidth:l},i);return{id:`pick-pop-${s}`,className:this._getClass(n),style:h,ref:$(this,Ge),onClick:this._handleClick}}_getContainer(n){if(!$(this,ve)){const s=m(n.container||"body");let i=s.find(".pick-container");i.length||(i=m("<div>").addClass("pick-container").appendTo(s)),H(this,ve,i[0])}return $(this,ve)}_render(n){return f("div",{...this._getProps(n),children:this._renderPop(n)})}_renderPop(n){return n.children}layout(){const{element:n,trigger:s,props:i}=this,{state:r}=i;if(!n||!s||!r.open){$(this,Ot)&&($(this,Ot).call(this),H(this,Ot,void 0));return}$(this,Ot)||H(this,Ot,po(s,n,()=>{const{placement:o,width:a}=i;fi(s,n,{placement:!o||o==="auto"?"bottom-start":o,middleware:[o==="auto"?ri():null,ai(),oi(1)].filter(Boolean)}).then(({x:l,y:h})=>{var c,d;m(n).css({left:l,top:h,width:a==="100%"?m(s).outerWidth():void 0}),(d=(c=this.props).onLayout)==null||d.call(c,n)}),a==="100%"&&m(n).css({width:m(n).width()})}))}componentDidMount(){var n,s;this.layout(),m(document).on("click",this._handleDocClick),(s=(n=this.props).afterRender)==null||s.call(n,{firstRender:!0})}componentDidUpdate(){var n,s;(s=(n=this.props).afterRender)==null||s.call(n,{firstRender:!1})}componentWillUnmount(){var s,i;m(document).off("click",this._handleDocClick);const n=$(this,Ot);n&&(n(),H(this,Ot,void 0)),H(this,ve,void 0),H(this,Ge,void 0),m(`pick-pop-${this.props.id}`).remove(),(i=(s=this.props).beforeDestroy)==null||i.call(s)}render(n){return $c(this._render(n),this._getContainer(n))}}Ge=new WeakMap,Ot=new WeakMap,ve=new WeakMap;const mm="";var uh=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},de=(e,t,n)=>(uh(e,t,"read from private field"),n?n.call(e):t.get(e)),Po=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},on=(e,t,n,s)=>(uh(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),ki,kt,qn;let gt=class extends F{constructor(t){super(t),Po(this,ki,void 0),Po(this,kt,0),Po(this,qn,j()),this.changeState=(n,s)=>new Promise(i=>{this.setState(n,()=>{s==null||s(),i(this.state)})}),this.toggle=async(n,s)=>{this.props.disabled&&(n=!1);const{state:i}=this;if(typeof n=="boolean"&&n===(!!i.open&&i.open!=="closing"))return s&&await this.changeState(s),this.state;de(this,kt)&&(clearTimeout(de(this,kt)),on(this,kt,0));let r=await this.changeState(a=>(n=n??!a.open,{open:n?"opening":"closing",...s}));const{open:o}=r;return o==="closing"?(await Rn(200,a=>{on(this,kt,a)}),on(this,kt,0),r=await this.changeState({open:!1})):o==="opening"&&(await Rn(50,a=>{on(this,kt,a)}),on(this,kt,0),r=await this.changeState({open:!0})),r},this.state={value:String(t.defaultValue??""),open:!1,disabled:!1},on(this,ki,t.id??`_pick${m.guid++}`)}get id(){return de(this,ki)}get pop(){return de(this,qn).current}open(t){return this.toggle(!0,t)}close(t){return this.toggle(!1,t)}_getTriggerProps(t,n){return{id:this.id,state:n,className:t.className,style:t.style,name:t.name,tagName:t.tagName,attrs:t.attrs,clickType:t.clickType,onClick:t.onClick,changeState:this.changeState,togglePop:this.toggle}}_getPopProps(t,n){return{id:this.id,state:n,className:t.popClass,style:t.popStyle,changeState:this.changeState,togglePop:this.toggle,placement:t.popPlacement,container:t.popContainer,width:t.popWidth,height:t.popHeight,minHeight:t.popMinHeight,maxHeight:t.popMaxHeight,maxWidth:t.popMaxWidth,minWidth:t.popMinWidth}}_renderTrigger(t,n){return null}_renderPop(t,n){return null}_afterRender(t=!1){var n;(n=this.props.afterRender)==null||n.call(this,{firstRender:t})}_getPop(t){return t.Pop||this.constructor.Pop}_getTrigger(t){return t.Trigger||this.constructor.Trigger}_handleChange(t,n){const{onChange:s}=this.props;s&&s(t,n)}componentDidMount(){this._afterRender(!0)}componentWillUpdate(t,n){const{open:s}=this.state,{open:i}=n;if(s===i)return;const{onPopShow:r,onPopHide:o}=this.props;i&&r?r():!i&&o&&o()}componentDidUpdate(t,n){const{open:s,value:i}=this.state,{open:r,value:o}=n;if(!!s!=!!r){const{onPopShown:a,onPopHidden:l}=this.props;s&&a?a():!s&&l&&l()}i!==o&&this._handleChange(i,o),this._afterRender()}componentWillUnmount(){var n;(n=this.props.beforeDestroy)==null||n.call(this),de(this,kt)&&clearTimeout(de(this,kt));const t=de(this,qn).current;t&&t.componentWillUnmount&&t.componentWillUnmount()}render(t,n){const{open:s}=n,i=this._getTrigger(t);let r;if(s){const o=this._getPop(t);r=f(o,{ref:de(this,qn),...this._getPopProps(t,n),children:this._renderPop(t,n)},"pop")}return f(Ke,{children:[f(i,{...this._getTriggerProps(t,n),children:this._renderTrigger(t,n)},"pick"),r]})}};ki=new WeakMap,kt=new WeakMap,qn=new WeakMap,gt.Trigger=Ao,gt.Pop=dh,gt.defaultProps={popContainer:"body",popClass:"popup",popWidth:"100%",popPlacement:"auto",popMinWidth:50,popMinHeight:32,popMaxHeight:300,clickType:"open"};let fh=class extends gt{constructor(t){super(t),this.state.value===void 0&&t.required&&(this.state.value=this.getColors()[0])}getColors(){const{colors:t}=this.props;return typeof t=="string"?t.split(","):t||[]}componentDidMount(){this.syncColor()}syncColor(){const{syncBackground:t,syncBorder:n,syncColor:s,syncValue:i}=this.props,r=this.state.value||"";if(t&&m(t).css("backgroundColor",r),n&&m(n).css("borderColor",r),s&&m(s).css("color",r),i){const o=m(i);o.is("input,textarea,select")?o.val(r):o.text(r)}}_handleChange(t,n){this.props.disabled||(super._handleChange(t,n),this.syncColor())}_renderTrigger(t,n){const{icon:s}=t,{value:i}=n;return[s?f(st,{icon:s},"icon"):f("span",{class:"color-picker-item bg-current ring",style:{background:i}})]}_getTriggerProps(t,n){const s=super._getTriggerProps(t,n);return s.style=m.extend({color:n.value},s.style),s.className=S("color-picker",s.className,{disabled:t.disabled}),s}_renderPop(t,n){const{closeBtn:s,heading:i}=t,r=this.getColors(),{value:o}=n;let a;return i&&(a=f("div",{className:"color-picker-heading",children:[i,s?f("button",{className:"btn ghost square rounded size-sm","data-dismiss":"pick",children:f("span",{class:"close"})}):null]},"heading")),[a,f("div",{className:"color-picker-row",children:[r.map(l=>f("button",{className:"btn color-picker-item",style:{backgroundColor:l},"data-pick-value":l,children:o===l?f(st,{icon:"check"}):null},l)),f("button",{className:"btn color-picker-item","data-pick-value":"",children:f(st,{className:"text-fore",icon:"trash"})})]},"row")]}};fh.defaultProps={...gt.defaultProps,className:"rounded btn square size-sm ghost",popClass:"color-picker-pop popup",colors:["#ef4444","#f97316","#eab308","#84cc16","#22c55e","#14b8a6","#0ea5e9","#6366f1","#a855f7","#d946ef","#ec4899"],closeBtn:!0,popWidth:"auto",popMinWidth:176};class Do extends G{}Do.NAME="ColorPicker",Do.Component=fh;const gm="",an=24*60*60*1e3,J=e=>e?(e instanceof Date||(typeof e=="string"&&(e=e.trim(),/^\d+$/.test(e)&&(e=Number.parseInt(e,10))),typeof e=="number"&&e<1e10&&(e*=1e3),e=new Date(e)),e):new Date,ph=(e,t,n="day")=>{if(typeof t=="string"){const s=Number.parseInt(t,10);n=t.replace(s.toString(),""),t=s}return e=new Date(J(e).getTime()),n==="month"?e.setMonth(e.getMonth()+t):n==="year"?e.setFullYear(e.getFullYear()+t):n==="week"?e.setDate(e.getDate()+t*7):n==="hour"?e.setHours(e.getHours()+t):n==="minute"?e.setMinutes(e.getMinutes()+t):n==="second"?e.setSeconds(e.getSeconds()+t):e.setDate(e.getDate()+t),e},ln=(e,t=new Date)=>J(e).toDateString()===J(t).toDateString(),xi=(e,t=new Date)=>J(e).getFullYear()===J(t).getFullYear(),Lo=(e,t=new Date)=>(e=J(e),t=J(t),e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()),xf=(e,t=new Date)=>{e=J(e),t=J(t);const n=1e3*60*60*24,s=Math.floor(e.getTime()/n),i=Math.floor(t.getTime()/n);return Math.floor((s+4)/7)===Math.floor((i+4)/7)},Sf=(e,t)=>ln(J(t),e),Mf=(e,t)=>ln(J(t).getTime()-an,e),Tf=(e,t)=>ln(J(t).getTime()+an,e),yt=(e,t="yyyy-MM-dd hh:mm",n="")=>{if(e=J(e),Number.isNaN(e.getDay()))return n;const s={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"H+":e.getHours()%12,"m+":e.getMinutes(),"s+":e.getSeconds(),"S+":e.getMilliseconds()};return/(y+)/i.test(t)&&(t.includes("[yyyy-]")&&(t=t.replace("[yyyy-]",xi(e)?"":"yyyy-")),t=t.replace(RegExp.$1,`${e.getFullYear()}`.substring(4-RegExp.$1.length))),Object.keys(s).forEach(i=>{if(new RegExp(`(${i})`).test(t)){const r=`${s[i]}`;t=t.replace(RegExp.$1,RegExp.$1.length===1?r:`00${r}`.substring(r.length))}}),t},Ef=(e,t,n)=>{const s={full:"yyyy-M-d",month:"M-d",day:"d",str:"{0} ~ {1}",...n},i=yt(e,xi(e)?s.month:s.full);if(ln(e,t))return i;const r=yt(t,xi(e,t)?Lo(e,t)?s.day:s.month:s.full);return s.str.replace("{0}",i).replace("{1}",r)};class Nf extends F{constructor(){super(...arguments);L(this,_s,j());L(this,bs,(n,s)=>{var i,r;(r=(i=this.props).onChange)==null||r.call(i,n,String(s.item.key||""))})}componentDidMount(){m($(this,_s).current).find(".menu-item>.active").scrollIntoView()}render(n){const{minuteStep:s=5,hour:i,minute:r}=n,o=[],a=[];for(let h=0;h<24;++h)o.push({key:h,text:h<10?`0${h}`:h,active:i===h});for(let h=0;h<60;h+=s)a.push({key:h,text:h<10?`0${h}`:h,active:r===h});const l="col w-10 max-h-full overflow-y-auto scrollbar-thin scrollbar-hover";return f("div",{className:"time-picker-menu row",ref:$(this,_s),children:[f(le,{className:l,items:o,onClickItem:$(this,bs).bind(this,"hour")}),f(le,{className:l,items:a,onClickItem:$(this,bs).bind(this,"minute")})]})}}_s=new WeakMap,bs=new WeakMap;const ym="";var Rf=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Si=(e,t,n)=>(Rf(e,t,"read from private field"),n?n.call(e):t.get(e)),Mi=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Io,Wo,Oo,Ho;const mh=e=>{if(!e)return;const t=J(`1999-01-01 ${e}`);if(!Number.isNaN(t.getDay()))return t};let gh=class extends gt{constructor(t){super(t),Mi(this,Io,()=>{this.toggle(!0)}),Mi(this,Wo,s=>{this.setTime(s.target.value)}),Mi(this,Oo,(s,i)=>{this.setTime({[s]:i})}),Mi(this,Ho,()=>{this.setTime("")});const n=this.state;n.value==="now"&&(n.value=yt(new Date,t.format))}setTime(t){if(this.props.disabled)return;let n="";if(typeof t=="string")n=t;else{const[a,l]=(this.state.value||"00:00").split(":"),{hour:h=+a,minute:c=+l}=t;n=`${h}:${c}`}const s=mh(n),{onInvalid:i,required:r,defaultValue:o}=this.props;this.setState({value:s?yt(s,this.props.format):r?o:""},()=>{!s&&i&&i(n)})}getTime(){const t=mh(this.state.value);return t?[t.getHours(),t.getMinutes()]:null}_renderTrigger(t,n){const{placeholder:s,name:i,icon:r,required:o,disabled:a,readonly:l}=t,{value:h="",open:c}=n,d=`time-picker-${this.id}`;let u;return c&&!o&&h.length?u=f("button",{type:"button",className:"btn size-sm square ghost",onClick:Si(this,Ho),children:f("span",{className:"close"})}):r&&(r===!0?u=f("i",{class:"i-time"}):u=f(st,{icon:r})),[f("input",{name:i,id:d,type:"text",class:"form-control",placeholder:s,value:h,disabled:a,readOnly:l,onFocus:Si(this,Io),onChange:Si(this,Wo)},"input"),u?f("label",{for:d,class:"input-control-suffix",children:u},"icon"):null]}_getTriggerProps(t,n){const s=super._getTriggerProps(t,n);return{...s,className:S(s.className,"time-picker input-control has-suffix-icon"),name:""}}_renderPop(t){const[n,s]=this.getTime()||[];return f(Nf,{hour:n,minute:s,minuteStep:t.minuteStep,onChange:Si(this,Oo)})}};Io=new WeakMap,Wo=new WeakMap,Oo=new WeakMap,Ho=new WeakMap,gh.defaultProps={...gt.defaultProps,popWidth:"auto",popMaxHeight:320,minuteStep:5,format:"hh:mm",icon:!0};const vm="";tt.addLang({zh_cn:{today:"今天",yearFormat:"{0}年",weekNames:["日","一","二","三","四","五","六"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},zh_tw:{today:"今天",yearFormat:"{0}年",weekNames:["日","一","二","三","四","五","六"],monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},en:{today:"Today",yearFormat:"{0}",weekNames:["SUN","MON","TUE","WED","THU","FRI","SAT"],monthNames:["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sept.","Oct.","Nov.","Dec."]}});const Af=(e,t,n=0)=>{const s=new Date(e,t-1,1),i=new Date(e,t,0),r=s.getDay(),o=s.getTime()-(7+r-n)%7*an;return{days:i.getDate(),startTime:o,firstDay:s.getTime()}},yh=(e,t)=>new Set((Array.isArray(e)?e:[e]).map(n=>yt(n,t)));class Pf extends F{constructor(){super(...arguments);L(this,lr,n=>{const{onClickDate:s}=this.props;if(!s)return;const i=m(n.target).closest(".mini-calendar-day").dataset("date");i&&s(i)})}render(n){const s=new Date,{weekStart:i=1,weekNames:r=tt.getLang("weekNames"),monthNames:o=tt.getLang("monthNames"),year:a=s.getFullYear(),month:l=s.getMonth()+1,highlights:h=[],selections:c=[]}=n,d=[],u="btn ghost square rounded-full";for(let E=0;E<7;E++){const A=(i+E)%7;d.push(f("div",{className:S("col mini-calendar-day",{"is-weekend":A===0||A===6}),children:f("div",{children:r?r[A]:A})},E))}const{startTime:p,days:g,firstDay:y}=Af(a,l,i),w=y+g*an;let v=p;const _=[],C="yyyy-MM-dd",N=yh(h,C),x=yh(c,C);for(;v<=w;){const E=[];for(let A=0;A<7;A++){const D=new Date(v),B=D.getDate(),M=yt(D,C),P=D.getDay(),I=Lo(D,y),T=S("col mini-calendar-day",{active:N.has(M),selected:x.has(M),"is-first":B===1,"is-in-month":I,"is-out-month":!I,"is-today":ln(D,s),"is-weekend":P===0||P===6});E.push(f("div",{className:T,"data-date":M,children:f("a",{className:u,onClick:$(this,lr),children:B===1&&o?o[D.getMonth()]:D.getDate()})},M)),v+=an}_.push(f("div",{className:"row",children:E},v))}return f("div",{className:"mini-calendar",children:[f("div",{className:"row",children:d}),_]})}}lr=new WeakMap;class vh extends F{constructor(){super(...arguments);L(this,Cs,j());L(this,cr,n=>{const{onChange:s}=this.props;if(!s)return;const r=m(n.target).closest("[data-value]").dataset("value");r&&(s(+r),n.stopPropagation())})}componentDidMount(){m($(this,Cs).current).find(".active").scrollIntoView({block:"center"})}render(n){const{className:s,max:i,min:r,value:o}=n,a=[],l=new Date().getFullYear();for(let h=r;h<=i;++h)a.push(f(rt,{type:"ghost","data-value":h,active:h===o,className:S(l===h?"is-current":""),onClick:$(this,cr),children:h},h));return f("div",{className:s,ref:$(this,Cs),children:a})}}Cs=new WeakMap,cr=new WeakMap;class Df extends F{constructor(n){super(n);L(this,hr);L(this,dr);L(this,$n,void 0);L(this,$s,void 0);L(this,ks,void 0);L(this,xs,void 0);L(this,Ss,void 0);L(this,Ms,void 0);H(this,$n,j()),H(this,$s,o=>{const a=m(o.target).closest("[data-set-date]");a.length&&this.changeDate(a.dataset("set-date"))}),H(this,ks,()=>{const{year:o,month:a}=this.state;a===1?this.setState({year:o-1,month:12}):this.setState({month:a-1})}),H(this,xs,()=>{const{year:o,month:a}=this.state;a===12?this.setState({year:o+1,month:1}):this.setState({month:a+1})}),H(this,Ss,o=>{this.setState({year:o,select:"day"})}),H(this,Ms,o=>{this.setState({month:o,select:"day"})}),this.changeDate=o=>{var a,l;if(o.startsWith("today")){let h=new Date;o.length>3&&(h=ph(h,o.substring(5).replace("+",""))),o=yt(h,"yyyy-MM-dd")}(l=(a=this.props).onChange)==null||l.call(a,o)};const{date:s}=n,i=new Date,r=s?new Date(s):void 0;this.state={select:"day",year:r?r.getFullYear():i.getFullYear(),month:r?r.getMonth()+1:i.getMonth()+1}}_showSelect(n){this.setState(s=>s.select===n?{select:"day"}:{select:n})}componentDidMount(){m($(this,$n).current).find(".active").scrollIntoView()}render(n,s){const{date:i,yearText:r=tt.getLang("yearFormat")||"{0}",weekNames:o=tt.getLang("weekNames"),monthNames:a=tt.getLang("monthNames"),weekStart:l}=n,h=i?new Date(i):void 0,{year:c,month:d,select:u}=s,p=u==="day",g=J(n.minDate||"1970-1-1"),y=J(n.maxDate||"2099-12-1");return f("div",{className:"date-picker-menu row",ref:$(this,$n),onClick:$(this,$s),children:[se(this,hr,Hd).call(this,n),f("div",{className:"cell",style:"width: 312px",children:[f("div",{className:"row p-2",children:[f(rt,{type:u==="year"?"primary-pale":"ghost",size:"sm",caret:!0,onClick:this._showSelect.bind(this,"year"),children:nt(r,c)}),f(rt,{type:u==="month"?"primary-pale":"ghost",size:"sm",caret:!0,onClick:this._showSelect.bind(this,"month"),children:a?a[d-1]:d}),f("div",{className:"flex-auto"}),p?f("div",{children:[f(rt,{type:"ghost",size:"sm",square:!0,onClick:$(this,ks),children:f("i",{className:"chevron-left"})}),f(rt,{type:"ghost",size:"sm",square:!0,onClick:$(this,xs),children:f("i",{className:"chevron-right"})})]}):null]}),p?f(Pf,{weekStart:l,weekNames:o,monthNames:a,year:c,month:d,selections:h,onClickDate:this.changeDate}):null,u==="year"?f(vh,{className:"date-pick-menu-years overflow-y-auto scrollbar-hover scrollbar-thin",value:c,min:g.getFullYear(),max:y.getFullYear(),onChange:$(this,Ss)}):u==="month"?f(vh,{className:"date-pick-menu-month overflow-y-auto scrollbar-hover scrollbar-thin",value:d,min:1,max:12,onChange:$(this,Ms)}):null,p?se(this,dr,Bd).call(this,n):null]})]})}}$n=new WeakMap,$s=new WeakMap,ks=new WeakMap,xs=new WeakMap,Ss=new WeakMap,Ms=new WeakMap,hr=new WeakSet,Hd=function(n){let{menu:s}=n;return s?(Array.isArray(s)&&(s={items:s}),f(le,{...s})):null},dr=new WeakSet,Bd=function(n){let{actions:s}=n;const{todayText:i,clearText:r}=n;return s||(s=[{text:i,"data-set-date":yt(new Date,"yyyy-MM-dd")}]),Array.isArray(s)&&(s={items:s}),f("div",{className:"date-picker-menu-footer",children:[f(mt,{btnProps:{className:"ghost text-primary"},...s}),r?f(rt,{type:"ghost text-link","data-set-date":"",children:r}):null]})};const wm="";var Lf=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Bo=(e,t,n)=>(Lf(e,t,"read from private field"),n?n.call(e):t.get(e)),zo=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Fo,Vo,Uo;let wh=class extends gt{constructor(t){super(t),zo(this,Fo,()=>{this.toggle(!0)}),zo(this,Vo,s=>{this.setDate(s.target.value)}),zo(this,Uo,()=>{this.setDate("")}),this.setDate=s=>{if(this.props.disabled)return;const i=J(s),r=!s||Number.isNaN(i.getDay()),{onInvalid:o,defaultValue:a="",required:l}=this.props;this.setState({value:r?l?a:"":yt(i,this.props.format)},()=>{!r&&o&&o(s),this.toggle(!1)})};const n=this.state;n.value==="today"&&(n.value=yt(new Date,t.format))}_renderTrigger(t,n){const{placeholder:s,icon:i,required:r,disabled:o,readonly:a}=t,{value:l="",open:h}=n,c=`date-picker-${this.id}`;let d;return h&&!r&&l.length?d=f("button",{type:"button",className:"btn size-sm square ghost",onClick:Bo(this,Uo),children:f("span",{className:"close"})}):i&&(i===!0?d=f("i",{class:"i-calendar"}):d=f(st,{icon:i})),[f("input",{id:c,type:"text",class:"form-control",placeholder:s,value:l,disabled:o,readOnly:a,onFocus:Bo(this,Fo),onChange:Bo(this,Vo)},"input"),d?f("label",{for:c,class:"input-control-suffix",children:d},"icon"):null]}_getTriggerProps(t,n){const s=super._getTriggerProps(t,n);return{...s,className:S(s.className,"date-picker input-control has-suffix-icon")}}_getPopProps(t,n){const s=super._getPopProps(t,n);return{...s,className:S(s.className,"popup")}}_renderPop(t,n){const{weekNames:s,monthNames:i,weekStart:r,yearText:o,todayText:a=tt.getLang("today"),clearText:l,menu:h,actions:c,minDate:d,maxDate:u,required:p}=t;return f(Df,{onChange:this.setDate,date:n.value,weekNames:s,monthNames:i,weekStart:r,yearText:o,todayText:a,clearText:p?"":l,menu:h,actions:c,minDate:d,maxDate:u})}};Fo=new WeakMap,Vo=new WeakMap,Uo=new WeakMap,wh.defaultProps={...gt.defaultProps,popWidth:"auto",popMaxHeight:320,format:"yyyy-MM-dd",icon:!0};class qo extends G{}qo.NAME="TimePicker",qo.Component=gh;class Go extends G{}Go.NAME="DatePicker",Go.Component=wh;const _m="";var Yo=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ae=(e,t,n)=>(Yo(e,t,"read from private field"),n?n.call(e):t.get(e)),Gn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},cn=(e,t,n,s)=>(Yo(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Ko=(e,t,n)=>(Yo(e,t,"access private method"),n),hn,Pe,Yn,jo,Kn,Ti;const Xo="show",_h="in",If='[data-dismiss="modal"]',jn=class extends ct{constructor(){super(...arguments),Gn(this,Kn),Gn(this,hn,0),Gn(this,Pe,void 0),Gn(this,Yn,void 0),Gn(this,jo,e=>{const t=e.target,n=t.closest(".modal");!n||n!==this.modalElement||(t.closest(If)||this.options.backdrop===!0&&t===n)&&(e.stopPropagation(),this.hide())})}get modalElement(){return this.element}get shown(){return this.modalElement.classList.contains(Xo)}get dialog(){return this.modalElement.querySelector(".modal-dialog")}get rob(){return Ae(this,Pe)}_observeResize(){var e;if(this.options.responsive&&typeof ResizeObserver<"u"){(e=Ae(this,Pe))==null||e.disconnect();const{dialog:t}=this;if(t){const n=new ResizeObserver(()=>{if(!this.shown)return;const s=t.clientWidth,i=t.clientHeight,[r,o]=Ae(this,Yn)||[];(r!==s||o!==i)&&(cn(this,Yn,[s,i]),this.layout())});n.observe(t),cn(this,Pe,n)}}}afterInit(){this.on("click",Ae(this,jo)),this.options.show&&this.show(),this._observeResize()}destroy(){var e;super.destroy(),(e=Ae(this,Pe))==null||e.disconnect(),cn(this,Pe,void 0)}show(e){const{modalElement:t}=this;if(this.shown)return m(t).css("z-index",`${jn.zIndex++}`),!1;this.setOptions(e);const{animation:n,backdrop:s,className:i,style:r}=this.options;return m(t).setClass({"modal-trans":n,"modal-no-backdrop":!s},Xo,i).css({zIndex:`${jn.zIndex++}`,...r}),this.layout(),this.emit("show"),Ko(this,Kn,Ti).call(this,()=>{m(t).addClass(_h),Ko(this,Kn,Ti).call(this,()=>{this.emit("shown")})},50),!0}hide(){return this.shown?(m(this.modalElement).removeClass(_h),this.emit("hide"),Ko(this,Kn,Ti).call(this,()=>{m(this.modalElement).removeClass(Xo),this.emit("hidden")}),!0):!1}layout(e,t){if(!this.shown)return;const{dialog:n}=this;if(!n)return;const s=m(n);if(t=t??this.options.size,t){s.removeAttr("data-size");const a={width:"",height:""};typeof t=="object"?(a.width=t.width,a.height=t.height):typeof t=="string"&&["md","sm","lg","full"].includes(t)?s.attr("data-size",t):t&&(a.width=t),s.css(a)}e=e??this.options.position??"fit";const i=n.clientWidth,r=n.clientHeight;cn(this,Yn,[i,r]),typeof e=="function"&&(e=e({width:i,height:r}));const o={top:null,left:null,bottom:null,right:null,alignSelf:"center"};typeof e=="number"?(o.alignSelf="flex-start",o.top=e):typeof e=="object"&&e?(o.alignSelf="flex-start",Object.assign(o,e)):e==="fit"?(o.alignSelf="flex-start",o.top=`${Math.max(0,Math.floor((window.innerHeight-r)/3))}px`):e==="bottom"?o.alignSelf="flex-end":e==="top"?o.alignSelf="flex-start":e!=="center"&&typeof e=="string"&&(o.alignSelf="flex-start",o.top=e),s.css(o),m(this.modalElement).css("justifyContent",o.left?"flex-start":"center")}static hide(e){var t;(t=jn.query(e))==null||t.hide()}static show(e){var t;(t=jn.query(e))==null||t.show()}};let At=jn;hn=new WeakMap,Pe=new WeakMap,Yn=new WeakMap,jo=new WeakMap,Kn=new WeakSet,Ti=function(e,t){Ae(this,hn)&&(clearTimeout(Ae(this,hn)),cn(this,hn,0)),e&&(this.options.animation?cn(this,hn,window.setTimeout(e,t??this.options.transTime)):e())},At.NAME="Modal",At.MULTI_INSTANCE=!0,At.DEFAULT={position:"fit",show:!0,keyboard:!0,animation:!0,backdrop:!0,responsive:!0,transTime:300},At.zIndex=1500,m(window).on("resize.modal.zui",()=>{At.getAll().forEach(e=>{const t=e;t.shown&&t.options.responsive&&t.layout()})}),m(document).on("to-hide.modal.zui",(e,t)=>{At.hide(t==null?void 0:t.target)});class bh extends F{componentDidMount(){var t;(t=this.props.afterRender)==null||t.call(this,{firstRender:!0})}componentDidUpdate(){var t;(t=this.props.afterRender)==null||t.call(this,{firstRender:!1})}componentWillUnmount(){var t;(t=this.props.beforeDestroy)==null||t.call(this)}renderHeader(){const{header:t,headerClass:n,title:s}=this.props;return b.isValidElement(t)?t:t===!1||!s?null:f("div",{className:S("modal-header",n),children:f("div",{className:"modal-title",children:s})})}renderActions(){const{actions:t,closeBtn:n}=this.props;return!n&&!t?null:b.isValidElement(t)?t:f("div",{className:"modal-actions",children:[t?f(mt,{...t}):null,n?f("button",{type:"button",class:"btn square ghost","data-dismiss":"modal",children:f("span",{class:"close"})}):null]})}renderBody(){const{body:t,bodyClass:n}=this.props;return t?b.isValidElement(t)?t:f("div",{className:S("modal-body",n),children:t}):null}renderFooter(){const{footer:t,footerClass:n,footerActions:s}=this.props;return b.isValidElement(t)?t:t===!1||!s?null:f("div",{className:S("modal-footer",n),children:s?f(mt,{...s}):null})}render(){const{className:t,style:n,contentClass:s,children:i}=this.props;return f("div",{className:S("modal-dialog",t),style:n,children:f("div",{className:S("modal-content",s),children:[this.renderHeader(),this.renderActions(),this.renderBody(),i,this.renderFooter()]})})}}bh.defaultProps={closeBtn:!0};class Wf extends F{constructor(){super(...arguments);L(this,kn,void 0);L(this,xn,void 0);L(this,Sn,void 0);H(this,kn,j()),this.state={},H(this,Sn,()=>{var i,r;const n=(r=(i=$(this,kn).current)==null?void 0:i.contentWindow)==null?void 0:r.document;if(!n)return;let s=$(this,xn);s==null||s.disconnect(),s=new ResizeObserver(()=>{const o=n.body,a=n.documentElement,l=Math.ceil(Math.max(o.scrollHeight,o.offsetHeight,a.offsetHeight));this.setState({height:l})}),s.observe(n.body),s.observe(n.documentElement),H(this,xn,s)})}componentDidMount(){$(this,Sn).call(this)}componentWillUnmount(){var n;(n=$(this,xn))==null||n.disconnect()}render(){const{url:n}=this.props;return f("iframe",{className:"modal-iframe",style:this.state,src:n,ref:$(this,kn),onLoad:$(this,Sn)})}}kn=new WeakMap,xn=new WeakMap,Sn=new WeakMap;var Jo=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},xt=(e,t,n)=>(Jo(e,t,"read from private field"),n?n.call(e):t.get(e)),Xn=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},dn=(e,t,n,s)=>(Jo(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Ei=(e,t,n)=>(Jo(e,t,"access private method"),n),Yt,Jn,Kt,Ni,Zo,Ri,Qo;function Of(e,t){const{custom:n,title:s,content:i}=t;return{body:i,title:s,...typeof n=="function"?n():n}}async function Hf(e,t){const{dataType:n="html",url:s,request:i,custom:r,title:o,replace:a=!0,executeScript:l=!0}=t,c=await(await fetch(s,{headers:{"X-Requested-With":"XMLHttpRequest","X-ZUI-Modal":"true"},...i})).text();if(n!=="html")try{const d=JSON.parse(c);return{title:o,...r,...d}}catch{}return a!==!1&&n==="html"?[c]:{title:o,...r,body:n==="html"?f(Xs,{className:"modal-body",html:c,executeScript:l}):c}}async function Bf(e,t){const{url:n,custom:s,title:i}=t;return{title:i,...s,body:f(Wf,{url:n})}}const zf={custom:Of,ajax:Hf,iframe:Bf},ta="loading",Zn=class extends At{constructor(){super(...arguments),Xn(this,Ni),Xn(this,Ri),Xn(this,Yt,void 0),Xn(this,Jn,void 0),Xn(this,Kt,void 0)}get id(){return xt(this,Jn)}get loading(){var e;return(e=xt(this,Yt))==null?void 0:e.classList.contains(ta)}get shown(){var e;return!!((e=xt(this,Yt))!=null&&e.classList.contains("show"))}get modalElement(){let e=xt(this,Yt);if(!e){const{options:t}=this;let n=xt(this,Jn);n||(n=t.id||`modal-${m.guid++}`,dn(this,Jn,n));const{$element:s}=this;if(e=s.find(`#${n}`)[0],!e){const i=this.key;e=m("<div>").attr({id:n,"data-key":i}).data(this.constructor.KEY,this).css(t.style||{}).setClass("modal modal-async load-indicator",t.className).appendTo(s)[0]}dn(this,Yt,e)}return e}get $emitter(){const e=xt(this,Yt);return e?m(e):this.$element}afterInit(){super.afterInit(),this.on("hidden",()=>{this.options.destoryOnHide&&this.destroy()})}show(e){return super.show(e)?(this.buildDialog(),!0):!1}destroy(){super.destroy();const e=xt(this,Yt);e&&(m(e).removeData(this.constructor.KEY).remove(),dn(this,Yt,void 0))}render(e){super.render(e),this.buildDialog()}async buildDialog(){if(this.loading)return!1;xt(this,Kt)&&clearTimeout(xt(this,Kt));const{modalElement:e,options:t}=this,n=m(e),{type:s,loadTimeout:i,loadingText:r=null}=t,o=zf[s];if(!o)return console.warn(`Modal: Cannot build modal with type "${s}"`),!1;n.attr("data-loading",r).addClass(ta),i&&dn(this,Kt,window.setTimeout(()=>{dn(this,Kt,0),Ei(this,Ri,Qo).call(this,this.options.timeoutTip)},i));const a=await o.call(this,e,t);return a===!1?await Ei(this,Ri,Qo).call(this,this.options.failedTip):a&&typeof a=="object"&&await Ei(this,Ni,Zo).call(this,a),xt(this,Kt)&&(clearTimeout(xt(this,Kt)),dn(this,Kt,0)),this.layout(),await Rn(100),n.removeClass(ta),!0}static open(e){return new Promise(t=>{const{container:n=document.body,...s}=e,i={show:!0,...s};!i.type&&i.url&&(i.type="ajax");const r=Zn.ensure(n,i);r.one("hidden",()=>t(r)),r.show()})}static async alert(e){typeof e=="string"&&(e={message:e});const{type:t,message:n,icon:s,iconClass:i="icon-lg muted",actions:r="confirm",onClickAction:o,custom:a,key:l="__alert",...h}=e,c=(typeof a=="function"?a():a)||{};let d=typeof n=="object"&&n.html?f("div",{dangerouslySetInnerHTML:{__html:n.html}}):f("div",{children:n});s?d=f("div",{className:S("modal-body row gap-4 items-center",c.bodyClass),children:[f("div",{className:`icon ${s} ${i}`}),d]}):d=f("div",{className:S("modal-body",c.bodyClass),children:d});const u=[];(Array.isArray(r)?r:[r]).forEach(y=>{y={...typeof y=="string"?{key:y}:y},typeof y.key=="string"&&(y.text||(y.text=tt.getLang(y.key,y.key)),y.btnType||(y.btnType=`btn-wide ${y.key==="confirm"?"primary":"btn-default"}`)),y&&u.push(y)},[]);let p;const g=u.length?{gap:4,items:u,onClickItem:({item:y,event:w})=>{const v=Zn.query(w.target,l);p=y.key,(o==null?void 0:o(y,v))!==!1&&v&&v.hide()}}:void 0;return await Zn.open({key:l,type:"custom",size:400,className:"modal-alert",content:d,backdrop:"static",custom:{footerActions:g,...c},...h}),p}static async confirm(e){typeof e=="string"&&(e={message:e});const{onClickAction:t,onResult:n,...s}=e;return await Zn.alert({actions:["confirm","cancel"],onClickAction:(r,o)=>{n==null||n(r.key==="confirm",o),t==null||t(r,o)},...s})==="confirm"}};let ea=Zn;Yt=new WeakMap,Jn=new WeakMap,Kt=new WeakMap,Ni=new WeakSet,Zo=function(e){return new Promise(t=>{if(Array.isArray(e))return m(this.modalElement).html(e[0]),this.layout(),this._observeResize(),t();const{afterRender:n,...s}=e;e={afterRender:i=>{this.layout(),n==null||n(i),this._observeResize(),t()},...s},je(f(bh,{...e}),this.modalElement)})},Ri=new WeakSet,Qo=function(e){if(e)return Ei(this,Ni,Zo).call(this,{body:f("div",{className:"modal-load-failed",children:e})})},ea.DEFAULT={...At.DEFAULT,loadTimeout:1e4,destoryOnHide:!0};var na=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},sa=(e,t,n)=>(na(e,t,"read from private field"),n?n.call(e):t.get(e)),Ai=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ch=(e,t,n,s)=>(na(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),ia=(e,t,n)=>(na(e,t,"access private method"),n),De,ra,$h,oa,kh,aa,xh;const Ff='[data-toggle="modal"]';class la extends ct{constructor(){super(...arguments),Ai(this,ra),Ai(this,oa),Ai(this,aa),Ai(this,De,void 0)}get modal(){return sa(this,De)}get container(){const{container:t}=this.options;return typeof t=="string"?document.querySelector(t):t instanceof HTMLElement?t:document.body}show(){var t;return(t=ia(this,oa,kh).call(this))==null?void 0:t.show()}hide(){var t;return(t=sa(this,De))==null?void 0:t.hide()}}De=new WeakMap,ra=new WeakSet,$h=function(){const{container:e,...t}=this.options,n=t,s=this.$element.attr("href")||"";return n.type||(n.target||s[0]==="#"?n.type="static":n.type=n.type||(n.url||s?"ajax":"custom")),!n.url&&(n.type==="iframe"||n.type==="ajax")&&s[0]!=="#"&&(n.url=s),!n.key&&n.id&&(n.key=n.id),n},oa=new WeakSet,kh=function(){const e=ia(this,ra,$h).call(this);let t=sa(this,De);if(t)return t.setOptions(e),t;if(e.type==="static"){const n=ia(this,aa,xh).call(this);if(!n)return;t=At.ensure(n,e)}else t=ea.ensure(this.container,e);return Ch(this,De,t),t.on("destroyed",()=>{Ch(this,De,void 0)}),t},aa=new WeakSet,xh=function(){let e=this.options.target;if(!e){const{$element:t}=this;if(t.is("a")){const n=t.attr("href");n!=null&&n.startsWith("#")&&(e=n)}}return this.container.querySelector(e||".modal")},la.NAME="ModalTrigger",m(document).on("click.modal.zui",e=>{var s;const t=e.target,n=(s=t.closest)==null?void 0:s.call(t,Ff);if(n){const i=la.ensure(n);i&&(i.show(),e.preventDefault())}});const bm="";let Sh=class extends Se{beforeRender(){const t=super.beforeRender();return t.className=S(t.className,t.type?`nav-${t.type}`:"",{"nav-stacked":t.stacked}),t}};Sh.NAME="nav";class ca extends G{}ca.NAME="Nav",ca.Component=Sh;const Cm="";function Qn(e,t){const n=e.pageTotal||Math.ceil(e.recTotal/e.recPerPage);return typeof t=="string"&&(t==="first"?t=1:t==="last"?t=n:t==="prev"?t=e.page-1:t==="next"?t=e.page+1:t==="current"?t=e.page:t=Number.parseInt(t,10)),t=t!==void 0?Math.max(1,Math.min(t<0?n+t:t,n)):e.page,{...e,pageTotal:n,page:t}}function Vf({key:e,type:t,btnType:n,page:s,format:i,pagerInfo:r,linkCreator:o,...a}){const l=Qn(r,s);return a.text===void 0&&!a.icon&&i&&(a.text=typeof i=="function"?i(l):nt(i,l)),a.url===void 0&&o&&(a.url=typeof o=="function"?o(l):nt(o,l)),a.disabled===void 0&&(a.disabled=s!==void 0&&l.page===r.page),f(rt,{type:n,...a})}function Uf({key:e,type:t,page:n,text:s="",pagerInfo:i,children:r,...o}){const a=Qn(i,n);return s=typeof s=="function"?s(a):nt(s,a),f(Mc,{...o,children:[r,s]})}function qf({key:e,type:t,btnType:n,count:s=12,pagerInfo:i,onClick:r,linkCreator:o,...a}){if(!i.pageTotal)return;const l={...a,square:!0},h=()=>(l.text="",l.icon="icon-ellipsis-h",l.disabled=!0,f(rt,{type:n,...l})),c=(u,p)=>{const g=[];for(let y=u;y<=p;y++){l.text=y,delete l.icon,l.disabled=!1;const w=Qn(i,y);o&&(l.url=typeof o=="function"?o(w):nt(o,w)),g.push(f(rt,{type:n,...l,onClick:r}))}return g};let d=[];return d=[...c(1,1)],i.pageTotal<=1||(i.pageTotal<=s?d=[...d,...c(2,i.pageTotal)]:i.page<s-2?d=[...d,...c(2,s-2),h(),...c(i.pageTotal,i.pageTotal)]:i.page>i.pageTotal-s+3?d=[...d,h(),...c(i.pageTotal-s+3,i.pageTotal)]:d=[...d,h(),...c(i.page-Math.ceil((s-4)/2),i.page+Math.floor((s-4)/2)),h(),...c(i.pageTotal,i.pageTotal)]),d}function Gf({type:e,pagerInfo:t,linkCreator:n,items:s=[5,10,15,20,25,30,35,40,45,50,100,200,500,1e3,2e3],dropdown:i={},itemProps:r,...o}){var l;i.items=i.items??s.map(h=>{const c={...t,recPerPage:h};return{...r,text:`${h}`,active:h===t.recPerPage,url:typeof n=="function"?n(c):nt(n,c)}});const{text:a=""}=o;return o.text=typeof a=="function"?a(t):nt(a,t),i.menu={...i.menu,className:S((l=i.menu)==null?void 0:l.className,"pager-size-menu")},f(Zc,{type:"dropdown",dropdown:i,...o})}function Yf({key:e,page:t,type:n,btnType:s,pagerInfo:i,size:r,onClick:o,onChange:a,linkCreator:l,...h}){const c={...h};let d;const u=y=>{var w;d=Number((w=y.target)==null?void 0:w.value)||1,d=d>i.pageTotal?i.pageTotal:d},p=y=>{if(!(y!=null&&y.target))return;d=d<=i.pageTotal?d:i.pageTotal;const w=Qn(i,d);a&&!a({info:w,event:y})||(y.target.href=c.url=typeof l=="function"?l(w):nt(l,w))},g=Qn(i,t||0);return c.url=typeof l=="function"?l(g):nt(l,g),f("div",{className:S("input-group","pager-goto-group",r?`size-${r}`:""),children:[f("input",{type:"number",class:"form-control",max:i.pageTotal,min:"1",onInput:u}),f(rt,{type:s,...c,onClick:p})]})}let Pi=class extends mt{get pagerInfo(){const{page:t=1,recTotal:n=0,recPerPage:s=10}=this.props;return{page:t,recTotal:n,recPerPage:s,pageTotal:s?Math.ceil(n/s):0}}isBtnItem(t){return t==="link"||t==="nav"||t==="size-menu"||t==="goto"||super.isBtnItem(t)}getItemRenderProps(t,n,s){const i=super.getItemRenderProps(t,n,s),r=n.type||"item";return r==="info"?Object.assign(i,{pagerInfo:this.pagerInfo}):(r==="link"||r==="size-menu"||r==="nav"||r==="goto")&&Object.assign(i,{pagerInfo:this.pagerInfo,linkCreator:t.linkCreator}),i}};Pi.NAME="pager",Pi.defaultProps={btnProps:{btnType:"ghost",size:"sm"}},Pi.ItemComponents={...mt.ItemComponents,link:Vf,info:Uf,nav:qf,"size-menu":Gf,goto:Yf};class ha extends G{}ha.NAME="Pager",ha.Component=Pi;const $m="";class da extends G{}da.NAME="Pick",da.Component=gt;const km="",xm="";class Mh extends F{constructor(n){super(n);L(this,Mn,j());L(this,Ts,j());L(this,Es,n=>{var i,r;const s=n.target.value;(r=(i=this.props).onSearch)==null||r.call(i,s),this.setState({search:s})});L(this,ur,n=>{var s,i;n.stopPropagation(),(i=(s=this.props).onClear)==null||i.call(s),this.setState({search:""},()=>this.focus())});this.state={search:n.defaultSearch??""}}focus(){var n;(n=$(this,Mn).current)==null||n.focus()}componentDidMount(){this.focus()}componentDidUpdate(){const{inline:n}=this.props;if(n){const{current:s}=$(this,Ts),{current:i}=$(this,Mn);if(s&&i){const r=m(i).parent();r.width(Math.ceil(Math.min(s.clientWidth,r.closest(".picker").outerWidth()-32)))}}}render(n,s){const{placeholder:i,inline:r}=n,{search:o}=s,a=o.trim().length>0;let l;return r?l=f("div",{className:"picker-search-measure",ref:$(this,Ts),children:o}):a?l=f("button",{type:"button",className:"btn picker-search-clear square size-sm ghost",onClick:$(this,ur),children:f("span",{className:"close"})}):l=f("span",{className:"magnifier"}),f("div",{className:`picker-search${r?" is-inline":""}`,children:[f("input",{className:"form-control picker-search-input",type:"text",placeholder:i,value:o,onChange:$(this,Es),onInput:$(this,Es),ref:$(this,Mn)}),l]})}}Mn=new WeakMap,Ts=new WeakMap,Es=new WeakMap,ur=new WeakMap;class Kf extends Ao{constructor(){super(...arguments);L(this,Tn,void 0);L(this,Ns,void 0);L(this,Rs,void 0);L(this,As,void 0);H(this,Tn,j()),H(this,Ns,n=>{const{onDeselect:s,state:{selections:i}}=this.props,r=m(n.target).closest(".picker-deselect-btn").dataset("value");s&&i.length&&r&&s(r),n.stopPropagation()}),H(this,Rs,n=>{this.props.changeState({search:n})}),H(this,As,()=>{this.props.togglePop(!0,{search:""})}),this._renderSelection=n=>f("div",{className:"picker-multi-selection",children:[f("span",{className:"text",children:n.text??n.value}),this.props.disabled?null:f("div",{className:"picker-deselect-btn btn size-xs ghost",onClick:$(this,Ns),"data-value":n.value,children:f("span",{className:"close"})})]},n.value)}_handleClick(n){var s;super._handleClick(n),(s=$(this,Tn).current)==null||s.focus()}_getClass(n){return S(super._getClass(n),"picker-select picker-select-multi form-control",n.disabled?"disabled":"")}_renderSearch(n){const{state:{search:s},searchHint:i}=n;return f(Mh,{inline:!0,ref:$(this,Tn),defaultSearch:s,onSearch:$(this,Rs),onClear:$(this,As),placeholder:i})}_renderTrigger(n){const{state:{selections:s=[],open:i},search:r,placeholder:o,children:a}=this.props,l=i&&r;return!l&&!s.length?f("span",{className:"picker-select-placeholder",children:o},"selections"):[f("div",{className:"picker-multi-selections",children:[s.map(this._renderSelection),l?this._renderSearch(n):null]},"selections"),a,f("span",{class:"caret"},"caret")]}}Tn=new WeakMap,Ns=new WeakMap,Rs=new WeakMap,As=new WeakMap;class jf extends Ao{constructor(){super(...arguments);L(this,gr);L(this,Ps,j());L(this,fr,n=>{this.props.disabled&&(this.props.onClear(),this.props.togglePop(!0,{search:""}),n.stopPropagation())});L(this,pr,n=>{this.props.changeState({search:n})});L(this,mr,()=>{this.props.togglePop(!0,{search:""})})}_handleClick(n){var s;super._handleClick(n),(s=$(this,Ps).current)==null||s.focus()}_getClass(n){return S(super._getClass(n),"picker-select picker-select-single form-control",n.disabled?"disabled":"")}_renderSearch(n){const{state:{search:s}}=n;return f(Mh,{ref:$(this,Ps),defaultSearch:s,onSearch:$(this,pr),onClear:$(this,mr),placeholder:se(this,gr,zd).call(this)})}_renderTrigger(n){const{children:s,state:{selections:i=[],open:r},placeholder:o,search:a,disabled:l}=n,[h]=i,c=r&&a;let d;c?d=this._renderSearch(n):h?d=f("span",{className:"picker-single-selection",children:h.text??h.value},"main"):d=f("span",{className:"picker-select-placeholder",children:o},"main");const u=h&&!c?f("button",{type:"button",className:"btn picker-deselect-btn size-sm square ghost",disabled:l,onClick:$(this,fr),children:f("span",{className:"close"})},"deselect"):null;return[d,s,u,c?null:f("span",{className:"caret"},"caret")]}}Ps=new WeakMap,fr=new WeakMap,pr=new WeakMap,mr=new WeakMap,gr=new WeakSet,zd=function(){const{searchHint:n,state:{value:s,selections:i}}=this.props;let r=n;if(r===void 0){const o=i.find(a=>a.value===s);o&&typeof o.text=="string"?r=o.text:r=s}return r};const Xf=(e,t,n="is-match")=>e.reduce((s,i)=>[...s].reduce((r,o)=>{if(typeof o!="string")return r.push(o),r;const a=o.toLowerCase().split(i);if(a.length===1)return r.push(o),r;let l=0;return a.forEach((h,c)=>{c&&(r.push(f("span",{class:n,children:o.substring(l,l+i.length)})),l+=i.length),r.push(o.substring(l,l+h.length)),l+=h.length}),r},[]),t);class Jf extends dh{constructor(){super(...arguments);L(this,vr);L(this,wr);L(this,yr,j());L(this,_r,({item:n})=>{const s=n.key,{multiple:i,onToggleValue:r,onSelect:o,togglePop:a}=this.props;i?r(s):(o(s),a(!1,{search:""}))})}componentDidMount(){super.componentDidMount();const n=this.element;n&&m(n).on("mouseenter.picker.zui",".menu-item",s=>{const i=m(s.currentTarget);this.setHoverItem(i.children("a").dataset("value"))})}componentWillUnmount(){super.componentDidMount();const n=this.element;n&&m(n).off(".picker.zui")}setHoverItem(n){this.props.changeState({hoverItem:n},()=>{const s=se(this,vr,Fd).call(this);s!=null&&s.length&&s.scrollIntoView({block:"nearest",behavior:"smooth"})})}_getClass(n){return S(super._getClass(n),"picker-menu")}_renderPop(n){const{menu:s}=n;return f(le,{ref:$(this,yr),className:"picker-menu-list",items:se(this,wr,Vd).call(this),onClickItem:$(this,_r),...s})}}yr=new WeakMap,vr=new WeakSet,Fd=function(){const n=this.element;if(n)return m(n).find(".menu-item>a.hover")},wr=new WeakSet,Vd=function(){const{selections:n,items:s,hoverItem:i,search:r}=this.props.state,o=new Set(n.map(c=>c.value));let a=!1;const l=m.unique(r.toLowerCase().split(" ").filter(c=>c.length)),h=s.reduce((c,d)=>{const{value:u="",keys:p,text:g,className:y,...w}=d;u===i&&(a=!0);const v=g??u;return c.push({key:u,active:o.has(u),text:typeof v=="string"?Xf(l,[v]):f(Xe,{content:v}),className:S(y,{hover:u===i}),"data-value":u,...w}),c},[]);return!a&&h.length&&(h[0].className=S(h[0].className,"hover")),h},_r=new WeakMap;var ua=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Pt=(e,t,n)=>(ua(e,t,"read from private field"),n?n.call(e):t.get(e)),Le=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ue=(e,t,n,s)=>(ua(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),vt=(e,t,n)=>(ua(e,t,"access private method"),n),ts,jt,Ie,es,We,un,fa,Th,fe,Oe;let pa=class extends gt{constructor(t){super(t),Le(this,We),Le(this,fa),Le(this,fe),Le(this,ts,void 0),Le(this,jt,void 0),Le(this,Ie,0),Le(this,es,void 0),this.isEmptyValue=r=>Pt(this,es).has(r),this.toggleValue=(r,o)=>{if(!this.props.multiple)return o||r!==this.value?vt(this,fe,Oe).call(this,r):vt(this,fe,Oe).call(this);const{valueList:a}=this,l=a.indexOf(r);if(o!==l>=0)return l>-1?a.splice(l,1):a.push(r),vt(this,fe,Oe).call(this,a)},this.deselect=r=>{const{valueList:o}=this,a=new Set(vt(this,We,un).call(this,r)),l=o.filter(h=>!a.has(h));vt(this,fe,Oe).call(this,l)},this.clear=()=>{vt(this,fe,Oe).call(this)},this.select=r=>{const o=vt(this,We,un).call(this,r),a=this.props.multiple?[...this.valueList,...o]:o[0];return vt(this,fe,Oe).call(this,a)},this.isSelected=r=>this.valueList.includes(r),m.extend(this.state,{loading:!1,search:"",items:t.items,selections:[]});const{valueSplitter:n=",",emptyValue:s=""}=this.props;ue(this,es,new Set(s.split(n)));const{items:i}=t;if(Array.isArray(i)&&i.length){if(t.limitValueInList){const r=new Set(i.map(o=>o.value));this.state.value=this.valueList.filter(o=>r.has(o)).join(t.valueSplitter)}!this.valueList.length&&t.required&&!t.multiple&&(this.state.value=i[0].value)}}get value(){return this.state.value}get valueList(){return vt(this,We,un).call(this,this.state.value)}get firstEmptyValue(){return Pt(this,es).values().next().value}async load(){let t=Pt(this,jt);t&&t.abort(),t=new AbortController,ue(this,jt,t);const{items:n,searchDelay:s}=this.props,{search:i}=this.state;let r=[];if(typeof n=="function"){if(await Rn(s||500),Pt(this,jt)!==t||(r=await n(i,{signal:t.signal}),Pt(this,jt)!==t))return r}else if(i.length){const o=m.unique(i.toLowerCase().split(" ").filter(a=>a.length));o.length?r=n.reduce((a,l)=>{const{value:h,keys:c="",text:d}=l;return o.every(u=>h.toLowerCase().includes(u)||c.toLowerCase().includes(u)||typeof d=="string"&&d.toLowerCase().includes(u))&&a.push(l),a},[]):r=n}else r=n;return ue(this,jt,void 0),r}async update(t){const{state:n,props:s}=this,i=Pt(this,ts)||{},r={};if(ue(this,ts,i),(t||i.search!==n.search||s.items!==i.items)&&(r.items=(await this.load()).filter(a=>!this.isEmptyValue(a.value)),r.loading=!1,i.items=s.items,i.search=n.search),t||i.value!==n.value){const a=r.items||n.items,l=new Map(a.map(h=>[h.value,h]));r.selections=this.valueList.reduce((h,c)=>(this.isEmptyValue(c)||h.push(l.get(c)||{value:c}),h),[]),i.value=n.value}const o=r.items;s.required&&!s.multiple&&this.isEmptyValue(this.state.value)&&Array.isArray(o)&&o.length&&(r.value=o[0].value),Object.keys(r).length&&await this.changeState(r)}async tryUpdate(){Pt(this,Ie)&&clearTimeout(Pt(this,Ie)),ue(this,Ie,window.setTimeout(()=>{ue(this,Ie,0),this.update()},50))}componentDidUpdate(t,n){super.componentDidUpdate(t,n),this.tryUpdate()}componentDidMount(){super.componentDidMount(),this.tryUpdate()}componentWillUnmount(){var t;(t=Pt(this,jt))==null||t.abort(),ue(this,jt,void 0),ue(this,ts,void 0),clearTimeout(Pt(this,Ie)),super.componentWillUnmount()}_getTriggerProps(t,n){return{...super._getTriggerProps(t,n),multiple:t.multiple,placeholder:t.placeholder,search:t.search,searchHint:t.searchHint,disabled:t.disabled,onDeselect:this.deselect,onSelect:this.select,onClear:this.clear,onToggleValue:this.toggleValue}}_getPopProps(t,n){return{...super._getPopProps(t,n),menu:t.menu,multiple:t.multiple,search:t.search,searchHint:t.searchHint,onDeselect:this.deselect,onSelect:this.select,onClear:this.clear,onToggleValue:this.toggleValue}}_getTrigger(t){return t.Trigger||(t.multiple?Kf:jf)}};ts=new WeakMap,jt=new WeakMap,Ie=new WeakMap,es=new WeakMap,We=new WeakSet,un=function(e){let t=[];return typeof e=="string"&&e.length?t=m.unique(e.split(this.props.valueSplitter??",")):Array.isArray(e)&&(t=m.unique(e)),t.filter(n=>!this.isEmptyValue(n))},fa=new WeakSet,Th=function(e){const t=vt(this,We,un).call(this,e);return t.length?t.join(this.props.valueSplitter??","):this.firstEmptyValue},fe=new WeakSet,Oe=function(e=[]){if(this.props.disabled||!vt(this,We,un).call(this,e).length&&this.props.required)return;const n=vt(this,fa,Th).call(this,e);if(n!==this.state.value)return this.changeState({value:n})},pa.defaultProps={...gt.defaultProps,className:"picker",valueSplitter:",",limitValueInList:!0,search:!0,emptyValue:""},pa.Pop=Jf;class ma extends G{}ma.NAME="Picker",ma.Component=pa;class ga extends ct{constructor(){super(...arguments),this.cleanup=()=>{},this.toggle=()=>{}}init(){this.initTarget(),this.initMask(),this.initArrow(),this.createPopper(),this.toggle=()=>{if(this.$target.hasClass("hidden")){this.show();return}this.hide()},this.$element.addClass("z-50").on("click",this.toggle)}destroy(){this.cleanup(),this.$element.off("click",this.toggle),this.$target.remove()}computePositionConfig(){const{placement:t,strategy:n}=this.options,s={placement:t,strategy:n,middleware:[]},{flip:i,shift:r,arrow:o,offset:a}=this.options;return i&&s.middleware.push(ri()),r&&s.middleware.push(r===!0?ai():ai(r)),o&&s.middleware.push(ao({element:this.$arrow[0]})),a&&s.middleware.push(oi(a)),s}createPopper(){const t=this.element,n=this.$target[0];this.cleanup=po(t,n,()=>{fi(t,n,this.computePositionConfig()).then(({x:s,y:i,placement:r,middlewareData:o})=>{if(Object.assign(n.style,{left:`${s}px`,top:`${i}px`}),!ao||!o.arrow)return;const{x:a,y:l}=o.arrow,h={top:"bottom",right:"left",bottom:"top",left:"right"}[r.split("-")[0]];Object.assign(this.$arrow[0].style,{left:a!=null?`${a}px`:"",top:l!=null?`${l}px`:"",right:"",bottom:"",[h]:"-4px"})})})}initTarget(){const t=this.$element.data("target");if(!t)throw new Error("popsvers trigger must have target.");const n=m(t);if(!n.length)throw new Error("popovers target must exist.");const{strategy:s}=this.options;n.addClass(s),n.addClass("hidden"),n.addClass("z-50"),n.on("click",i=>{m(i.target).data("dismiss")==="popovers"&&this.hide()}),this.$target=n}show(){this.$target.removeClass("hidden"),this.$mask.removeClass("hidden")}hide(){this.$target.addClass("hidden"),this.$mask.addClass("hidden")}initMask(){const t=m('<div class="fixed top-0 right-0 bottom-0 left-0 z-40 hidden"></div>');t.on("click",()=>{this.hide()}),this.$target.parent().append(t),this.$mask=t}initArrow(){const{arrow:t}=this.options;t&&(this.$arrow=m('<div class="fl-arrow bg-inherit rotate-45 absolute w-2 h-2"></div>'),this.$target.append(this.$arrow))}}ga.NAME="Popovers",ga.DEFAULT={placement:"bottom",strategy:"fixed",flip:!0,shift:{padding:5},arrow:!1,offset:1};const Sm="";var ya=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Dt=(e,t,n)=>(ya(e,t,"read from private field"),n?n.call(e):t.get(e)),He=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Di=(e,t,n,s)=>(ya(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Eh=(e,t,n)=>(ya(e,t,"access private method"),n),Li,Ii,Be,va,Wi,Oi,Hi,wa;let Nh=class extends F{constructor(t){super(t),He(this,Hi),He(this,Li,void 0),He(this,Ii,j()),He(this,Be,0),He(this,va,n=>{const s=this.state.value;n.stopPropagation(),this.setState({value:""},()=>{const{onChange:i,onClear:r}=this.props;r==null||r(n),this.focus(),s.trim()!==""&&(i==null||i("",n))})}),He(this,Wi,n=>{const s=this.state.value,i=n.target.value,{onChange:r}=this.props;this.setState({value:i},()=>{!r||s===i||(Eh(this,Hi,wa).call(this),Di(this,Be,window.setTimeout(()=>{r(i,n),Di(this,Be,0)},this.props.delay||0)))})}),He(this,Oi,n=>{const s=n.type==="focus";this.setState({focus:s},()=>{const i=s?this.props.onFocus:this.props.onBlur;i==null||i(n)})}),this.state={focus:!1,value:t.defaultValue||""},Di(this,Li,t.id||`search-box-${m.guid++}`)}get id(){return Dt(this,Li)}get input(){return Dt(this,Ii).current}focus(){var t;(t=this.input)==null||t.focus()}componentWillUnmount(){Eh(this,Hi,wa).call(this)}render(t,n){const{style:s,className:i,rootClass:r,rootStyle:o,readonly:a,disabled:l,circle:h,placeholder:c,mergeIcon:d,searchIcon:u,clearIcon:p}=t,{focus:g,value:y}=n,{id:w}=this,v=typeof y!="string"||!y.trim().length;let _,C,N;return u&&(N=u===!0?f("span",{class:"magnifier"}):f(st,{icon:u})),!d&&u&&(_=f("label",{for:w,class:"input-control-prefix",children:N},"prefix")),p&&!v?C=f("button",{type:"button",class:"btn ghost size-sm square rounded-full",onClick:Dt(this,va),children:p===!0?f("span",{class:"close"}):f(st,{icon:p})}):d&&u&&(C=N),C&&(C=f("label",{for:w,class:"input-control-suffix",children:C},"suffix")),f("div",{class:S("search-box input-control",r,{focus:g,empty:v,"has-prefix-icon":_,"has-suffix-icon":C}),style:o,children:[_,f("input",{ref:Dt(this,Ii),id:w,type:"text",class:S("form-control",i,{"rounded-full":h}),style:s,placeholder:c,disabled:l,readonly:a,value:y,onInput:Dt(this,Wi),onChange:Dt(this,Wi),onFocus:Dt(this,Oi),onBlur:Dt(this,Oi)}),C]})}};Li=new WeakMap,Ii=new WeakMap,Be=new WeakMap,va=new WeakMap,Wi=new WeakMap,Oi=new WeakMap,Hi=new WeakSet,wa=function(){Dt(this,Be)&&clearTimeout(Dt(this,Be)),Di(this,Be,0)},Nh.defaultProps={clearIcon:!0,searchIcon:!0,delay:500};class _a extends G{}_a.NAME="SearchBox",_a.Component=Nh;const Mm="",Tm="";class ba extends G{}ba.NAME="Toolbar",ba.Component=mt;const Em="";function ns(e){return e.split("-")[1]}function Ca(e){return e==="y"?"height":"width"}function fn(e){return e.split("-")[0]}function Bi(e){return["top","bottom"].includes(fn(e))?"x":"y"}function Rh(e,t,n){let{reference:s,floating:i}=e;const r=s.x+s.width/2-i.width/2,o=s.y+s.height/2-i.height/2,a=Bi(t),l=Ca(a),h=s[l]/2-i[l]/2,c=a==="x";let d;switch(fn(t)){case"top":d={x:r,y:s.y-i.height};break;case"bottom":d={x:r,y:s.y+s.height};break;case"right":d={x:s.x+s.width,y:o};break;case"left":d={x:s.x-i.width,y:o};break;default:d={x:s.x,y:s.y}}switch(ns(t)){case"start":d[a]-=h*(n&&c?-1:1);break;case"end":d[a]+=h*(n&&c?-1:1)}return d}const Zf=async(e,t,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:r=[],platform:o}=n,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let h=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=Rh(h,s,l),u=s,p={},g=0;for(let y=0;y<a.length;y++){const{name:w,fn:v}=a[y],{x:_,y:C,data:N,reset:x}=await v({x:c,y:d,initialPlacement:s,placement:u,strategy:i,middlewareData:p,rects:h,platform:o,elements:{reference:e,floating:t}});c=_??c,d=C??d,p={...p,[w]:{...p[w],...N}},x&&g<=50&&(g++,typeof x=="object"&&(x.placement&&(u=x.placement),x.rects&&(h=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:c,y:d}=Rh(h,u,l)),y=-1)}return{x:c,y:d,placement:u,strategy:i,middlewareData:p}};function Ah(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function zi(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function Qf(e,t){var n;t===void 0&&(t={});const{x:s,y:i,platform:r,rects:o,elements:a,strategy:l}=e,{boundary:h="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:u=!1,padding:p=0}=t,g=Ah(p),y=a[u?d==="floating"?"reference":"floating":d],w=zi(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(y)))==null||n?y:y.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:h,rootBoundary:c,strategy:l})),v=d==="floating"?{...o.floating,x:s,y:i}:o.reference,_=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),C=await(r.isElement==null?void 0:r.isElement(_))&&await(r.getScale==null?void 0:r.getScale(_))||{x:1,y:1},N=zi(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:_,strategy:l}):v);return{top:(w.top-N.top+g.top)/C.y,bottom:(N.bottom-w.bottom+g.bottom)/C.y,left:(w.left-N.left+g.left)/C.x,right:(N.right-w.right+g.right)/C.x}}const tp=Math.min,ep=Math.max;function np(e,t,n){return ep(e,tp(t,n))}const sp=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:s=0}=e||{},{x:i,y:r,placement:o,rects:a,platform:l}=t;if(n==null)return{};const h=Ah(s),c={x:i,y:r},d=Bi(o),u=Ca(d),p=await l.getDimensions(n),g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=a.reference[u]+a.reference[d]-c[d]-a.floating[u],v=c[d]-a.reference[d],_=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let C=_?d==="y"?_.clientHeight||0:_.clientWidth||0:0;C===0&&(C=a.floating[u]);const N=w/2-v/2,x=h[g],E=C-p[u]-h[y],A=C/2-p[u]/2+N,D=np(x,A,E),B=ns(o)!=null&&A!=D&&a.reference[u]/2-(A<x?h[g]:h[y])-p[u]/2<0;return{[d]:c[d]-(B?A<x?x-A:E-A:0),data:{[d]:D,centerOffset:A-D}}}});["top","right","bottom","left"].reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const ip={left:"right",right:"left",bottom:"top",top:"bottom"};function Fi(e){return e.replace(/left|right|bottom|top/g,t=>ip[t])}function rp(e,t,n){n===void 0&&(n=!1);const s=ns(e),i=Bi(e),r=Ca(i);let o=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=Fi(o)),{main:o,cross:Fi(o)}}const op={start:"end",end:"start"};function $a(e){return e.replace(/start|end/g,t=>op[t])}const ap=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:s,middlewareData:i,rects:r,initialPlacement:o,platform:a,elements:l}=t,{mainAxis:h=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...y}=e,w=fn(s),v=fn(o)===o,_=await(a.isRTL==null?void 0:a.isRTL(l.floating)),C=d||(v||!g?[Fi(o)]:function(M){const P=Fi(M);return[$a(M),P,$a(P)]}(o));d||p==="none"||C.push(...function(M,P,I,T){const W=ns(M);let O=function(q,ft,Ls){const kr=["left","right"],Is=["right","left"],xr=["top","bottom"],bl=["bottom","top"];switch(q){case"top":case"bottom":return Ls?ft?Is:kr:ft?kr:Is;case"left":case"right":return ft?xr:bl;default:return[]}}(fn(M),I==="start",T);return W&&(O=O.map(q=>q+"-"+W),P&&(O=O.concat(O.map($a)))),O}(o,g,p,_));const N=[o,...C],x=await Qf(t,y),E=[];let A=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&E.push(x[w]),c){const{main:M,cross:P}=rp(s,r,_);E.push(x[M],x[P])}if(A=[...A,{placement:s,overflows:E}],!E.every(M=>M<=0)){var D;const M=(((D=i.flip)==null?void 0:D.index)||0)+1,P=N[M];if(P)return{data:{index:M,overflows:A},reset:{placement:P}};let I="bottom";switch(u){case"bestFit":{var B;const T=(B=A.map(W=>[W,W.overflows.filter(O=>O>0).reduce((O,q)=>O+q,0)]).sort((W,O)=>W[1]-O[1])[0])==null?void 0:B[0].placement;T&&(I=T);break}case"initialPlacement":I=o}if(s!==I)return{reset:{placement:I}}}return{}}}},lp=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:s}=t,i=await async function(r,o){const{placement:a,platform:l,elements:h}=r,c=await(l.isRTL==null?void 0:l.isRTL(h.floating)),d=fn(a),u=ns(a),p=Bi(a)==="x",g=["left","top"].includes(d)?-1:1,y=c&&p?-1:1,w=typeof o=="function"?o(r):o;let{mainAxis:v,crossAxis:_,alignmentAxis:C}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...w};return u&&typeof C=="number"&&(_=u==="end"?-1*C:C),p?{x:_*y,y:v*g}:{x:v*g,y:_*y}}(t,e);return{x:n+i.x,y:s+i.y,data:i}}}};function wt(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Lt(e){return wt(e).getComputedStyle(e)}function pe(e){return Dh(e)?(e.nodeName||"").toLowerCase():""}let Vi;function Ph(){if(Vi)return Vi;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Vi=e.brands.map(t=>t.brand+"/"+t.version).join(" "),Vi):navigator.userAgent}function Xt(e){return e instanceof wt(e).HTMLElement}function St(e){return e instanceof wt(e).Element}function Dh(e){return e instanceof wt(e).Node}function Lh(e){return typeof ShadowRoot>"u"?!1:e instanceof wt(e).ShadowRoot||e instanceof ShadowRoot}function Ui(e){const{overflow:t,overflowX:n,overflowY:s,display:i}=Lt(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(i)}function cp(e){return["table","td","th"].includes(pe(e))}function ka(e){const t=/firefox/i.test(Ph()),n=Lt(e),s=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!s&&s!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const r=n.contain;return r!=null&&r.includes(i)})}function Ih(){return!/^((?!chrome|android).)*safari/i.test(Ph())}function xa(e){return["html","body","#document"].includes(pe(e))}const Wh=Math.min,ss=Math.max,qi=Math.round;function Oh(e){const t=Lt(e);let n=parseFloat(t.width),s=parseFloat(t.height);const i=e.offsetWidth,r=e.offsetHeight,o=qi(n)!==i||qi(s)!==r;return o&&(n=i,s=r),{width:n,height:s,fallback:o}}function Hh(e){return St(e)?e:e.contextElement}const Bh={x:1,y:1};function pn(e){const t=Hh(e);if(!Xt(t))return Bh;const n=t.getBoundingClientRect(),{width:s,height:i,fallback:r}=Oh(t);let o=(r?qi(n.width):n.width)/s,a=(r?qi(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function ze(e,t,n,s){var i,r;t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=Hh(e);let l=Bh;t&&(s?St(s)&&(l=pn(s)):l=pn(e));const h=a?wt(a):window,c=!Ih()&&n;let d=(o.left+(c&&((i=h.visualViewport)==null?void 0:i.offsetLeft)||0))/l.x,u=(o.top+(c&&((r=h.visualViewport)==null?void 0:r.offsetTop)||0))/l.y,p=o.width/l.x,g=o.height/l.y;if(a){const y=wt(a),w=s&&St(s)?wt(s):s;let v=y.frameElement;for(;v&&s&&w!==y;){const _=pn(v),C=v.getBoundingClientRect(),N=getComputedStyle(v);C.x+=(v.clientLeft+parseFloat(N.paddingLeft))*_.x,C.y+=(v.clientTop+parseFloat(N.paddingTop))*_.y,d*=_.x,u*=_.y,p*=_.x,g*=_.y,d+=C.x,u+=C.y,v=wt(v).frameElement}}return{width:p,height:g,top:u,right:d+p,bottom:u+g,left:d,x:d,y:u}}function me(e){return((Dh(e)?e.ownerDocument:e.document)||window.document).documentElement}function Gi(e){return St(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function zh(e){return ze(me(e)).left+Gi(e).scrollLeft}function hp(e,t,n){const s=Xt(t),i=me(t),r=ze(e,!0,n==="fixed",t);let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(s||!s&&n!=="fixed")if((pe(t)!=="body"||Ui(i))&&(o=Gi(t)),Xt(t)){const l=ze(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}else i&&(a.x=zh(i));return{x:r.left+o.scrollLeft-a.x,y:r.top+o.scrollTop-a.y,width:r.width,height:r.height}}function is(e){if(pe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||(Lh(e)?e.host:null)||me(e);return Lh(t)?t.host:t}function Fh(e){return Xt(e)&&Lt(e).position!=="fixed"?e.offsetParent:null}function Vh(e){const t=wt(e);let n=Fh(e);for(;n&&cp(n)&&Lt(n).position==="static";)n=Fh(n);return n&&(pe(n)==="html"||pe(n)==="body"&&Lt(n).position==="static"&&!ka(n))?t:n||function(s){let i=is(s);for(;Xt(i)&&!xa(i);){if(ka(i))return i;i=is(i)}return null}(e)||t}function Uh(e){const t=is(e);return xa(t)?e.ownerDocument.body:Xt(t)&&Ui(t)?t:Uh(t)}function rs(e,t){var n;t===void 0&&(t=[]);const s=Uh(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),r=wt(s);return i?t.concat(r,r.visualViewport||[],Ui(s)?s:[]):t.concat(s,rs(s))}function qh(e,t,n){return t==="viewport"?zi(function(s,i){const r=wt(s),o=me(s),a=r.visualViewport;let l=o.clientWidth,h=o.clientHeight,c=0,d=0;if(a){l=a.width,h=a.height;const u=Ih();(u||!u&&i==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}return{width:l,height:h,x:c,y:d}}(e,n)):St(t)?function(s,i){const r=ze(s,!0,i==="fixed"),o=r.top+s.clientTop,a=r.left+s.clientLeft,l=Xt(s)?pn(s):{x:1,y:1},h=s.clientWidth*l.x,c=s.clientHeight*l.y,d=a*l.x,u=o*l.y;return{top:u,left:d,right:d+h,bottom:u+c,x:d,y:u,width:h,height:c}}(t,n):zi(function(s){var i;const r=me(s),o=Gi(s),a=(i=s.ownerDocument)==null?void 0:i.body,l=ss(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),h=ss(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let c=-o.scrollLeft+zh(s);const d=-o.scrollTop;return Lt(a||r).direction==="rtl"&&(c+=ss(r.clientWidth,a?a.clientWidth:0)-l),{width:l,height:h,x:c,y:d}}(me(e)))}const dp={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:s,strategy:i}=e;const r=n==="clippingAncestors"?function(h,c){const d=c.get(h);if(d)return d;let u=rs(h).filter(w=>St(w)&&pe(w)!=="body"),p=null;const g=Lt(h).position==="fixed";let y=g?is(h):h;for(;St(y)&&!xa(y);){const w=Lt(y),v=ka(y);(g?v||p:v||w.position!=="static"||!p||!["absolute","fixed"].includes(p.position))?p=w:u=u.filter(_=>_!==y),y=is(y)}return c.set(h,u),u}(t,this._c):[].concat(n),o=[...r,s],a=o[0],l=o.reduce((h,c)=>{const d=qh(t,c,i);return h.top=ss(d.top,h.top),h.right=Wh(d.right,h.right),h.bottom=Wh(d.bottom,h.bottom),h.left=ss(d.left,h.left),h},qh(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:s}=e;const i=Xt(n),r=me(n);if(n===r)return t;let o={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((i||!i&&s!=="fixed")&&((pe(n)!=="body"||Ui(r))&&(o=Gi(n)),Xt(n))){const h=ze(n);a=pn(n),l.x=h.x+n.clientLeft,l.y=h.y+n.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-o.scrollLeft*a.x+l.x,y:t.y*a.y-o.scrollTop*a.y+l.y}},isElement:St,getDimensions:function(e){return Oh(e)},getOffsetParent:Vh,getDocumentElement:me,getScale:pn,async getElementRects(e){let{reference:t,floating:n,strategy:s}=e;const i=this.getOffsetParent||Vh,r=this.getDimensions;return{reference:hp(t,await i(n),s),floating:{x:0,y:0,...await r(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>Lt(e).direction==="rtl"};function up(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:o=!0,animationFrame:a=!1}=s,l=i&&!a,h=l||r?[...St(e)?rs(e):e.contextElement?rs(e.contextElement):[],...rs(t)]:[];h.forEach(p=>{l&&p.addEventListener("scroll",n,{passive:!0}),r&&p.addEventListener("resize",n)});let c,d=null;if(o){let p=!0;d=new ResizeObserver(()=>{p||n(),p=!1}),St(e)&&!a&&d.observe(e),St(e)||!e.contextElement||a||d.observe(e.contextElement),d.observe(t)}let u=a?ze(e):null;return a&&function p(){const g=ze(e);!u||g.x===u.x&&g.y===u.y&&g.width===u.width&&g.height===u.height||n(),u=g,c=requestAnimationFrame(p)}(),n(),()=>{var p;h.forEach(g=>{l&&g.removeEventListener("scroll",n),r&&g.removeEventListener("resize",n)}),(p=d)==null||p.disconnect(),d=null,a&&cancelAnimationFrame(c)}}const fp=(e,t,n)=>{const s=new Map,i={platform:dp,...n},r={...i.platform,_c:s};return Zf(e,t,{...i,platform:r})};var Sa=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},U=(e,t,n)=>(Sa(e,t,"read from private field"),n?n.call(e):t.get(e)),et=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Fe=(e,t,n,s)=>(Sa(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),It=(e,t,n)=>(Sa(e,t,"access private method"),n),os,as,ls,mn,ht,Ma,Yi,Ki,Ta,Ea,Gh,Na,Yh,Ra,Kh,Aa,jh,Pa,Xh,Da,Jh,La,Zh,cs,Ia,Qh;const gn=class extends ct{constructor(){super(...arguments),et(this,Ki),et(this,Ea),et(this,Na),et(this,Ra),et(this,Aa),et(this,Pa),et(this,Da),et(this,La),et(this,Ia),et(this,os,!1),et(this,as,void 0),et(this,ls,0),et(this,mn,void 0),et(this,ht,void 0),et(this,Ma,void 0),et(this,Yi,void 0),this.hideLater=()=>{U(this,cs).call(this),Fe(this,ls,window.setTimeout(this.hide.bind(this),100))},et(this,cs,()=>{clearTimeout(U(this,ls)),Fe(this,ls,0)})}get isShown(){var e;return(e=U(this,mn))==null?void 0:e.classList.contains(gn.CLASS_SHOW)}get tooltip(){return U(this,mn)||It(this,Na,Yh).call(this)}get trigger(){return U(this,Ma)||this.element}get isHover(){return this.options.trigger==="hover"}get elementShowClass(){return`with-${gn.NAME}-show`}get isDynamic(){return this.options.title}init(){const{element:e}=this;e!==document.body&&!e.hasAttribute("data-toggle")&&e.setAttribute("data-toggle","tooltip")}show(e){return this.setOptions(e),!U(this,os)&&this.isHover&&It(this,Ia,Qh).call(this),this.options.animation&&this.tooltip.classList.add("fade"),this.element.classList.add(this.elementShowClass),this.tooltip.classList.add(gn.CLASS_SHOW),It(this,Da,Jh).call(this),!0}hide(){var t;var e;return(e=U(this,Yi))==null||e.call(this),this.element.classList.remove(this.elementShowClass),(t=U(this,mn))==null||t.classList.remove(gn.CLASS_SHOW),!0}toggle(e){return this.isShown?this.hide():this.show(e)}destroy(){U(this,os)&&(this.element.removeEventListener("mouseleave",this.hideLater),this.tooltip.removeEventListener("mouseenter",U(this,cs)),this.tooltip.removeEventListener("mouseleave",this.hideLater)),super.destroy()}static clear(e={}){e instanceof Event&&(e={event:e});const{exclude:t}=e;if(t){const n=this.getAll(),s=new Set(t);for(const i of n)s.has(i.element)||i.hide()}}};let dt=gn;os=new WeakMap,as=new WeakMap,ls=new WeakMap,mn=new WeakMap,ht=new WeakMap,Ma=new WeakMap,Yi=new WeakMap,Ki=new WeakSet,Ta=function(){const{arrow:e}=this.options;return typeof e=="number"?e:8},Ea=new WeakSet,Gh=function(){const e=It(this,Ki,Ta).call(this);return Fe(this,ht,document.createElement("div")),U(this,ht).style.position=this.options.strategy,U(this,ht).style.width=`${e}px`,U(this,ht).style.height=`${e}px`,U(this,ht).style.transform="rotate(45deg)",U(this,ht)},Na=new WeakSet,Yh=function(){var n;const e=gn.TOOLTIP_CLASS;let t;if(this.isDynamic){t=document.createElement("div");const s=this.options.className?this.options.className.split(" "):[];let i=[e,this.options.type||""];i=i.concat(s),t.classList.add(...i),t[this.options.html?"innerHTML":"innerText"]=this.options.title||""}else if(this.element){const s=this.element.getAttribute("href")??this.element.dataset.target;if(s!=null&&s.startsWith("#")&&(t=document.querySelector(s)),!t){const i=this.element.nextElementSibling;i!=null&&i.classList.contains(e)?t=i:t=(n=this.element.parentNode)==null?void 0:n.querySelector(`.${e}`)}}if(this.options.arrow&&(t==null||t.append(It(this,Ea,Gh).call(this))),!t)throw new Error("Tooltip: Cannot find tooltip element");return t.style.width="max-content",t.style.position="absolute",t.style.top="0",t.style.left="0",document.body.appendChild(t),Fe(this,mn,t),t},Ra=new WeakSet,Kh=function(){var i;const e=It(this,Ki,Ta).call(this),{strategy:t,placement:n}=this.options,s={middleware:[lp(e),ap()],strategy:t,placement:n};return this.options.arrow&&U(this,ht)&&((i=s.middleware)==null||i.push(sp({element:U(this,ht)}))),s},Aa=new WeakSet,jh=function(e){return{top:"bottom",right:"left",bottom:"top",left:"right"}[e]},Pa=new WeakSet,Xh=function(e){return e==="bottom"?{borderBottomStyle:"none",borderRightStyle:"none"}:e==="top"?{borderTopStyle:"none",borderLeftStyle:"none"}:e==="left"?{borderBottomStyle:"none",borderLeftStyle:"none"}:{borderTopStyle:"none",borderRightStyle:"none"}},Da=new WeakSet,Jh=function(){const e=It(this,Ra,Kh).call(this),t=It(this,La,Zh).call(this);Fe(this,Yi,up(t,this.tooltip,()=>{this.element&&fp(t,this.tooltip,e).then(({x:n,y:s,middlewareData:i,placement:r})=>{Object.assign(this.tooltip.style,{left:`${n}px`,top:`${s}px`});const o=r.split("-")[0],a=It(this,Aa,jh).call(this,o);if(i.arrow&&U(this,ht)){const{x:l,y:h}=i.arrow;Object.assign(U(this,ht).style,{left:l!=null?`${l}px`:"",top:h!=null?`${h}px`:"",[a]:`${-U(this,ht).offsetWidth/2}px`,background:"inherit",border:"inherit",...It(this,Pa,Xh).call(this,o)})}})}))},La=new WeakSet,Zh=function(){return U(this,as)||Fe(this,as,{getBoundingClientRect:()=>{const{element:e}=this;if(e instanceof MouseEvent){const{clientX:t,clientY:n}=e;return{width:0,height:0,top:n,right:t,bottom:n,left:t}}return e instanceof HTMLElement?e.getBoundingClientRect():e},contextElement:this.element}),U(this,as)},cs=new WeakMap,Ia=new WeakSet,Qh=function(){const{tooltip:e}=this;e.addEventListener("mouseenter",U(this,cs)),e.addEventListener("mouseleave",this.hideLater),this.element.addEventListener("mouseleave",this.hideLater),Fe(this,os,!0)},dt.NAME="tooltip",dt.TOOLTIP_CLASS="tooltip",dt.CLASS_SHOW="show",dt.MENU_SELECTOR='[data-toggle="tooltip"]:not(.disabled):not(:disabled)',dt.DEFAULT={animation:!0,placement:"top",strategy:"absolute",trigger:"hover",type:"darker",arrow:!0},document.addEventListener("click",function(e){var s;const t=e.target,n=(s=t.closest)==null?void 0:s.call(t,dt.MENU_SELECTOR);if(n){const i=dt.ensure(n);i.options.trigger==="click"&&i.toggle()}else dt.clear({event:e})}),document.addEventListener("mouseover",function(e){var i;const t=e.target,n=(i=t.closest)==null?void 0:i.call(t,dt.MENU_SELECTOR);if(!n)return;const s=dt.ensure(n);s.isHover&&s.show()});function pp({type:e,component:t,className:n,children:s,content:i,style:r,attrs:o,url:a,disabled:l,active:h,icon:c,text:d,target:u,trailingIcon:p,hint:g,checked:y,actions:w,show:v,level:_=0,items:C,...N}){const x=Array.isArray(w)?{items:w}:w;return x&&(x.btnProps||(x.btnProps={size:"sm"}),x.className=S("tree-actions not-nested-toggle",x.className)),f("div",{className:S("tree-item-content",n,{disabled:l,active:h}),title:g,"data-target":u,style:Object.assign({paddingLeft:`calc(${_} * var(--tree-indent, 20px))`},r),"data-level":_,...o,...N,children:[f("span",{class:`tree-toggle-icon${C?" state":""}`,children:C?f("span",{class:`caret-${v?"down":"right"}`}):null}),typeof y=="boolean"?f("div",{class:`tree-checkbox checkbox-primary${y?" checked":""}`,children:f("label",{})}):null,f(st,{icon:c,className:"tree-icon"}),a?f("a",{className:"text tree-link not-nested-toggle",href:a,children:d}):f("span",{class:"text",children:d}),f(Xe,{content:i}),s,x?f(mt,{...x}):null,f(st,{icon:p,className:"tree-trailing-icon"})]})}let Wa=class extends ni{get nestedTrigger(){return this.props.nestedTrigger||"click"}get menuName(){return"tree"}getNestedMenuProps(t){const n=super.getNestedMenuProps(t),{collapsedIcon:s,expandedIcon:i,normalIcon:r,itemActions:o}=this.props;return{collapsedIcon:s,expandedIcon:i,normalIcon:r,itemActions:o,...n}}getItemRenderProps(t,n,s){const i=super.getItemRenderProps(t,n,s),{collapsedIcon:r,expandedIcon:o,normalIcon:a,itemActions:l}=t;return i.icon===void 0&&(i.icon=i.items?i.show?o:r:a),i.actions===void 0&&l&&(i.actions=typeof l=="function"?l(n):l),i}renderToggleIcon(){return null}beforeRender(){const t=super.beforeRender(),{hover:n}=this.props;return n&&(t.className=S(t.className,"tree-hover")),t}};Wa.ItemComponents={item:pp},Wa.NAME="tree";class Oa extends G{}Oa.NAME="Tree",Oa.Component=Wa;const Rm="",Am="";class Ha extends ct{init(){const{multiple:t,defaultFileList:n,limitSize:s}=this.options;this.fileMap=new Map,this.renameMap=new Map,this.itemMap=new Map,this.dataTransfer=new DataTransfer,this.limitBytes=s?Jl(s):Number.MAX_VALUE,this.currentBytes=0,t||(this.options.limitCount=1),this.$element.addClass("upload"),this.initFileInputCash(),this.initUploadCash(),n&&this.addFileItem(n)}initUploadCash(){const{name:t,uploadText:n,uploadIcon:s,listPosition:i,btnClass:r,tip:o,draggable:a}=this.options;this.$list=m('<ul class="file-list py-1"></ul>');const l=m(`<span class="upload-tip">${o}</span>`);if(!a){if(this.$label=m(`<label class="btn ${r}" for="${t}">${n}</label>`),s){const u=m(`<i class="icon icon-${s}"></i>`);this.$label.prepend(u)}const d=i==="bottom"?[this.$label,l,this.$list]:[this.$list,this.$label,l];this.$element.append(this.$input,...d);return}const h=m(`<span class="text-primary">${n}</span>`);if(s){const d=m(`<i class="icon icon-${s} mr-1"></i>`);h.prepend(d)}this.$label=m(`<label class="draggable-area col justify-center items-center cursor-pointer block w-full h-16 border border-dashed border-gray" for="${t}"></label>`).append(h).append(l),this.bindDragEvent();const c=i==="bottom"?[this.$label,this.$list]:[this.$list,this.$label];this.$element.append(this.$input,...c)}bindDragEvent(){this.$label.on("dragover",t=>{t.preventDefault(),console.log("dragover"),this.$label.hasClass("border-primary")||(this.$label.removeClass("border-gray"),this.$label.addClass("border-primary"))}).on("dragleave",t=>{t.preventDefault(),this.$label.removeClass("border-primary"),this.$label.addClass("border-gray")}).on("drop",t=>{var s;t.preventDefault(),this.$label.removeClass("border-primary"),this.$label.addClass("border-gray");const n=Array.from(((s=t.dataTransfer)==null?void 0:s.files)??[]);console.log(t.dataTransfer.files),this.addFileItem(n)})}initFileInputCash(){const{name:t,multiple:n,accept:s}=this.options;this.$input=m("<input />").addClass("hidden").prop("type","file").prop("name",t).prop("id",t).prop("multiple",n).on("change",i=>{const r=i.target.files;if(!r)return;const o=[...r];this.addFileItem(o)}),s&&this.$input.prop("accept",s)}addFile(t){const{multiple:n,onSizeChange:s}=this.options;n||(this.renameMap.clear(),this.fileMap.clear(),this.dataTransfer.items.clear(),this.currentBytes=t.size),this.renameMap.set(t.name,t.name),this.fileMap.set(t.name,t),this.dataTransfer.items.add(t),this.$input.prop("files",this.dataTransfer.files),this.currentBytes+=t.size,s==null||s(this.currentBytes)}renameDuplicatedFile(t){if(!this.fileMap.has(t.name))return t;const n=t.name.lastIndexOf(".");if(n===-1)return this.renameDuplicatedFile(new File([t],`${t.name}(1)`));const s=t.name.substring(0,n),i=t.name.substring(n);return this.renameDuplicatedFile(new File([t],`${s}(1)${i}`))}filterFiles(t){const{accept:n}=this.options;if(!n)return t;const s=n.replace(/\s/g,"").split(","),i=[],r=[],o=[];return s.forEach(a=>{a.endsWith("/*")?r.push(a.substring(0,a.length-1)):a.includes("/")?i.push(a):a.startsWith(".")&&o.push(a)}),t.filter(a=>i.includes(a.type)||r.some(l=>a.type.startsWith(l))||o.some(l=>a.name.endsWith(l)))}addFileItem(t){t=this.filterFiles(t);const{multiple:n,limitCount:s,exceededSizeHint:i,exceededCountHint:r,onAdd:o}=this.options;if(n){const h=[];for(let c of t){if(s&&this.fileMap.size>=s)return o==null||o(h),alert(r);if(this.currentBytes+c.size>this.limitBytes)return o==null||o(h),alert(i);c=this.renameDuplicatedFile(c);const d=this.createFileItem(c);this.itemMap.set(c.name,d),this.$list.append(d),h.push(c)}o==null||o(h);return}if(t[0].size>this.limitBytes)return;const a=this.renameDuplicatedFile(t[0]),l=this.createFileItem(a);this.itemMap.clear(),this.itemMap.set(a.name,l),this.$list.empty().append(l),o==null||o(a)}deleteFileItem(t){var l;const n=this.renameMap.get(t)??t;this.renameMap.delete(t);const s=this.fileMap.get(n);if(!s)return;const{onDelete:i,onSizeChange:r}=this.options,o=this.itemMap.get(s.name);this.itemMap.delete(s.name),o==null||o.addClass("hidden");const a=(l=o==null?void 0:o.find(".file-delete"))==null?void 0:l.data("tooltip");a&&(a.destroy(),a.tooltip.remove()),setTimeout(()=>o==null?void 0:o.remove(),3e3),i==null||i(s),this.fileMap.delete(s.name),this.currentBytes-=s.size,r==null||r(this.currentBytes),this.dataTransfer=new DataTransfer,this.fileMap.forEach(h=>this.dataTransfer.items.add(h)),this.$input.prop("files",this.dataTransfer.files)}renameFileItem(t,n){var r,o;const s=this.renameMap.get(t.name);this.renameMap.set(t.name,n),s&&(t=this.fileMap.get(s)??t);const i=this.itemMap.get(t.name);i&&(this.itemMap.set(n,i).delete(t.name),(o=(r=this.options).onRename)==null||o.call(r,n,t.name),this.fileMap.delete(t.name),this.dataTransfer=new DataTransfer,t=new File([t],n),this.fileMap.set(n,t).forEach(a=>this.dataTransfer.items.add(a)),this.$input.prop("files",this.dataTransfer.files))}createFileItem(t){const{showIcon:n}=this.options;return this.addFile(t),m('<li class="file-item my-1 flex items-center gap-2"></li>').append(n?this.fileIcon():null).append(this.createFileInfo(t)).append(this.createRenameContainer(t))}fileIcon(){const{icon:t}=this.options;return m(`<i class="icon icon-${t}"></i>`)}fileRenameBtn(){const{useIconBtn:t,renameText:n,renameIcon:s,renameClass:i}=this.options;if(t){const r=m(`<button class="btn btn-link h-5 w-5 p-0 ${i}"><i class="icon icon-${s}"></i></button>`).addClass("file-action file-rename");return new dt(r,{title:n}),r}return m("<button />").addClass(`btn size-sm rounded-sm text-primary canvas file-action file-rename ${i}`).html(n)}fileDeleteBtn(){const{useIconBtn:t,deleteText:n,deleteIcon:s,deleteClass:i}=this.options;if(t){const r=m(`<button class="btn btn-link h-5 w-5 p-0 ${i}"><i class="icon icon-${s}"></i></button>`).addClass("file-action file-delete");return r.data("tooltip",new dt(r,{title:n})),r}return m("<button />").html(n).addClass(`btn size-sm rounded-sm text-primary canvas file-action file-delete ${i}`)}fileName(t){return m(`<span class="file-name">${t}</span>`)}fileSize(t){return m(`<span class="file-size text-gray">${Xl(t)}</span>`)}createFileInfo(t){const{renameBtn:n,deleteBtn:s,showSize:i}=this.options,r=m('<div class="file-info flex items-center gap-2"></div>');return r.append(this.fileName(t.name)),i&&r.append(this.fileSize(t.size)),n&&r.append(this.fileRenameBtn().on("click",o=>{r.addClass("hidden").closest(".file-item").find(".input-rename-container.hidden").removeClass("hidden");const a=m(o.target).closest("li").find("input")[0];a.focus(),a.value.lastIndexOf(".")!==-1&&a.setSelectionRange(0,a.value.lastIndexOf("."))})),s&&r.append(this.fileDeleteBtn().on("click",()=>this.deleteFileItem(t.name))),r}createRenameContainer(t){const{confirmText:n,cancelText:s,duplicatedHint:i}=this.options,r=m('<div class="input-group input-rename-container hidden"></div>'),o=m("<input />").addClass("form-control").prop("type","text").prop("autofocus",!0).prop("defaultValue",t.name).on("keydown",c=>{if(c.key==="Enter"){const d=r.closest(".file-item"),u=d.find(".file-name");if(u.html()===o.val()){r.addClass("hidden"),d.find(".file-info.hidden").removeClass("hidden");return}if(this.fileMap.has(o.val()))return alert(i);this.renameFileItem(t,o.val()),r.addClass("hidden"),d.find(".file-info.hidden").removeClass("hidden"),u.html(o.val())}else c.key==="Escape"&&(o.val(t.name),r.addClass("hidden").closest(".file-item").find(".file-info.hidden").removeClass("hidden"))}),a=m("<button />").addClass("btn primary rename-confirm-btn").prop("type","button").html(n).on("click",()=>{const c=r.closest(".file-item"),d=c.find(".file-name");if(d.html()===o.val()){r.addClass("hidden"),c.find(".file-info.hidden").removeClass("hidden");return}if(this.fileMap.has(o.val()))return alert(i);this.renameFileItem(t,o.val()),r.addClass("hidden"),c.find(".file-info.hidden").removeClass("hidden"),d.html(o.val())}),l=m("<button />").prop("type","button").addClass("btn rename-cancel-btn").html(s).on("click",()=>{o.val(t.name),r.addClass("hidden").closest(".file-item").find(".file-info.hidden").removeClass("hidden")}),h=m('<div class="btn-group"></div').append(a).append(l);return r.append(o).append(h)}}Ha.DEFAULT={uploadText:"上传文件",confirmText:"确定",cancelText:"取消",useIconBtn:!0,renameBtn:!0,renameText:"重命名",renameIcon:"edit",renameClass:"",deleteBtn:!0,deleteText:"删除",deleteIcon:"trash",deleteClass:"",showIcon:!0,multiple:!0,listPosition:"bottom",limitSize:!1,icon:"file-o",btnClass:"",tip:"",draggable:!1,showSize:!0};const Pm="";class td extends Ha{init(){this.initUploadButtonItemCash(),this.options.onSizeChange=()=>{this.$uploadInfo.html(this.options.totalCountText.replace("%s",this.fileMap.size.toString()).replace("%s",this.fileMap.size.toString())),this.fileMap.size>0?(this.$tip.remove(),this.$list.append(this.$uploadButtonItem)):(this.$uploadButtonItem.remove(),this.$label.append(this.$tip))},super.init(),this.$list.addClass("flex")}initUploadButtonItemCash(){this.$uploadButtonItem=m(`<label class="upload-button-item order-last" for="${this.options.name}" />`).addClass("flex justify-center items-center cursor-pointer").css({width:120,height:120,background:"var(--color-slate-100)"}).append(m('<i class="icon icon-plus" />'))}initUploadCash(){const{name:t,tip:n,uploadText:s,uploadIcon:i,totalCountText:r}=this.options;this.$list=m('<ul class="file-list py-1 flex-wrap gap-x-4 gap-y-4"></ul>'),this.$label=m('<div class="draggable-area relative block w-full border border-dashed border-gray"></div>').css({minHeight:64});const o=m(`<label for="${t}" class="text-primary cursor-pointer">${s}</label>`);if(i){const a=m(`<i class="icon icon-${i} mr-1"></i>`);o.prepend(a)}this.$tip=m('<div class="absolute inset-0 col justify-center items-center"></div>').append(o),n&&this.$tip.append(m(`<span class="upload-tip">${n}</span>`)),this.$label.append(this.$tip),this.$label.append(this.$input,this.$list),this.bindDragEvent(),this.$element.append(this.$label),this.$uploadInfo=m('<div class="py-1" />').css({color:"var(--color-slate-500)"}).html(r.replace("%s",this.fileMap.size.toString()).replace("%s",this.fileMap.size.toString())),this.$element.append(this.$uploadInfo)}filterFiles(t){const{accept:n}=this.options;if(n==="image/*")return t.filter(i=>i.type.includes("image"));const s=n.replace(/\s/g,"").replace(/\./g,"image/").split(",");return t.filter(i=>s.includes(i.type))}createFileItem(t){const n=super.createFileItem(t).addClass("relative").removeClass("flex items-center gap-2 my-1");this.setImageUrl(t,n);const{deleteBtn:s,showSize:i}=this.options;return s&&n.append(this.fileDeleteBtn().addClass("absolute right-0 top-0 text-white").css({background:"var(--color-slate-500)"}).on("click",()=>this.deleteFileItem(t.name))),i&&n.append(this.fileSize(t.size).addClass("file-size label text-white circle darker absolute px-1 hidden").removeClass("text-gray").css({top:96,left:4})),n}setImageUrl(t,n){const s=new FileReader;s.onload=()=>{m('<div class="img flex-none" />').addClass("rounded").css({backgroundImage:`url(${s.result})`}).prependTo(n)},s.readAsDataURL(t)}createFileInfo(t){const n=this.fileRenameBtn().addClass("flex-none").on("click",i=>{const r=m(i.target).closest(".file-item");r.find(".file-info").addClass("hidden"),r.find(".input-rename-container").removeClass("hidden");const o=r.find("input")[0];o.focus(),o.value.lastIndexOf(".")!==-1&&o.setSelectionRange(0,o.value.lastIndexOf("."))});return m('<div class="file-info flex justify-between items-center"></div>').css({width:120}).append(m(`<div class="file-name py-1 ellipsis">${t.name}</div>`)).append(n)}createRenameContainer(t){const{duplicatedHint:n}=this.options,s=m("<input />").addClass("input-rename-container border-primary border hidden").prop("type","text").prop("autofocus",!0).prop("defaultValue",t.name).css({width:120}).on("keydown",i=>{if(i.key==="Enter"){const r=s.closest(".file-item").find(".file-name");if(r.html()===s.val()){s.addClass("hidden"),r.closest(".file-info").removeClass("hidden");return}if(this.fileMap.has(s.val()))return alert(n);this.renameFileItem(t,s.val()),s.addClass("hidden"),r.html(s.val()).closest(".file-info").removeClass("hidden")}else i.key==="Escape"&&s.val(t.name).addClass("hidden").closest(".file-item").find(".file-name").removeClass("hidden")}).on("blur",()=>{const i=s.closest(".file-item").find(".file-name");if(i.html()===s.val()){s.addClass("hidden"),i.closest(".file-info").removeClass("hidden");return}if(this.fileMap.has(s.val()))return alert(n);this.renameFileItem(t,s.val()),s.addClass("hidden"),i.html(s.val()).closest(".file-info").removeClass("hidden")});return s}}td.DEFAULT={uploadText:"添加文件",renameBtn:!0,renameText:"重命名",renameIcon:"edit",renameClass:"",deleteBtn:!0,deleteText:"删除",deleteIcon:"trash",deleteClass:"",showIcon:!1,multiple:!0,limitSize:!1,btnClass:"",draggable:!0,accept:"image/jpg, image/jpeg, image/gif, image/png",showSize:!0,useIconBtn:!0,totalCountText:'共 <span class="font-bold text-black">%s</span> 个文件 <span class="font-bold text-black">%s</span> 个文件等待上传。'};const Dm="";let mp=(Od=class extends F{constructor(){super(...arguments);L(this,Ds,j());L(this,br,n=>{n.stopPropagation(),ot.show({event:n.target,placement:"bottom-end",menu:{onClickItem:({item:s})=>{var i;((i=s.attrs)==null?void 0:i["data-type"])==="refresh"&&this.load()}},...this.props.block.menu})});L(this,Cr,n=>{var r,o,a;const{element:s}=this,i=s.getBoundingClientRect();if(n.clientY-i.top>48){n.preventDefault();return}this.setState({dragging:!0}),(r=n.dataTransfer)==null||r.setData("application/id",this.props.block.id),(a=(o=this.props).onDragStart)==null||a.call(o,n)});L(this,$r,n=>{var s,i;this.setState({dragging:!1}),(i=(s=this.props).onDragEnd)==null||i.call(s,n)})}get element(){return $(this,Ds).current}componentDidMount(){this.load(),m(this.element).on("load.zui.dashboard",this.load.bind(this))}componentWillUnmount(){m(this.element).off("load.zui.dashboard")}load(){const{block:n}=this.props;let s=n.fetch;if(!s||this.state.loading)return;typeof s=="string"?s={url:s}:typeof s=="function"&&(s=s(n.id,n));const{url:i,...r}=s;this.setState({loading:!0},()=>{fetch(nt(i,n),{headers:{"X-Requested-With":"XMLHttpRequest"},...r}).then(o=>{o.ok?o.text().then(a=>{this.setState({loading:!1,content:f(Xs,{class:"dashboard-block-body",html:a,executeScript:!0})})}):this.setState({loading:!1,content:f("div",{class:"text-danger p-5 text-center",children:["Error: ",o.statusText]})})})})}render(){const{left:n,top:s,width:i,height:r,style:o,block:a}=this.props,{title:l,menu:h,id:c,content:d}=a,{loading:u,dragging:p}=this.state;let{content:g}=this.state;return g===void 0&&m.isPlainObject(d)&&d.html&&(g=f("div",{class:"dashboard-block-body",dangerouslySetInnerHTML:{__html:d.html}})),f("div",{class:"dashboard-block-cell",style:{left:n,top:s,width:i,height:r,...o},children:f("div",{class:`dashboard-block load-indicator${u?" loading":""}${h?" has-more-menu":""}${p?" is-dragging":""}`,draggable:!0,onDragStart:$(this,Cr),onDragEnd:$(this,$r),"data-id":c,ref:$(this,Ds),children:[f("div",{class:"dashboard-block-header",children:[f("div",{class:"dashboard-block-title",children:l}),h?f("div",{class:"dashboard-block-actions toolbar",children:f("button",{class:"toolbar-item dashboard-block-action btn square ghost rounded size-sm","data-type":"more",onClick:$(this,br),children:f("div",{class:"more-vert"})})}):null]}),g]})})}},Ds=new WeakMap,br=new WeakMap,Cr=new WeakMap,$r=new WeakMap,Od);const Lm="",Im="";var ed=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Jt=(e,t,n)=>(ed(e,t,"read from private field"),n?n.call(e):t.get(e)),Mt=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Tt=(e,t,n)=>(ed(e,t,"access private method"),n),Zt,Ba,nd,za,sd,Fa,id,Va,rd,ji,Ua,Xi,qa,Ga,od,Ya,Ka,Ji,ja;const Xa=class extends F{constructor(){super(...arguments),Mt(this,Ba),Mt(this,za),Mt(this,Fa),Mt(this,Va),Mt(this,ji),Mt(this,Xi),Mt(this,Ga),Mt(this,Zt,new Map),this.state={},Mt(this,Ya,e=>{var n;const t=(n=e.dataTransfer)==null?void 0:n.getData("application/id");t!==void 0&&(this.setState({dragging:t}),console.log("handleBlockDragStart",e))}),Mt(this,Ka,e=>{this.setState({dragging:void 0}),console.log("handleBlockDragEnd",e)})}render(){const{blocks:e,height:t}=Tt(this,Fa,id).call(this),{cellHeight:n,grid:s}=this.props,i=Jt(this,Zt);return console.log("Dashboard.render",{blocks:e,map:i},this),f("div",{class:"dashboard",children:f("div",{class:"dashboard-blocks",style:{height:t*n},children:e.map((r,o)=>{const{id:a}=r,[l,h,c,d]=i.get(a)||[0,0,r.width,r.height];return f(mp,{id:a,index:o,left:`${100*l/s}%`,top:n*h,height:n*d,width:`${100*c/s}%`,block:r,moreMenu:!0,onDragStart:Jt(this,Ya),onDragEnd:Jt(this,Ka)},r.id)})})})}};let Ja=Xa;Zt=new WeakMap,Ba=new WeakSet,nd=function(e){const{blockDefaultSize:t,blockSizeMap:n}=this.props;return e=e??t,typeof e=="string"&&(e=n[e]),e=e||t,Array.isArray(e)||(e=[e.width,e.height]),e},za=new WeakSet,sd=function(){const{blocks:e,blockFetch:t,blockMenu:n}=this.props;return e.map(i=>{const{id:r,size:o,left:a=-1,top:l=-1,fetch:h=t,menu:c=n,...d}=i,[u,p]=Tt(this,Ba,nd).call(this,o);return{id:`${r}`,width:u,height:p,left:a,top:l,fetch:h,menu:c,...d}})},Fa=new WeakSet,id=function(){Jt(this,Zt).clear();let e=0;const t=Tt(this,za,sd).call(this);return t.forEach(n=>{Tt(this,Va,rd).call(this,n);const[,s,,i]=Jt(this,Zt).get(n.id);e=Math.max(e,s+i)}),{blocks:t,height:e}},Va=new WeakSet,rd=function(e){const t=Jt(this,Zt),{id:n,left:s,top:i,width:r,height:o}=e;if(s<0||i<0){const[a,l]=Tt(this,Ga,od).call(this,r,o,s,i);t.set(n,[a,l,r,o])}else Tt(this,Xi,qa).call(this,n,[s,i,r,o])},ji=new WeakSet,Ua=function(e){var t;const{dragging:n}=this.state;for(const[s,i]of Jt(this,Zt).entries())if(s!==n&&Tt(t=Xa,Ji,ja).call(t,i,e))return!1;return!0},Xi=new WeakSet,qa=function(e,t){var n;Jt(this,Zt).set(e,t);for(const[s,i]of Jt(this,Zt).entries())s!==e&&Tt(n=Xa,Ji,ja).call(n,i,t)&&(i[1]=t[1]+t[3],Tt(this,Xi,qa).call(this,s,i))},Ga=new WeakSet,od=function(e,t,n,s){if(n>=0&&s>=0){if(Tt(this,ji,Ua).call(this,[n,s,e,t]))return[n,s];s=-1}let i=n<0?0:n,r=s<0?0:s,o=!1;const a=this.props.grid;for(;!o;){if(Tt(this,ji,Ua).call(this,[i,r,e,t])){o=!0;break}n<0?(i+=1,i+e>a&&(i=0,r+=1)):r+=1}return[i,r]},Ya=new WeakMap,Ka=new WeakMap,Ji=new WeakSet,ja=function([e,t,n,s],[i,r,o,a]){return!(e+n<=i||i+o<=e||t+s<=r||r+a<=t)},Mt(Ja,Ji),Ja.defaultProps={responsive:!1,blocks:[],grid:3,gap:16,cellHeight:64,blockDefaultSize:[1,3],blockMenu:{items:[{text:"Refresh",attrs:{"data-type":"refresh"}}]},blockSizeMap:{xs:[1,3],sm:[1,4],md:[1,5],lg:[1,6],xl:[1,8],xsWide:[2,3],smWide:[2,4],mdWide:[2,5],lgWide:[2,6],xlWide:[2,8],xsLong:[3,3],smLong:[3,4],mdLong:[3,5],lgLong:[3,6],xlLong:[3,8]}};class Za extends G{}Za.NAME="Dashboard",Za.Component=Ja;const Wm="";class ad extends F{constructor(n){super(n);L(this,we,void 0);L(this,_e,void 0);H(this,we,0),H(this,_e,null),this._handleWheel=s=>{const{wheelContainer:i}=this.props,r=s.target;if(!(!r||!i)&&(typeof i=="string"&&r.closest(i)||typeof i=="object")){const o=(this.props.type==="horz"?s.deltaX:s.deltaY)*(this.props.wheelSpeed??1);this.scrollOffset(o)&&s.preventDefault()}},this._handleMouseMove=s=>{const{dragStart:i}=this.state;i&&($(this,we)&&cancelAnimationFrame($(this,we)),H(this,we,requestAnimationFrame(()=>{const r=this.props.type==="horz"?s.clientX-i.x:s.clientY-i.y;this.scroll(i.offset+r*this.props.scrollSize/this.props.clientSize),H(this,we,0)})),s.preventDefault())},this._handleMouseUp=()=>{this.state.dragStart&&this.setState({dragStart:!1})},this._handleMouseDown=s=>{this.state.dragStart||this.setState({dragStart:{x:s.clientX,y:s.clientY,offset:this.scrollPos}}),s.stopPropagation()},this._handleClick=s=>{const i=s.currentTarget;if(!i)return;const r=i.getBoundingClientRect(),{type:o,clientSize:a,scrollSize:l}=this.props,h=(o==="horz"?s.clientX-r.left:s.clientY-r.top)-this.barSize/2;this.scroll(h*l/a),s.preventDefault()},this.state={scrollPos:this.props.defaultScrollPos??0,dragStart:!1}}get scrollPos(){return this.props.scrollPos??this.state.scrollPos}get controlled(){return this.props.scrollPos!==void 0}get maxScrollPos(){const{scrollSize:n,clientSize:s}=this.props;return Math.max(0,n-s)}get barSize(){const{clientSize:n,scrollSize:s,size:i=12,minBarSize:r=3*i}=this.props;return Math.max(Math.round(n*n/s),r)}componentDidMount(){document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp);const{wheelContainer:n}=this.props;n&&(H(this,_e,typeof n=="string"?document:n.current),$(this,_e).addEventListener("wheel",this._handleWheel,{passive:!1}))}componentWillUnmount(){document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),$(this,_e)&&$(this,_e).removeEventListener("wheel",this._handleWheel)}scroll(n){return n=Math.max(0,Math.min(Math.round(n),this.maxScrollPos)),n===this.scrollPos?!1:(this.controlled?this._afterScroll(n):this.setState({scrollPos:n},this._afterScroll.bind(this,n)),!0)}scrollOffset(n){return this.scroll(this.scrollPos+n)}_afterScroll(n){const{onScroll:s}=this.props;s&&s(n,this.props.type??"vert")}render(){const{clientSize:n,type:s,size:i=12,className:r,style:o,left:a,top:l,bottom:h,right:c}=this.props,{maxScrollPos:d,scrollPos:u}=this,{dragStart:p}=this.state,g={left:a,top:l,bottom:h,right:c,...o},y={};return s==="horz"?(g.height=i,g.width=n,y.width=this.barSize,y.left=Math.round(Math.min(d,u)*(n-y.width)/d)):(g.width=i,g.height=n,y.height=this.barSize,y.top=Math.round(Math.min(d,u)*(n-y.height)/d)),f("div",{className:S("scrollbar",r,{"is-vert":s==="vert","is-horz":s==="horz","is-dragging":p}),style:g,onMouseDown:this._handleClick,children:f("div",{className:"scrollbar-bar",style:y,onMouseDown:this._handleMouseDown})})}}we=new WeakMap,_e=new WeakMap;const Zi=new Map,Qi=[];function ld(e,t){const{name:n}=e;if(!(t!=null&&t.override)&&Zi.has(n))throw new Error(`DTable: Plugin with name ${n} already exists`);Zi.set(n,e),t!=null&&t.buildIn&&!Qi.includes(n)&&Qi.push(n)}function Ve(e,t){ld(e,t);const n=s=>{if(!s)return e;const{defaultOptions:i,...r}=e;return{...r,defaultOptions:{...i,...s}}};return n.plugin=e,n}function cd(e){return Zi.delete(e)}function gp(e){if(typeof e=="string"){const t=Zi.get(e);return t||console.warn(`DTable: Cannot found plugin "${e}"`),t}if(typeof e=="function"&&"plugin"in e)return e.plugin;if(typeof e=="object")return e;console.warn("DTable: Invalid plugin",e)}function hd(e,t,n){return t.forEach(s=>{var r;if(!s)return;const i=gp(s);i&&(n.has(i.name)||((r=i.plugins)!=null&&r.length&&hd(e,i.plugins,n),e.push(i),n.add(i.name)))}),e}function yp(e=[],t=!0){return t&&Qi.length&&e.unshift(...Qi),e!=null&&e.length?hd([],e,new Set):[]}function dd(){return{cols:[],data:[],rowKey:"id",width:"100%",height:"auto",rowHeight:35,defaultColWidth:80,minColWidth:20,maxColWidth:9999,header:!0,footer:void 0,headerHeight:0,footerHeight:0,rowHover:!0,colHover:!1,cellHover:!1,bordered:!1,striped:!0,responsive:!1,scrollbarHover:!0,horzScrollbarPos:"outside"}}const Om="";function vp(e,t,n){return e&&(t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e))),e}function ud(e,t){return typeof e=="string"&&(e=e.endsWith("%")?parseFloat(e)/100:parseFloat(e)),typeof t=="number"&&(typeof e!="number"||isNaN(e))&&(e=t),e}function Qa(e,t=!1){if(!e.list.length)return;if(e.widthSetting&&e.width!==e.widthSetting){e.width=e.widthSetting;const s=e.width-e.totalWidth;if(t||s>0){const i=e.flexList.length?e.flexList:e.list,r=i.reduce((o,a)=>o+(a.flex||1),0);i.forEach(o=>{const a=Math.min(s,Math.ceil(s*((o.flex||1)/r)));o.realWidth=o.width+a})}}let n=0;e.list.forEach(s=>{s.realWidth||(s.realWidth=s.width),s.left=n,n+=s.realWidth})}function wp(e,t,n,s){const{defaultColWidth:i,minColWidth:r,maxColWidth:o,fixedLeftWidth:a=0,fixedRightWidth:l=0}=t,h=_=>(typeof _=="function"&&(_=_.call(e)),_=ud(_,0),_<1&&(_=Math.round(_*s)),_),c={width:0,list:[],flexList:[],widthSetting:0,totalWidth:0},d={...c,list:[],flexList:[],widthSetting:h(a)},u={...c,list:[],flexList:[],widthSetting:h(l)},p=[],g={};let y=!1;const w=[],v={};if(n.forEach(_=>{const{colTypes:C,onAddCol:N}=_;C&&Object.entries(C).forEach(([x,E])=>{v[x]||(v[x]=[]),v[x].push(E)}),N&&w.push(N)}),t.cols.forEach(_=>{if(_.hidden)return;const{type:C="",name:N}=_,x={fixed:!1,flex:!1,width:i,minWidth:r,maxWidth:o,..._,type:C},E={name:N,type:C,setting:x,flex:0,left:0,width:0,realWidth:0,visible:!0,index:p.length},A=v[C];A&&A.forEach(W=>{const O=typeof W=="function"?W.call(e,x):W;O&&Object.assign(x,O,_)});const{fixed:D,flex:B,minWidth:M=r,maxWidth:P=o}=x,I=ud(x.width||i,i);E.flex=B===!0?1:typeof B=="number"?B:0,E.width=vp(I<1?Math.round(I*s):I,M,P),w.forEach(W=>W.call(e,E)),p.push(E),g[E.name]=E;const T=D?D==="left"?d:u:c;T.list.push(E),T.totalWidth+=E.width,T.width=T.totalWidth,E.flex&&T.flexList.push(E),typeof x.order=="number"&&(y=!0)}),y){const _=(C,N)=>(C.setting.order??0)-(N.setting.order??0);p.sort(_),d.list.sort(_),c.list.sort(_),u.list.sort(_)}return Qa(d,!0),Qa(u,!0),c.widthSetting=s-d.width-u.width,Qa(c),{list:p,map:g,left:d,center:c,right:u}}function _p({col:e,className:t,height:n,row:s,onRenderCell:i,style:r,outerStyle:o,children:a,outerClass:l,width:h,left:c,top:d,...u}){var I;const p={left:c??e.left,top:d??s.top,width:h??e.realWidth,height:n,...o},{align:g,border:y}=e.setting,w={justifyContent:g?g==="left"?"start":g==="right"?"end":g:void 0,...e.setting.cellStyle,...r},v=["dtable-cell",l,t,e.setting.className,{"has-border-left":y===!0||y==="left","has-border-right":y===!0||y==="right"}],_=["dtable-cell-content",e.setting.cellClass],C=(I=s.data)==null?void 0:I[e.name],N=[a??C??""],x=i?i(N,{row:s,col:e,value:C},K):N,E=[],A=[],D={},B={};let M="div";x==null||x.forEach(T=>{if(typeof T=="object"&&T&&!b.isValidElement(T)&&("html"in T||"className"in T||"style"in T||"attrs"in T||"children"in T||"tagName"in T)){const W=T.outer?E:A;T.html?W.push(f("div",{className:S("dtable-cell-html",T.className),style:T.style,dangerouslySetInnerHTML:{__html:T.html},...T.attrs??{}})):(T.style&&Object.assign(T.outer?p:w,T.style),T.className&&(T.outer?v:_).push(T.className),T.children&&W.push(T.children),T.attrs&&Object.assign(T.outer?D:B,T.attrs)),T.tagName&&!T.outer&&(M=T.tagName)}else A.push(T)});const P=M;return f("div",{className:S(v),style:p,"data-col":e.name,"data-row":s.id,"data-type":e.type||null,...u,...D,children:[A.length>0&&f(P,{className:S(_),style:w,...B,children:A}),E]})}function tl({rows:e=[],cols:t,rowHeight:n,scrollLeft:s=0,scrollTop:i=0,left:r=0,top:o=0,width:a,height:l="100%",className:h,CellComponent:c=_p,onRenderCell:d}){var g;const u=Array.isArray(e)?e:[e],p=((g=u[0])==null?void 0:g.top)??0;return f("div",{className:S("dtable-cells",h),style:{top:o,left:r,width:a,height:l},children:f("div",{className:"dtable-cells-container",style:{left:-s,top:-i+p},children:u.reduce((y,w)=>(t.forEach(v=>{y.push(f(c,{className:`is-${w.index%2?"odd":"even"}-row`,col:v,row:w,top:w.top-p,height:n,onRenderCell:d},`${w.index}:${v.name}`))}),y),[])})})}function fd({top:e,height:t,rowHeight:n,rows:s,cols:{left:i,center:r,right:o},scrollLeft:a,scrollTop:l,className:h,style:c,onRenderCell:d}){let u=null;i.list.length&&(u=f(tl,{className:"dtable-fixed-left",rows:s,scrollTop:l,cols:i.list,width:i.width,rowHeight:n,onRenderCell:d},"left"));let p=null;r.list.length&&(p=f(tl,{rows:s,className:"dtable-scroll-center",scrollLeft:a,scrollTop:l,cols:r.list,left:i.width,width:r.width,rowHeight:n,onRenderCell:d},"center"));let g=null;return o.list.length&&(g=f(tl,{className:"dtable-fixed-right",rows:s,scrollTop:l,cols:o.list,left:i.width+r.width,width:o.width,rowHeight:n,onRenderCell:d},"right")),f("div",{className:S("dtable-block",h),style:{...c,top:e,height:t},children:[u,p,g]})}var el=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},R=(e,t,n)=>(el(e,t,"read from private field"),n?n.call(e):t.get(e)),z=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Z=(e,t,n,s)=>(el(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),_t=(e,t,n)=>(el(e,t,"access private method"),n),yn,hs,Ue,Qt,qe,ut,te,ee,ds,tr,er,us,ge,fs,ps,nl,pd,sl,md,il,gd,rl,yd,nr,ol,sr,ir,al,ll,cl,hl,ms,rr,dl,vd,ul,wd,fl,_d;let pl=class extends F{constructor(t){super(t),z(this,nl),z(this,sl),z(this,il),z(this,rl),z(this,nr),z(this,ms),z(this,dl),z(this,ul),z(this,fl),this.ref=j(),z(this,yn,0),z(this,hs,void 0),z(this,Ue,!1),z(this,Qt,void 0),z(this,qe,void 0),z(this,ut,[]),z(this,te,void 0),z(this,ee,new Map),z(this,ds,{}),z(this,tr,void 0),z(this,er,[]),z(this,us,{in:!1}),this.updateLayout=()=>{R(this,yn)&&cancelAnimationFrame(R(this,yn)),Z(this,yn,requestAnimationFrame(()=>{this.update({dirtyType:"layout"}),Z(this,yn,0)}))},z(this,ge,(n,s)=>{s=s||n.type;const i=R(this,ee).get(s);if(i!=null&&i.length){for(const r of i)if(r.call(this,n)===!1){n.stopPropagation(),n.preventDefault();break}}}),z(this,fs,n=>{R(this,ge).call(this,n,`window_${n.type}`)}),z(this,ps,n=>{R(this,ge).call(this,n,`document_${n.type}`)}),z(this,sr,(n,s,i)=>{const{row:r,col:o}=s;s.value=this.getCellValue(r,o),n[0]=s.value;const a=r.id==="HEADER"?"onRenderHeaderCell":"onRenderCell";return R(this,ut).forEach(l=>{l[a]&&(n=l[a].call(this,n,s,i))}),this.options[a]&&(n=this.options[a].call(this,n,s,i)),o.setting[a]&&(n=o.setting[a].call(this,n,s,i)),n}),z(this,ir,(n,s)=>{s==="horz"?this.scroll({scrollLeft:n}):this.scroll({scrollTop:n})}),z(this,al,n=>{var a,l,h;const s=this.getPointerInfo(n);if(!s)return;const{rowID:i,colName:r,cellElement:o}=s;if(i==="HEADER")o&&((a=this.options.onHeaderCellClick)==null||a.call(this,n,{colName:r,element:o}),R(this,ut).forEach(c=>{var d;(d=c.onHeaderCellClick)==null||d.call(this,n,{colName:r,element:o})}));else{const c=this.layout.visibleRows.find(d=>d.id===i);if(o){if(((l=this.options.onCellClick)==null?void 0:l.call(this,n,{colName:r,rowID:i,rowInfo:c,element:o}))===!0)return;for(const d of R(this,ut))if(((h=d.onCellClick)==null?void 0:h.call(this,n,{colName:r,rowID:i,rowInfo:c,element:o}))===!0)return}}}),z(this,ll,n=>{const s=n.key.toLowerCase();if(["pageup","pagedown","home","end"].includes(s))return!this.scroll({to:s.replace("page","")})}),z(this,cl,n=>{const s=m(n.target).closest(".dtable-cell");if(!s.length)return _t(this,ms,rr).call(this,!1);_t(this,ms,rr).call(this,[s.attr("data-row"),s.attr("data-col")])}),z(this,hl,()=>{_t(this,ms,rr).call(this,!1)}),Z(this,hs,t.id??`dtable-${rh(10)}`),this.state={scrollTop:0,scrollLeft:0,renderCount:0},Z(this,qe,Object.freeze(yp(t.plugins))),R(this,qe).forEach(n=>{var o;const{methods:s,data:i,state:r}=n;s&&Object.entries(s).forEach(([a,l])=>{typeof l=="function"&&Object.assign(this,{[a]:l.bind(this)})}),i&&Object.assign(R(this,ds),i.call(this)),r&&Object.assign(this.state,r.call(this)),(o=n.onCreate)==null||o.call(this,n)})}get options(){var t;return((t=R(this,te))==null?void 0:t.options)||R(this,Qt)||dd()}get plugins(){return R(this,ut)}get layout(){return R(this,te)}get id(){return R(this,hs)}get data(){return R(this,ds)}get element(){return this.ref.current}get parent(){var t;return this.props.parent??((t=this.element)==null?void 0:t.parentElement)}get hoverInfo(){return R(this,us)}componentWillReceiveProps(){Z(this,Qt,void 0)}componentDidMount(){R(this,Ue)?this.forceUpdate():_t(this,nr,ol).call(this),R(this,ut).forEach(n=>{let{events:s}=n;s&&(typeof s=="function"&&(s=s.call(this)),Object.entries(s).forEach(([i,r])=>{r&&this.on(i,r)}))}),this.on("click",R(this,al)),this.on("keydown",R(this,ll));const{options:t}=this;if((t.rowHover||t.colHover)&&(this.on("mouseover",R(this,cl)),this.on("mouseleave",R(this,hl))),t.responsive)if(typeof ResizeObserver<"u"){const{parent:n}=this;if(n){const s=new ResizeObserver(this.updateLayout);s.observe(n),Z(this,tr,s)}}else this.on("window_resize",this.updateLayout);R(this,ut).forEach(n=>{var s;(s=n.onMounted)==null||s.call(this)})}componentDidUpdate(){R(this,Ue)?_t(this,nr,ol).call(this):R(this,ut).forEach(t=>{var n;(n=t.onUpdated)==null||n.call(this)})}componentWillUnmount(){var n;(n=R(this,tr))==null||n.disconnect();const{element:t}=this;if(t)for(const s of R(this,ee).keys())s.startsWith("window_")?window.removeEventListener(s.replace("window_",""),R(this,fs)):s.startsWith("document_")?document.removeEventListener(s.replace("document_",""),R(this,ps)):t.removeEventListener(s,R(this,ge));R(this,ut).forEach(s=>{var i;(i=s.onUnmounted)==null||i.call(this)}),R(this,qe).forEach(s=>{var i;(i=s.onDestory)==null||i.call(this)}),Z(this,ds,{}),R(this,ee).clear()}on(t,n,s){var r;s&&(t=`${s}_${t}`);const i=R(this,ee).get(t);i?i.push(n):(R(this,ee).set(t,[n]),t.startsWith("window_")?window.addEventListener(t.replace("window_",""),R(this,fs)):t.startsWith("document_")?document.addEventListener(t.replace("document_",""),R(this,ps)):(r=this.element)==null||r.addEventListener(t,R(this,ge)))}off(t,n,s){var o;s&&(t=`${s}_${t}`);const i=R(this,ee).get(t);if(!i)return;const r=i.indexOf(n);r>=0&&i.splice(r,1),i.length||(R(this,ee).delete(t),t.startsWith("window_")?window.removeEventListener(t.replace("window_",""),R(this,fs)):t.startsWith("document_")?document.removeEventListener(t.replace("document_",""),R(this,ps)):(o=this.element)==null||o.removeEventListener(t,R(this,ge)))}emitCustomEvent(t,n){R(this,ge).call(this,n instanceof Event?n:new CustomEvent(t,{detail:n}),t)}scroll(t,n){const{scrollLeft:s,scrollTop:i,rowsHeightTotal:r,rowsHeight:o,rowHeight:a,cols:{center:{totalWidth:l,width:h}}}=this.layout,{to:c}=t;let{scrollLeft:d,scrollTop:u}=t;if(c==="up"||c==="down")u=i+(c==="down"?1:-1)*Math.floor(o/a)*a;else if(c==="left"||c==="right")d=s+(c==="right"?1:-1)*h;else if(c==="top")u=0;else if(c==="bottom")u=r-o;else if(c==="begin")d=0;else if(c==="end")d=l-h;else{const{offsetLeft:g,offsetTop:y}=t;typeof g=="number"&&(d=s+g),typeof y=="number"&&(d=i+y)}const p={};return typeof d=="number"&&(d=Math.max(0,Math.min(d,l-h)),d!==s&&(p.scrollLeft=d)),typeof u=="number"&&(u=Math.max(0,Math.min(u,r-o)),u!==i&&(p.scrollTop=u)),Object.keys(p).length?(this.setState(p,()=>{var g;(g=this.options.onScroll)==null||g.call(this,p),n==null||n.call(this,!0)}),!0):(n==null||n.call(this,!1),!1)}getColInfo(t){if(t===void 0)return;if(typeof t=="object")return t;const{cols:n}=this.layout;return typeof t=="number"?n.list[t]:n.map[t]}getRowInfo(t){if(t===void 0)return;if(typeof t=="object")return t;if(t===-1||t==="HEADER")return{id:"HEADER",index:-1,top:0};const{rows:n,rowsMap:s,allRows:i}=this.layout;return typeof t=="number"?n[t]:s[t]||i.find(r=>r.id===t)}getCellValue(t,n){var a;const s=typeof t=="object"?t:this.getRowInfo(t);if(!s)return;const i=typeof n=="object"?n:this.getColInfo(n);if(!i)return;let r=s.id==="HEADER"?i.setting.title:(a=s.data)==null?void 0:a[i.name];const{cellValueGetter:o}=this.options;return o&&(r=o.call(this,s,i,r)),r}getRowInfoByIndex(t){return this.layout.rows[t]}update(t={},n){if(!R(this,Qt))return;typeof t=="function"&&(n=t,t={});const{dirtyType:s,state:i}=t;if(s==="layout")Z(this,te,void 0);else if(s==="options"){if(Z(this,Qt,void 0),!R(this,te))return;Z(this,te,void 0)}this.setState(i??(r=>({renderCount:r.renderCount+1})),n)}getPointerInfo(t){const n=t.target;if(!n||n.closest(".no-cell-event"))return;const s=m(n).closest(".dtable-cell");if(!s.length)return;const i=s.attr("data-row"),r=s.attr("data-col");if(!(typeof r!="string"||typeof i!="string"))return{cellElement:s[0],colName:r,rowID:i,target:n}}i18n(t,n,s){return tt(R(this,er),t,n,s,this.options.lang)??`{i18n:${t}}`}getPlugin(t){return this.plugins.find(n=>n.name===t)}render(){const t=_t(this,fl,_d).call(this),{className:n,rowHover:s,colHover:i,cellHover:r,bordered:o,striped:a,scrollbarHover:l}=this.options,h={},c=["dtable",n,{"dtable-hover-row":s,"dtable-hover-col":i,"dtable-hover-cell":r,"dtable-bordered":o,"dtable-striped":a,"scrollbar-hover":l}],d=[];return t&&(h.width=t.width,h.height=t.height,c.push({"dtable-scrolled-down":t.scrollTop>0,"dtable-scrolled-bottom":t.scrollTop>=t.rowsHeightTotal-t.rowsHeight,"dtable-scrolled-right":t.scrollLeft>0,"dtable-scrolled-end":t.scrollLeft>=t.cols.center.totalWidth-t.cols.center.width}),d.push(_t(this,nl,pd).call(this,t),_t(this,sl,md).call(this,t),_t(this,il,gd).call(this,t),_t(this,rl,yd).call(this,t)),R(this,ut).forEach(u=>{var g;const p=(g=u.onRender)==null?void 0:g.call(this,t);p&&(p.style&&Object.assign(h,p.style),p.className&&c.push(p.className),p.children&&d.push(p.children))})),f("div",{id:R(this,hs),className:S(c),style:h,ref:this.ref,tabIndex:-1,children:d})}};yn=new WeakMap,hs=new WeakMap,Ue=new WeakMap,Qt=new WeakMap,qe=new WeakMap,ut=new WeakMap,te=new WeakMap,ee=new WeakMap,ds=new WeakMap,tr=new WeakMap,er=new WeakMap,us=new WeakMap,ge=new WeakMap,fs=new WeakMap,ps=new WeakMap,nl=new WeakSet,pd=function(e){const{header:t,cols:n,headerHeight:s,scrollLeft:i,rowHeight:r}=e;if(!t)return null;if(t===!0)return f(fd,{className:"dtable-header",cols:n,height:s,scrollLeft:i,rowHeight:r,scrollTop:0,rows:{id:"HEADER",index:-1,top:0},top:0,onRenderCell:R(this,sr)},"header");const o=Array.isArray(t)?t:[t];return f(Js,{className:"dtable-header",style:{height:s},renders:o,generateArgs:[e],generatorThis:this},"header")},sl=new WeakSet,md=function(e){const{headerHeight:t,rowsHeight:n,visibleRows:s,rowHeight:i,cols:r,scrollLeft:o,scrollTop:a}=e;return f(fd,{className:"dtable-body",top:t,height:n,rows:s,rowHeight:i,scrollLeft:o,scrollTop:a,cols:r,onRenderCell:R(this,sr)},"body")},il=new WeakSet,gd=function(e){let{footer:t}=e;if(typeof t=="function"&&(t=t.call(this,e)),!t)return null;const n=Array.isArray(t)?t:[t];return f(Js,{className:"dtable-footer",style:{height:e.footerHeight,top:e.rowsHeight+e.headerHeight},renders:n,generateArgs:[e],generatorThis:this,generators:e.footerGenerators},"footer")},rl=new WeakSet,yd=function(e){const t=[],{scrollLeft:n,cols:{left:{width:s},center:{width:i,totalWidth:r}},scrollTop:o,rowsHeight:a,rowsHeightTotal:l,footerHeight:h,headerHeight:c}=e,{scrollbarSize:d=12,horzScrollbarPos:u}=this.options;return r>i&&t.push(f(ad,{type:"horz",scrollPos:n,scrollSize:r,clientSize:i,onScroll:R(this,ir),left:s,bottom:(u==="inside"?0:-d)+h,size:d,wheelContainer:this.ref},"horz"),f("div",{className:"dtable-scroll-shadow is-left",style:{left:s,height:c+a}}),f("div",{className:"dtable-scroll-shadow is-right",style:{left:s+i,height:c+a}})),l>a&&t.push(f(ad,{type:"vert",scrollPos:o,scrollSize:l,clientSize:a,onScroll:R(this,ir),right:0,size:d,top:c,wheelContainer:this.ref},"vert")),t.length?t:null},nr=new WeakSet,ol=function(){var e;Z(this,Ue,!1),(e=this.options.afterRender)==null||e.call(this),R(this,ut).forEach(t=>{var n;return(n=t.afterRender)==null?void 0:n.call(this)})},sr=new WeakMap,ir=new WeakMap,al=new WeakMap,ll=new WeakMap,cl=new WeakMap,hl=new WeakMap,ms=new WeakSet,rr=function(e){const{element:t,options:n}=this;if(!t)return;const s=m(t),i=e?{in:!0,row:e[0],col:e[1]}:{in:!1};n.colHover==="header"&&i.row!=="HEADER"&&(i.col=void 0);const r=R(this,us);i.in!==r.in&&s.toggleClass("dtable-hover",i.in),i.row!==r.row&&(s.find(".is-hover-row").removeClass("is-hover-row"),i.row&&s.find(`.dtable-cell[data-row="${i.row}"]`).addClass("is-hover-row")),i.col!==r.col&&(s.find(".is-hover-col").removeClass("is-hover-col"),i.col&&s.find(`.dtable-cell[data-col="${i.col}"]`).addClass("is-hover-col")),Z(this,us,i)},dl=new WeakSet,vd=function(){if(R(this,Qt))return!1;const t={...dd(),...R(this,qe).reduce((n,s)=>{const{defaultOptions:i}=s;return i&&Object.assign(n,i),n},{}),...this.props};return Z(this,Qt,t),Z(this,ut,R(this,qe).reduce((n,s)=>{const{when:i,options:r}=s;let o=t;return r&&(o=Object.assign({...o},typeof r=="function"?r.call(this,t):r)),(!i||i(o))&&(o!==t&&Object.assign(t,o),n.push(s)),n},[])),Z(this,er,[this.options.i18n,...this.plugins.map(n=>n.i18n)].filter(Boolean)),!0},ul=new WeakSet,wd=function(){var D,B;const{plugins:e}=this;let t=R(this,Qt);const n={flex:f("div",{style:"flex:auto"}),divider:f("div",{style:"width:1px;margin:var(--space);background:var(--color-border);height:50%"})};e.forEach(M=>{var I;const P=(I=M.beforeLayout)==null?void 0:I.call(this,t);P&&(t={...t,...P}),Object.assign(n,M.footer)});let s=t.width,i=0;if(typeof s=="function"&&(s=s.call(this)),s==="100%"){const{parent:M}=this;if(M)i=M.clientWidth;else{Z(this,Ue,!0);return}}const r=wp(this,t,e,i),{data:o,rowKey:a="id",rowHeight:l}=t,h=[],c=(M,P,I)=>{var W,O;const T={data:I??{[a]:M},id:M,index:h.length,top:0};if(I||(T.lazy=!0),h.push(T),((W=t.onAddRow)==null?void 0:W.call(this,T,P))!==!1){for(const q of e)if(((O=q.onAddRow)==null?void 0:O.call(this,T,P))===!1)return}};if(typeof o=="number")for(let M=0;M<o;M++)c(`${M}`,M);else Array.isArray(o)&&o.forEach((M,P)=>{typeof M=="object"?c(`${M[a]??""}`,P,M):c(`${M??""}`,P)});let d=h;const u={};if(t.onAddRows){const M=t.onAddRows.call(this,d);M&&(d=M)}for(const M of e){const P=(D=M.onAddRows)==null?void 0:D.call(this,d);P&&(d=P)}d.forEach((M,P)=>{u[M.id]=M,M.index=P,M.top=M.index*l});const{header:p,footer:g}=t,y=p?t.headerHeight||l:0,w=g?t.footerHeight||l:0;let v=t.height,_=0;const C=d.length*l,N=y+w+C;if(typeof v=="function"&&(v=v.call(this,N)),v==="auto")_=N;else if(typeof v=="object")_=Math.min(v.max,Math.max(v.min,N));else if(v==="100%"){const{parent:M}=this;if(M)_=M.clientHeight;else{_=0,Z(this,Ue,!0);return}}else _=v;const x=_-y-w,E={options:t,allRows:h,width:i,height:_,rows:d,rowsMap:u,rowHeight:l,rowsHeight:x,rowsHeightTotal:C,header:p,footer:g,footerGenerators:n,headerHeight:y,footerHeight:w,cols:r},A=(B=t.onLayout)==null?void 0:B.call(this,E);A&&Object.assign(E,A),e.forEach(M=>{if(M.onLayout){const P=M.onLayout.call(this,E);P&&Object.assign(E,P)}}),Z(this,te,E)},fl=new WeakSet,_d=function(){(_t(this,dl,vd).call(this)||!R(this,te))&&_t(this,ul,wd).call(this);const{layout:e}=this;if(!e)return;const{cols:{center:t}}=e;let{scrollLeft:n}=this.state;n=Math.min(Math.max(0,t.totalWidth-t.width),n);let s=0;t.list.forEach(g=>{g.left=s,s+=g.realWidth,g.visible=g.left+g.realWidth>=n&&g.left<=n+t.width});const{rowsHeightTotal:i,rowsHeight:r,rows:o,rowHeight:a}=e,l=Math.min(Math.max(0,i-r),this.state.scrollTop),h=Math.floor(l/a),c=l+r,d=Math.min(o.length,Math.ceil(c/a)),u=[],{rowDataGetter:p}=this.options;for(let g=h;g<d;g++){const y=o[g];y.lazy&&p&&(y.data=p([y.id])[0],y.lazy=!1),u.push(y)}return e.visibleRows=u,e.scrollTop=l,e.scrollLeft=n,e},pl.addPlugin=ld,pl.removePlugin=cd;const Hm="";function bp(e,t,n=!1){var a,l;typeof e=="boolean"&&(t=e,e=void 0);const s=this.state.checkedRows,i={},{canRowCheckable:r}=this.options,o=(h,c)=>{const d=r?r.call(this,h):!0;!d||n&&d==="disabled"||!!s[h]===c||(c?s[h]=!0:delete s[h],i[h]=c)};if(e===void 0?(t===void 0&&(t=!bd.call(this)),(a=this.layout)==null||a.allRows.forEach(({id:h})=>{o(h,!!t)})):(Array.isArray(e)||(e=[e]),e.forEach(h=>{o(h,t??!s[h])})),Object.keys(i).length){const h=(l=this.options.beforeCheckRows)==null?void 0:l.call(this,e,i,s);h&&Object.keys(h).forEach(c=>{h[c]?s[c]=!0:delete s[c]}),this.setState({checkedRows:{...s}},()=>{var c;(c=this.options.onCheckChange)==null||c.call(this,i)})}return i}function Cp(e){return this.state.checkedRows[e]??!1}function bd(){var s,i;const e=(s=this.layout)==null?void 0:s.allRows.length;if(!e)return!1;const t=this.getChecks().length,{canRowCheckable:n}=this.options;return n?t===((i=this.layout)==null?void 0:i.allRows.reduce((r,o)=>r+(n.call(this,o.id)?1:0),0)):t===e}function $p(){return Object.keys(this.state.checkedRows)}function kp(e){const{checkable:t}=this.options;e===void 0&&(e=!t),t!==e&&this.setState({forceCheckable:e})}function Cd(e,t,n=!1){return f("div",{class:`checkbox-primary dtable-checkbox${e?" checked":""}${n?" disabled":""}`,children:f("label",{})})}const $d='input[type="checkbox"],.dtable-checkbox',xp=Ve({name:"checkable",defaultOptions:{checkable:"auto",checkboxRender:Cd},when:e=>!!e.checkable,options(e){const{forceCheckable:t}=this.state;return t!==void 0?e.checkable=t:e.checkable==="auto"&&(e.checkable=!!e.cols.some(n=>n.checkbox)),e},state(){return{checkedRows:{}}},methods:{toggleCheckRows:bp,isRowChecked:Cp,isAllRowChecked:bd,getChecks:$p,toggleCheckable:kp},i18n:{zh_cn:{checkedCountInfo:"已选择 {selected} 项",totalCountInfo:"共 {total} 项"},zh_tw:{checkedCountInfo:"已選擇 {selected} 項",totalCountInfo:"共 {total} 項"},en:{checkedCountInfo:"Selected {selected} items",totalCountInfo:"Total {total} items"}},footer:{checkbox(){const e=this.isAllRowChecked();return[f("div",{style:{paddingRight:"calc(3*var(--space))",display:"flex",alignItems:"center"},onClick:()=>this.toggleCheckRows(),children:Cd(e)})]},checkedInfo(e,t){const n=this.getChecks(),{checkInfo:s}=this.options;if(s)return[s.call(this,n)];const i=n.length,r=[];return i&&r.push(this.i18n("checkedCountInfo",{selected:i})),r.push(this.i18n("totalCountInfo",{total:t.allRows.length})),[f("div",{children:r.join(", ")})]}},onRenderCell(e,{row:t,col:n}){var h;const{id:s}=t,{canRowCheckable:i}=this.options,r=i?i.call(this,s):!0;if(!r)return e;const{checkbox:o}=n.setting,a=typeof o=="function"?o.call(this,s):o,l=this.isRowChecked(s);if(a){const c=(h=this.options.checkboxRender)==null?void 0:h.call(this,l,s,r==="disabled");e.unshift(c),e.push({outer:!0,className:"has-checkbox"})}return l&&e.push({outer:!0,className:"is-checked"}),e},onRenderHeaderCell(e,{row:t,col:n}){var o;const{id:s}=t,{checkbox:i}=n.setting;if(typeof i=="function"?i.call(this,s):i){const a=this.isAllRowChecked(),l=(o=this.options.checkboxRender)==null?void 0:o.call(this,a,s);e.unshift(l),e.push({outer:!0,className:"has-checkbox"})}return e},onHeaderCellClick(e){const t=e.target;if(!t)return;const n=t.closest($d);n&&(this.toggleCheckRows(n.checked),e.stopPropagation())},onCellClick(e,{rowID:t}){const n=m(e.target);if(!n.length||n.closest("btn,a,button.not-checkable,.form-control,.btn").length)return;(n.closest($d).not(".disabled").length||this.options.checkOnClickRow)&&this.toggleCheckRows(t,void 0,!0)}}),zm="",Fm="";var kd=(e=>(e.unknown="",e.collapsed="collapsed",e.expanded="expanded",e.hidden="hidden",e.normal="normal",e))(kd||{});function or(e){const t=this.data.nestedMap.get(e);if(!t||t.state!=="")return t??{state:"normal",level:-1};if(!t.parent&&!t.children)return t.state="normal",t;const n=this.state.collapsedRows,s=t.children&&n&&n[e];let i=!1,{parent:r}=t;for(;r;){const o=or.call(this,r);if(o.state!=="expanded"){i=!0;break}r=o.parent}return t.state=i?"hidden":s?"collapsed":t.children?"expanded":"normal",t.level=t.parent?or.call(this,t.parent).level+1:0,t}function Sp(e){return e!==void 0?or.call(this,e):this.data.nestedMap}function Mp(e,t){let n=this.state.collapsedRows??{};const{nestedMap:s}=this.data;if(e==="HEADER")if(t===void 0&&(t=!xd.call(this)),t){const i=s.entries();for(const[r,o]of i)o.state==="expanded"&&(n[r]=!0)}else n={};else{const i=Array.isArray(e)?e:[e];t===void 0&&(t=!n[i[0]]),i.forEach(r=>{const o=s.get(r);t&&(o!=null&&o.children)?n[r]=!0:delete n[r]})}this.update({dirtyType:"layout",state:{collapsedRows:{...n}}},()=>{var i;(i=this.options.onNestedChange)==null||i.call(this)})}function xd(){const e=this.data.nestedMap.values();for(const t of e)if(t.state==="expanded")return!1;return!0}function Sd(e,t=0,n,s=0){var i;n||(n=[...e.keys()]);for(const r of n){const o=e.get(r);o&&(o.level===s&&(o.order=t++),(i=o.children)!=null&&i.length&&(t=Sd(e,t,o.children,s+1)))}return t}function Md(e,t,n,s){const i=e.getNestedRowInfo(t);return!i||i.state===""||!i.children||i.children.forEach(r=>{s[r]=n,Md(e,r,n,s)}),i}function Td(e,t,n,s,i){var a;const r=e.getNestedRowInfo(t);if(!r||r.state==="")return;((a=r.children)==null?void 0:a.every(l=>{const h=!!(s[l]!==void 0?s[l]:i[l]);return n===h}))&&(s[t]=n),r.parent&&Td(e,r.parent,n,s,i)}const Tp=Ve({name:"nested",defaultOptions:{nested:"auto",nestedParentKey:"parent",asParentKey:"asParent",nestedIndent:20,canSortTo(e,t){const{nestedMap:n}=this.data,s=n.get(e.id),i=n.get(t.id);return(s==null?void 0:s.parent)===(i==null?void 0:i.parent)},beforeCheckRows(e,t,n){if(!this.options.checkable||!(e!=null&&e.length))return;const s={};return Object.entries(t).forEach(([i,r])=>{const o=Md(this,i,r,s);o!=null&&o.parent&&Td(this,o.parent,r,s,n)}),s}},options(e){return e.nested==="auto"&&(e.nested=!!e.cols.some(t=>t.nestedToggle)),e},when:e=>!!e.nested,data(){return{nestedMap:new Map}},methods:{getNestedInfo:Sp,toggleRow:Mp,isAllCollapsed:xd,getNestedRowInfo:or},beforeLayout(){var e;(e=this.data.nestedMap)==null||e.clear()},onAddRow(e){var i,r;const{nestedMap:t}=this.data,n=String((i=e.data)==null?void 0:i[this.options.nestedParentKey??"parent"]),s=t.get(e.id)??{state:"",level:0};if(s.parent=n==="0"?void 0:n,(r=e.data)!=null&&r[this.options.asParentKey??"asParent"]&&(s.children=[]),t.set(e.id,s),n){let o=t.get(n);o||(o={state:"",level:0},t.set(n,o)),o.children||(o.children=[]),o.children.push(e.id)}},onAddRows(e){return e=e.filter(t=>this.getNestedRowInfo(t.id).state!=="hidden"),Sd(this.data.nestedMap),e.sort((t,n)=>{const s=this.getNestedRowInfo(t.id),i=this.getNestedRowInfo(n.id),r=(s.order??0)-(i.order??0);return r===0?t.index-n.index:r}),e},onRenderCell(e,{col:t,row:n}){var a;const{id:s,data:i}=n,{nestedToggle:r}=t.setting,o=this.getNestedRowInfo(s);if(r&&(o.children||o.parent)&&e.unshift(((a=this.options.onRenderNestedToggle)==null?void 0:a.call(this,o,s,t,i))??f("a",{className:`dtable-nested-toggle state${o.children?"":" is-no-child"}`,children:f("span",{className:"toggle-icon"})})),o.level){let{nestedIndent:l=r}=t.setting;l&&(l===!0&&(l=this.options.nestedIndent??12),e.unshift(f("div",{className:"dtable-nested-indent",style:{width:l*o.level+"px"}})))}return e},onRenderHeaderCell(e,{row:t,col:n}){var i;const{id:s}=t;return n.setting.nestedToggle&&e.unshift(((i=this.options.onRenderNestedToggle)==null?void 0:i.call(this,void 0,s,n,void 0))??f("a",{className:"dtable-nested-toggle state",children:f("span",{className:"toggle-icon"})})),e},onRenderRow({props:e,row:t}){const n=this.getNestedRowInfo(t.id);return{className:S(e.className,`is-${n.state}`),"data-parent":n.parent}},onRenderHeaderRow({props:e}){return e.className=S(e.className,`is-${this.isAllCollapsed()?"collapsed":"expanded"}`),e},onHeaderCellClick(e){const t=e.target;if(!(!t||!t.closest(".dtable-nested-toggle")))return this.toggleRow("HEADER"),!0},onCellClick(e,{rowID:t}){const n=e.target;if(!(!n||!this.getNestedRowInfo(t).children||!n.closest(".dtable-nested-toggle")))return this.toggleRow(t),!0}}),Um="";function Ed(e,t,n,s){if(typeof e=="function"&&(e=e(t)),typeof e=="string"&&e.length&&(e={url:e}),!e)return n;const{url:i,...r}=e,{setting:o}=t.col,a={};return o&&Object.keys(o).forEach(l=>{l.startsWith("data-")&&(a[l]=o[l])}),f("a",{href:nt(i,t.row.data),...s,...r,...a,children:n})}function ml(e,t,n){var s;if(e!=null)return n=n??((s=t.row.data)==null?void 0:s[t.col.name]),typeof e=="function"?e(n,t):nt(e,n)}function Nd(e,t,n,s){var i;return n?(n=n??((i=t.row.data)==null?void 0:i[t.col.name]),e===!1?n:(e===!0&&(e="[yyyy-]MM-dd hh:mm"),typeof e=="function"&&(e=e(n,t)),yt(n,e,s??n))):s}function Rd(e,t){const{link:n}=t.col.setting,s=Ed(n,t,e[0]);return s&&(e[0]=s),e}function Ad(e,t){const{format:n}=t.col.setting;return n&&(e[0]=ml(n,t,e[0])),e}function Pd(e,t){const{map:n}=t.col.setting;return typeof n=="function"?e[0]=n(e[0],t):typeof n=="object"&&n&&(e[0]=n[e[0]]??e[0]),e}function Dd(e,t,n="[yyyy-]MM-dd hh:mm"){const{formatDate:s=n,invalidDate:i}=t.col.setting;return e[0]=Nd(s,t,e[0],i),e}function gl(e,t,n=!1){const{html:s=n}=t.col.setting;if(s===!1)return e;const i=e[0],r=s===!0?i:ml(s,t,i);return e[0]={html:r},e}const Ep=Ve({name:"rich",colTypes:{html:{onRenderCell(e,t){return gl(e,t,!0)}},progress:{align:"center",onRenderCell(e,{col:t}){const{circleSize:n=24,circleBorderSize:s=1,circleBgColor:i="var(--color-border)",circleColor:r="var(--color-success-500)"}=t.setting,o=(n-s)/2,a=n/2,l=e[0];return e[0]=f("svg",{width:n,height:n,children:[f("circle",{cx:a,cy:a,r:o,"stroke-width":s,stroke:i,fill:"transparent"}),f("circle",{cx:a,cy:a,r:o,"stroke-width":s,stroke:r,fill:"transparent","stroke-linecap":"round","stroke-dasharray":Math.PI*o*2,"stroke-dashoffset":Math.PI*o*2*(100-l)/100,style:{transformOrigin:"center",transform:"rotate(-90deg)"}}),f("text",{x:a,y:a+s,"dominant-baseline":"middle","text-anchor":"middle",style:{fontSize:`${o}px`},children:Math.round(l)})]}),e}},datetime:{formatDate:"[yyyy-]MM-dd hh:mm"},date:{formatDate:"yyyy-MM-dd"},time:{formatDate:"hh:mm"}},onRenderCell(e,t){const{formatDate:n,html:s,hint:i}=t.col.setting;if(n&&(e=Dd(e,t,n)),e=Pd(e,t),e=Ad(e,t),s?e=gl(e,t):e=Rd(e,t),i){let r=e[0];typeof i=="function"?r=i.call(this,t):typeof i=="string"&&(r=nt(i,t.row.data)),e.push({attrs:{title:r}})}return e}},{buildIn:!0});function yl(e,{row:t,col:n}){const{data:s}=t,i=s?s[n.name]:void 0;if(!(i!=null&&i.length))return e;const{avatarClass:r="rounded-full",avatarKey:o=`${n.name}Avatar`,avatarProps:a,avatarCodeKey:l,avatarNameKey:h=`${n.name}Name`}=n.setting,c=(s?s[h]:i)||e[0],d={size:"xs",className:S(r,a==null?void 0:a.className,"flex-none"),src:s?s[o]:void 0,text:c,code:l?s?s[l]:void 0:i,...a};if(e[0]=f(ch,{...d}),n.type==="avatarBtn"){const{avatarBtnProps:u}=n.setting,p=typeof u=="function"?u(n,t):u;e[0]=f("button",{type:"button",className:"btn btn-avatar",...p,children:[e[0],f("div",{children:c})]})}else n.type==="avatarName"&&(e[0]=f("div",{className:"flex items-center gap-1",children:[e[0],f("span",{children:c})]}));return e}const Np=Ve({name:"avatar",colTypes:{avatar:{onRenderCell:yl},avatarBtn:{onRenderCell:yl},avatarName:{onRenderCell:yl}}},{buildIn:!0}),Rp=Ve({name:"sort-type",onRenderHeaderCell(e,t){const{col:n}=t,{sortType:s}=n.setting;if(s){const i=s===!0?"none":s;e.push(f("div",{className:`dtable-sort dtable-sort-${i}`}),{outer:!0,attrs:{"data-sort":i}});let{sortLink:r=this.options.sortLink}=n.setting;if(r){const o=i==="asc"?"desc":"asc";typeof r=="function"&&(r=r.call(this,n,o,i)),typeof r=="string"&&(r={url:r});const{url:a,...l}=r;e[0]=f("a",{href:nt(a,{...n.setting,sortType:o}),...l,children:e[0]})}}return e}},{buildIn:!0}),vl=e=>{e.length!==1&&e.forEach((t,n)=>{!n||t.setting.border||t.setting.group===e[n-1].setting.group||(t.setting.border="left")})},Ap=Ve({name:"group",defaultOptions:{groupDivider:!0},when:e=>!!e.groupDivider,onLayout(e){if(!this.options.groupDivider)return;const{cols:t}=e;vl(t.left.list),vl(t.center.list),vl(t.right.list)}}),Pp=Object.freeze(Object.defineProperty({__proto__:null,NestedRowState:kd,avatar:Np,checkable:xp,group:Ap,nested:Tp,renderDatetime:Nd,renderDatetimeCell:Dd,renderFormat:ml,renderFormatCell:Ad,renderHtmlCell:gl,renderLink:Ed,renderLinkCell:Rd,renderMapCell:Pd,rich:Ep,sortType:Rp},Symbol.toStringTag,{value:"Module"}));class vn extends G{}vn.NAME="DTable",vn.Component=pl,vn.definePlugin=Ve,vn.removePlugin=cd,vn.plugins=Pp;const jm="";var Ld=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Id=(e,t,n)=>(Ld(e,t,"read from private field"),n?n.call(e):t.get(e)),Dp=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Wd=(e,t,n,s)=>(Ld(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),wn;const Lp="nav",ar='[data-toggle="tab"]',Ip="active";class wl extends ct{constructor(){super(...arguments),Dp(this,wn,0)}active(t){const n=this.$element,s=n.find(ar);let i=t?m(t).closest(ar):s.filter(`.${Ip}`);if(!i.length&&(i=n.find(ar).first(),!i.length))return;s.removeClass("active"),i.addClass("active");const r=i.attr("href")||i.data("target"),o=i.data("name")||r,a=m(r);a.length&&(a.parent().children(".tab-pane").removeClass("active in"),a.addClass("active").trigger("show",[o]),this.emit("show",o),Id(this,wn)&&clearTimeout(Id(this,wn)),Wd(this,wn,setTimeout(()=>{a.addClass("in").trigger("show",[o]),this.emit("shown",o),Wd(this,wn,0)},10)))}}wn=new WeakMap,wl.NAME="Tabs",m(document).on("click.tabs.zui",ar,e=>{e.preventDefault();const t=m(e.target),n=t.closest(`.${Lp}`);n.length&&wl.ensure(n).active(t)});const Xm="",Jm="",Zm="",Qm="",tg="",eg="",ng="",sg="",ig="",rg="",og="",ag="";m(()=>{m(".disabled, [disabled]").on("click",e=>{e.preventDefault(),e.stopImmediatePropagation()})}),b.$=m,b.ActionMenu=to,b.ActionMenuNested=no,b.Avatar=No,b.BtnGroup=Ro,b.ColorPicker=Do,b.Component=ct,b.ComponentFromReact=G,b.ContextMenu=ot,b.CustomContent=Xe,b.CustomRender=Js,b.DTable=vn,b.Dashboard=Za,b.DatePicker=Go,b.Dropdown=Rt,b.EventBus=Eo,b.HElement=Jr,b.HtmlContent=Xs,b.Icon=st,b.Menu=so,b.Messager=So,b.Modal=ea,b.ModalBase=At,b.ModalTrigger=la,b.Nav=ca,b.Pager=ha,b.Pick=da,b.Picker=ma,b.Popovers=ga,b.ProgressCircle=Mo,b.ReactComponent=F,b.SearchBox=_a,b.TIME_DAY=an,b.Tabs=wl,b.TimePicker=qo,b.Toolbar=ba,b.Tooltip=dt,b.Tree=Oa,b.Upload=Ha,b.UploadImgs=td,b.addDate=ph,b.cash=m,b.classes=S,b.componentsMap=Us,b.convertBytes=Jl,b.create=tc,b.createDate=J,b.createPortal=$c,b.createRef=j,b.deepGet=jl,b.deepGetPath=Kl,b.delay=Rn,b.dom=Du,b.formatBytes=Xl,b.formatDate=yt,b.formatDateSpan=Ef,b.formatString=nt,b.getClassList=Ur,b.h=K,b.hh=Hu,b.htm=bc,b.i18n=tt,b.isSameDay=ln,b.isSameMonth=Lo,b.isSameWeek=xf,b.isSameYear=xi,b.isToday=Sf,b.isTomorrow=Tf,b.isYesterday=Mf,b.nativeEvents=To,b.render=je,b.renderCustomContent=Zr,b.renderCustomResult=Cc,b.store=oh,b.storeData=qr,b.takeData=Ql,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=zui.umd.cjs.map
