/*!
 * ZUI: 右键菜单 - v1.10.0 - 2022-08-23
 * http://openzui.com
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2022 cnezsoft.com; Licensed MIT
 */
!function(t,e){"use strict";function n(e,n){if("string"==typeof e&&(e="seperator"===e||"divider"===e||"-"===e||"|"===e?{type:"seperator"}:{label:e,id:n}),"seperator"===e.type||"divider"===e.type)return t('<li class="divider"></li>');var o=t("<a/>").attr(t.extend({href:e.url||"###","class":e.className,style:e.style},e.attrs)).data("item",e);e.html?e.html===!0?o.html(e.label||e.text):o=t(e.html):o.text(e.label||e.text),e.icon&&o.prepend('<i class="icon icon-'+e.icon+'"></i>'),e.onClick&&o.on("click",e.onClick);var i=t("<li />").toggleClass("disabled",e.disabled===!0).append(o);return e.items&&i.data("item",e).addClass("dropdown-submenu"),i}function o(e,o,i){var r=i.itemCreator||n,a=typeof e;return"string"===a?e=e.split(","):"function"===a&&(e=e(i)),!!e&&(t.each(e,function(t,e){o.append(r(e,t,i))}),!0)}var i="zui.contextmenu",r={animation:"fade",menuTemplate:'<ul class="dropdown-menu"></ul>',toggleTrigger:!1,duration:200},a=!1,s={},u="zui-contextmenu-"+t.zui.uuid(),d=0,l=0,c=function(){return t(document).off("mousemove."+i).on("mousemove."+i,function(t){d=t.clientX,l=t.clientY}),s},m=function(e){var n=t("#"+u);return n.length&&n.hasClass("contextmenu-show")&&(!e||(n.data("options")||{}).id===e)},h=null,f=function(e,n){"function"==typeof e&&(n=e,e=null),h&&(clearTimeout(h),h=null);var o=t("#"+u);if(o.length){var i=o.removeClass("contextmenu-show").data("options");if(!e||i.id===e){var r=function(){o.find(".contextmenu-menu").removeClass("open"),i.onHidden&&i.onHidden(),n&&n()};i.onHide&&i.onHide();var a=i.animation;o.find(".contextmenu-menu").removeClass("in"),a?h=setTimeout(r,i.duration):r()}}return s},p=function(n,c,m){t.isPlainObject(n)&&(m=c,c=n,n=c.items),a=!0,c=t.extend({},r,c);var p=t("#"+u);p.length||(p=t('<div style="position: fixed; z-index: 2000;" class="contextmenu" id="'+u+'"><div class="contextmenu-menu"></div></div>').appendTo("body"));var g=p.find(".contextmenu-menu").empty();g.off("click."+i).on("click."+i,"a,.contextmenu-item",function(e){var n=t(this),o=c.onClickItem&&c.onClickItem(n.data("item"),n,e,c);o!==!1&&f()}).off("mouseenter."+i).on("mouseenter."+i,".dropdown-submenu",function(e){var n=t(this),i=n.data("item"),r=n.children(".dropdown-menu");if(i&&(i.items&&(r.length||(r=t(c.menuTemplate).appendTo(n)),o(i.items,r,c)),n.removeData("item")),r.length){r.removeClass("pull-left").css("top",0);var a=(n[0].getBoundingClientRect(),r[0].getBoundingClientRect()),s=window.innerWidth,u=window.innerHeight;if(a.bottom>u){var d=Math.max(-a.top,u-a.bottom);r.css("top",d)}a.right>s&&r.addClass("pull-left")}}),g.attr("class","contextmenu-menu"+(c.className?" "+c.className:"")),p.attr("class","contextmenu contextmenu-show");var v=c.menuCreator;if(v)g.append(v(n,c));else{g.append(c.menuTemplate);var x=g.children().first(),w=o(n,x,c);if(w===!1)return w}var y=c.animation,C=c.duration;y===!0&&(c.animation=y="fade"),h&&(clearTimeout(h),h=null);var b=function(){g.addClass("in"),c.onShown&&c.onShown(),m&&m()};c.onShow&&c.onShow(),p.data("options",{animation:y,onHide:c.onHide,onHidden:c.onHidden,id:c.id,duration:C});var T=c.x,H=c.y;T===e&&(T=(c.event||c).clientX),T===e&&(T=d),H===e&&(H=(c.event||c).clientY),H===e&&(H=l);var M=window.innerHeight,k=window.innerWidth,x=g.children().first(),$=x.outerWidth(),S=x.outerHeight();if(c.position){var D=c.position({x:T,y:H,width:$,height:S,winHeight:M,winWidth:k},c,g);D&&(T=D.x,H=D.y)}return T=Math.max(0,Math.min(T,k-$)),H=Math.max(0,Math.min(H,M-S)),p.css({left:T,top:H}).show(),g.addClass("open"),y?(g.addClass(y),h=setTimeout(function(){b(),a=!1},10)):(b(),a=!1),s};t.extend(s,{NAME:i,DEFAULTS:r,show:p,hide:f,listenMouse:c,isShow:m}),t.zui({ContextMenu:s});var g=function(e,n){var o=this;o.name=i,o.$=t(e),o.id=t.zui.uuid(),n=o.options=t.extend({trigger:"contextmenu"},s.DEFAULTS,this.$.data(),n);var r=function(t){if("mousedown"!==t.type||2===t.button){if(n.toggleTrigger&&o.isShow())o.hide();else{var e={x:t.clientX,y:t.clientY,event:t};if(o.show(e)===!1)return}return t.preventDefault(),t.returnValue=!1,!1}},a=n.trigger,u=a+"."+i;n.selector?o.$.on(u,n.selector,r):o.$.on(u,r),n.show&&o.show("object"==typeof n.show?n.show:null)};g.prototype.destory=function(){that.$.off("."+i)},g.prototype.hide=function(t){return s.hide(this.id,t)},g.prototype.show=function(e,n){return e=t.extend({id:this.id,$toggle:this.$},this.options,e),s.show(e,n)},g.prototype.isShow=function(){return m(this.id)},t.fn.contextmenu=function(e){return this.each(function(){var n=t(this),o=n.data(i),r="object"==typeof e&&e;o||n.data(i,o=new g(this,r)),"string"==typeof e&&o[e]()})},t.fn.contextmenu.Constructor=g,t.fn.contextDropdown=function(e){t(this).contextmenu(t.extend({trigger:"click",animation:"fade",toggleTrigger:!0,menuCreator:function(e,n){var o=n.$toggle,i=o.attr("data-target");i||(i=o.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var r=i?t(i):o.next(".dropdown-menu"),a=n.transferEvent;if(a!==!1){var s="data-contextmenu-index";r.find("a,.contextmenu-item").each(function(e){t(this).attr(s,e)});var u=r.clone();return u.on("string"==typeof a?a:"click","a,.contextmenu-item",function(e){var n=r.find("["+s+'="'+t(this).attr(s)+'"]'),o=n[0];if(o)return o[e.type]?o[e.type]():n.trigger(e.type),e.preventDefault(),e.stopPropagation(),!1}),u}return r.clone()},position:function(t,e,n){var o=e.placement,i=e.$toggle;if(!o){var r=n.find(".dropdown-menu"),a=r.hasClass("pull-right"),s=i.parent().hasClass("dropup");o=a?s?"top-right":"bottom-right":s?"top-left":"bottom-left",a&&r.removeClass("pull-right")}var u=i[0].getBoundingClientRect();switch(o){case"top-left":return{x:u.left,y:Math.floor(u.top-t.height)};case"top-right":return{x:Math.floor(u.right-t.width),y:Math.floor(u.top-t.height)};case"bottom-left":return{x:u.left,y:u.bottom};case"bottom-right":return{x:Math.floor(u.right-t.width),y:u.bottom}}return t}},e))},t(document).on("click",function(e){var n=t(e.target),o=n.closest('[data-toggle="context-dropdown"]');if(o.length){var r=o.data(i);r||o.contextDropdown({show:!0})}else a||n.closest(".contextmenu").length||f()})}(jQuery,void 0);